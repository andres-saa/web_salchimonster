import{J as B,d as n,K as _,o as J,r as l,a as y,c as f,e as a,b as c,D as i,u as s,I as O,F as h,f as $,U as v,n as S,P as p,q as C,t as d,w as P,L as T}from"./index-c310ae2f.js";import{c as r,s as R,a as U,p as A}from"./valoresReactivosCompartidos-ba3fa023.js";const E={class:"grid col-4 m-0 p-0"},F={class:"col p-2"},M={class:"col p-2"},b={style:{width:"100%"},sclass:"text-center"},H={__name:"MenuTienda",setup(j){B();const I=n(!1),g=n([]);n(),n();const N=async()=>{try{return await(await fetch(`${v}/categories`)).json()}catch(e){console.error("Error fetching data: ",e)}};_(r,(e,t)=>{e!==t&&(console.log(t,e),localStorage.setItem("categoryValue",JSON.stringify(e)),e.category_name!="Nueva categoria"?T.push({path:`/tienda-menu/productos/${e.category_name}`,query:{category:e.category_id}}):I.value=!0)}),_(R,(e,t)=>{e!==t&&(console.log(t,e),localStorage.setItem("siteDropValue",JSON.stringify(e)))});const D=[],L=async()=>{try{return(await fetch(`${v}/sites`)).json()}catch(e){console.log(e)}},V=()=>{N().then(e=>{g.value=e})};return J(async()=>{const e=localStorage.getItem("categoryValue");e&&(r.value=JSON.parse(e));const t=localStorage.getItem("siteDropValue");t&&(R.value=JSON.parse(t)),L().then(u=>U.value=u),V()}),(e,t)=>{const u=l("Dropdown"),x=l("Button"),w=l("RouterLink"),k=l("RouterView");return y(),f(h,null,[a("div",E,[a("div",F,[c(u,{style:{outline:"none"},class:"p-1 col-6",primary:"",modelValue:s(r),"onUpdate:modelValue":t[0]||(t[0]=o=>O(r)?r.value=o:null),options:g.value,placeholder:"Productos"},{value:i(o=>{var m;return[a("div",null,[a("i",{class:S([s(p).STAR_FILL,"mr-2"])},null,2),C(d((m=o.value)!=null&&m.category_name?o.value.category_name:{}),1)])]}),option:i(o=>[a("div",null,[a("span",null,[a("i",{class:S([o.option.category_name=="Nueva categoria"?s(p).PLUS_CIRCLE:s(p).TRASH,"mr-3"])},null,2)]),C(d(o.option.category_name),1)])]),_:1},8,["modelValue","options"])]),(y(),f(h,null,$(D,o=>a("div",M,[c(w,{to:`/tienda-menu/${o.to}`},{default:i(()=>[c(x,{style:P(`background-color:${s(A)[o.to]}`),class:"outlined col-12 p-3 text-center",outlined:"",Secondary:""},{default:i(()=>[a("span",b,d(o.name),1)]),_:2},1032,["style"])]),_:2},1032,["to"])])),64))]),c(k,{style:{"max-width":""}})],64)}}};export{H as default};
