import{r as z}from"./resumen-886ecd96.js";import{f as k,d as E,e as G,w as B,I as P,q as U,g as x,o as n,c as l,h as u,D as N,a as e,F as $,r as S,A as v,u as _,B as V,i as b,G as L,_ as O,C as R,y as j,p as M,b as H}from"./index-ec3c818c.js";import{o as J}from"./resumen.vue_vue_type_style_index_0_scoped_e0c03dc9_lang-15127546.js";const K="/images/empty-cart.jpg",Q={style:{color:"black"},class:"grid"},W={class:"mb-2"},X={class:"mb-2 text-center"},Y={class:"mt-2"},Z={key:0,class:"p-0",style:{display:"flex",width:"100%",gap:"1rem"}},ee={style:{display:"flex",width:"100%",gap:"1rem","justify-content":"space-between"}},te={class:"text-sm adicion",style:{"text-transform":"capitalize"}},oe={key:0,style:{display:"flex","align-items":"center"}},ie={key:0,class:"pl-2 py-1 text-sm"},se={key:1,class:"pl-2 py-1 text-sm"},ne=e("hr",null,null,-1),ae={class:"col-12 p-0",style:{display:"flex","justify-content":"center","font-weight":"bold"}},le={__name:"dialogAddAditions",setup(w){const o=k({}),C=E(),h=G(),A=(i,r)=>{if(i.checked){const m={id:i.aditional_item_instance_id,name:i.aditional_item_name,price:i.aditional_item_price,group:r};o.value[m.id]={...m,quantity:i.quantity||1}}else delete o.value[i.aditional_item_instance_id]},q=i=>{if(i.checked){const r={id:i.aditional_item_instance_id,name:i.aditional_item_name,price:i.aditional_item_price};o.value[r.id].quantity++}},T=i=>{o.value[i.aditional_item_instance_id].quantity>1&&o.value[i.aditional_item_instance_id]&&o.value[i.aditional_item_instance_id].quantity--};B(()=>h.visibles.addAdditionToCart,async i=>{var r,m;if(!i)o.value={},f.value=[];else{const y=h.cart.products.map(s=>s.product.id);y.length>0&&(f.value=await P.getAditionalGroup(y,(m=(r=C.location)==null?void 0:r.site)==null?void 0:m.site_id))}},{deep:!0});const I=()=>{Object.values(o.value).forEach(r=>{h.addAdditionToCart(r),console.log(r)}),o.value={},h.setVisible("addAdditionToCart",!1)},f=k([]);return k(!0),U(async()=>{var r,m;const i=h.cart.products.map(y=>y.product.id);i.length>0&&(f.value=await P.getAditionalGroup(i,(m=(r=C.location)==null?void 0:r.site)==null?void 0:m.site_id))}),(i,r)=>{const m=x("Checkbox"),y=x("Button"),s=x("InputText"),p=x("Dialog");return n(),l("div",null,[u(p,{class:"mx-3",closable:!0,style:L([{"background-color":"white"},{width:"30rem","border-radius":"0.5rem"}]),visible:_(h).visibles.addAdditionToCart,"onUpdate:visible":r[1]||(r[1]=t=>_(h).visibles.addAdditionToCart=t),modal:"",header:"Header"},{footer:N(()=>[e("div",ae,[u(y,{onClick:I,style:{width:"auto"},severity:"danger",label:"Agregar al carrito"})])]),default:N(()=>[e("div",Q,[(n(!0),l($,null,S(f.value,t=>(n(),l("div",{class:"col-12",style:{},key:t.category},[e("div",W,[e("span",X,[e("b",null,v(t.category),1)]),e("div",Y,[(n(!0),l($,null,S(t.items,a=>{var c,g;return n(),l("div",{key:a.aditional_item_instance_id,style:{display:"flex",gap:"1rem"}},[_(h).cart.products.some(d=>d.product.category_name==a.product_category_name)?(n(),l("div",Z,[u(m,{class:"my-1",binary:!0,modelValue:a.checked,"onUpdate:modelValue":d=>a.checked=d,onChange:()=>A(a,t.category)},null,8,["modelValue","onUpdate:modelValue","onChange"]),e("div",ee,[e("span",te,v(a.aditional_item_name),1),a.checked&&t.category!="SALSAS"?(n(),l("span",oe,[a.aditional_item_price>0?(n(),l("span",ie,[e("b",null,v(_(V)(a.aditional_item_price*((c=o.value[a.aditional_item_instance_id])==null?void 0:c.quantity))),1)])):b("",!0),u(y,{onClick:d=>T(a),class:"ml-2",severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none"},icon:"pi pi-minus"},null,8,["onClick"]),u(s,{modelValue:(g=o.value[a.aditional_item_instance_id])==null?void 0:g.quantity,readonly:"",style:{width:"2rem",border:"none",height:"1.5rem"},class:"p-0 text-center"},null,8,["modelValue"]),u(y,{onClick:d=>q(a),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none"},icon:"pi pi-plus"},null,8,["onClick"])])):a.aditional_item_price>0?(n(),l("span",se,[e("b",null,v(_(V)(a.aditional_item_price)),1)])):b("",!0)])])):b("",!0)])}),128)),ne])])]))),128))]),u(y,{onClick:r[0]||(r[0]=t=>_(h).setVisible("addAdditionToCart",!1)),icon:"pi pi-times",style:{position:"absolute",right:"-1rem",top:"-1rem"},rounded:"",severity:"danger"})]),_:1},8,["visible"])])}}};const D=w=>(M("data-v-54eed224"),w=w(),H(),w),re={key:0,class:"col-12 my-8 md:my-8 p-0"},de=D(()=>e("p",{class:"text-center text-2xl my-8"},[e("b",null,"CARRITO DE COMPRAS")],-1)),ce={class:"grid mx-auto",style:{"max-width":"800px"}},pe={class:"col-12 text-sm md:col-6 p-3 md:px-4",style:{display:"flex","flex-direction":"column",gap:"1rem","justify-content":"center"}},ue={class:"col-12 py-3 p-shadow shadow-6",style:{display:"flex","align-items":"end",position:"relative",gap:"1rem","border-radius":"0.3rem"}},_e=["src"],me={style:{display:"flex","flex-direction":"column",gap:"0.4rem",width:"100%"}},he={style:{display:"flex","flex-direction":"column",gap:"0.3rem",width:"100%"}},ye={style:{display:"flex","justify-content":"space-between","align-items":"center",width:"100%",gap:"1rem"}},ge={class:"p-0 m-0"},ve={style:{display:"flex"}},be=D(()=>e("div",null,null,-1)),fe={class:"p-0",style:{"box-shadow":"0 0 0.5rem rgba(0, 0, 0, 0.2)","background-color":"#ff620000","border-radius":"5rem",display:"flex"}},xe={class:"p-0 m-0"},ke={class:"col-12 p-0 mt-1"},we={class:"mb-2"},Ce={class:"mb-2 text-center"},Ae={class:"mt-2"},$e={style:{display:"flex",width:"100%",gap:"1rem","justify-content":"space-between"}},Se={class:"text adicion",style:{"text-transform":"capitalize"}},Te={style:{display:"flex","align-items":"center"}},Ve={key:0,class:"pl-2 py-1 text-sm"},qe={key:1,style:{"box-shadow":"0 0 5px rgba(0, 0, 0, 0.411)",display:"flex","border-radius":"0.3rem"},class:"ml-2"},Ie={key:1,class:"col-12",style:{display:"flex","justify-content":"center",height:"90vh","align-items":"center"}},je=D(()=>e("img",{style:{"border-radius":"0",width:"100%","max-width":"500px"},src:K,alt:""},null,-1)),Be=[je],Pe={__name:"cart",setup(w){const o=G(),C=E(),h=k({}),A=k({}),q=R(),T=()=>{A.value=o.cart.additions.reduce((s,p)=>{let t=p.group;return s[t]||(s[t]=[]),s[t].push(p),s},{})};B(()=>o.cart.additions,()=>{T()},{deep:!0}),J.preparar_orden();const I=s=>{const p={...s};p.quantity=1,o.addAdditionToCart(p)},f=s=>{s.quantity>1&&o.removeAdditionFromCart(s.id)},i=s=>{o.removeAdditionCompletelyFromCart(s.id),T()},r=s=>{s.forEach(p=>{i(p)})};B(()=>o.visibles.addAdditionToCart,s=>{s&&(h.value={})},{deep:!0});const m=k([]);return U(async()=>{var p;((p=q.user.payment_method_option)==null?void 0:p.productogeneral_id)!=7?C.setNeighborhoodPrice():C.setNeighborhoodPriceCero();const s=53;m.value=await P.getAditional(s),A.value=o.cart.additions.reduce((t,a)=>{let c=a.group;return t[c]||(t[c]=[]),t[c].push(a),t},{})}),(()=>{const s=o.cart.products.map(t=>t.product.producto_id);console.log(s);const p=o.menu.data.map(t=>t.lista_agrupadores);console.log(p)})(),(s,p)=>{const t=x("Button"),a=x("InputText");return n(),l("div",null,[_(o).cart.products.length>0?(n(),l("div",re,[de,e("div",ce,[e("div",pe,[(n(!0),l($,null,S(_(o).cart.products,c=>(n(),l("div",ue,[e("img",{class:"p-1",style:{width:"5rem","object-fit":"cover",height:"5remh","aspect-ratio":"1 / 1",border:"3px solid var(--primary-color)"},src:`https://img.restpe.com/${c.product.productogeneral_urlimagen}`,alt:""},null,8,_e),u(t,{class:"ml-2",onClick:g=>_(o).removeProductFromCart(c.product.productogeneral_id),icon:"pi pi-trash",severity:"danger",rounded:"",style:{border:"none",right:"-.5rem",top:"-.5rem",position:"absolute",outline:"none",width:"2rem",height:"2rem"}},null,8,["onClick"]),e("div",me,[e("div",he,[e("div",ye,[e("span",ge,v(c.product.productogeneral_descripcion),1)]),e("div",ve,[be,e("div",fe,[u(t,{onClick:g=>_(o).removeProductInstance(c.product.productogeneral_id),icon:"pi pi-minus",severity:"danger",style:{border:"none",outline:"none",width:"2rem",height:"1.5rem","border-radius":"0.4rem 0 0 0.4rem"}},null,8,["onClick"]),u(a,{class:"text-center",style:{"background-color":"transparent","font-weight":"bold",width:"3rem",height:"1.5rem",color:"black",border:"none"},modelValue:c.quantity,readonly:""},null,8,["modelValue"]),u(t,{onClick:g=>_(o).addProductToCart(c.product),icon:"pi pi-plus ",severity:"danger",style:{"font-weight":"bold",border:"none",outline:"none",width:"2rem",height:"1.5rem","border-radius":"0 0.4rem   0.4rem 0"}},null,8,["onClick"])])])])]),e("h5",xe,[e("b",null,v(_(V)(c.total_cost)),1)])]))),256)),e("div",ke,[(n(!0),l($,null,S(A.value,(c,g)=>(n(),l("div",{class:"p-shadow p-3 mb-4",key:g,style:{position:"relative","border-radius":"0.3rem"}},[u(t,{class:"ml-2",onClick:d=>r(c),icon:"pi pi-trash",severity:"danger",rounded:"",style:{border:"none",right:"-.5rem",top:"-.5rem",position:"absolute",outline:"none",width:"2rem",height:"2rem"}},null,8,["onClick"]),e("div",we,[e("span",Ce,[e("b",null,v(g),1)]),e("div",Ae,[(n(!0),l($,null,S(c,d=>(n(),l("div",{key:d.aditional_item_instance_id,style:{display:"flex",gap:"1rem","align-items":"center"}},[u(t,{text:"",rounded:"",onClick:F=>i(d),class:"p-0 m-0",severity:"danger",style:{width:"2rem",height:"2rem",border:"none"},icon:"pi pi-trash m-0"},null,8,["onClick"]),e("div",$e,[e("span",Se,v(d.name),1),e("span",Te,[d.price>0?(n(),l("span",Ve,[e("b",null,v(_(V)(d.price*d.quantity)),1)])):b("",!0),g!="SALSAS"?(n(),l("div",qe,[d.multiple>0?(n(),j(t,{key:0,onClick:F=>f(d),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none","border-radius":"0.3rem 0 0 0.3rem"},icon:"pi pi-minus"},null,8,["onClick"])):b("",!0),d.multiple>0?(n(),j(a,{key:1,modelValue:d.quantity,readonly:"",style:{width:"2rem",border:"none",height:"1.5rem"},class:"p-0 text-center"},null,8,["modelValue"])):b("",!0),d.multiple>0?(n(),j(t,{key:2,onClick:F=>I(d),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none","border-radius":"0 0.3rem 0.3rem 0"},icon:"pi pi-plus"},null,8,["onClick"])):b("",!0)])):b("",!0)])])]))),128))])])]))),128))])]),u(z,{class:"md:col-6 shadow-6"})])])):(n(),l("div",Ie,Be)),u(le)])}}},Ee=O(Pe,[["__scopeId","data-v-54eed224"]]);export{Ee as default};
