import{_ as b,i as c,j as k,a as e,c as t,d as o,F as p,e as v,u as n,U as w,f as u,t as _,n as h,k as I,b as y,l as $,p as z,m as j,h as m,s as C}from"./index-11d957fb.js";import{D as S}from"./dialogo-pedido-1b706ef5.js";const R={class:"col-12"},B={class:"grid pedido align-items-center",style:{color:"white",cursor:"pointer"}},D=["src"],N={key:0,class:"pi pi-spin pi-spinner ml-3",style:{"font-size":"3rem",color:"var(--primary-color)","font-weight":"bold"}},P={key:1,class:"pi pi-check",style:{"font-size":"3rem",color:"var(--primary-color)","font-weight":"bold"}},U={key:2,class:"pi pi-star-fill p-3",style:{"font-size":"3rem",color:"var(--primary-color)","font-weight":"bold"}},V={class:"col text-right m-3 p-0",style:{color:"black","font-weight":"bold","min-width":"max-content"}},E={style:{position:"absolute",top:"50%",left:"50%","z-index":"99",transform:"translate(-50%, -50%)"}},F={__name:"pedidoItem",props:{order:{type:Object,default:{}},estado:{type:Object,default:{}}},setup(a){const l=a,i=c(0),s=c(parseInt(localStorage.getItem(l.order.order_id))||15*60),r=c(Math.floor(s.value/60)),d=c(s.value%60);function g(){l.order.order_status.status==="en preparacion"&&(s.value--,r.value=Math.floor(s.value/60),d.value=s.value%60,localStorage.setItem(l.order.order_id,s.value),i.value=(15*60-s.value)/(15*60)*100,s.value<=0&&(clearInterval(f),alert(`Se terminó el tiempo de preparación de la orden #${l.order.order_id}`)))}const f=setInterval(g,1e3);return k(()=>{clearInterval(f)}),(J,K)=>(e(),t("div",R,[o("div",B,[(e(!0),t(p,null,v(a.order.order_products.slice(0,4),x=>(e(),t("div",null,[o("img",{class:"",style:{width:"60px",height:"60px","object-fit":"contain"},src:`${n(w)}/read_product_image/96/${x.id}`,alt:""},null,8,D)]))),256)),a.estado.order_status=="en preparacion"?(e(),t("i",N)):u("",!0),a.estado.order_status=="enviada"?(e(),t("i",P)):u("",!0),a.estado.order_status=="generada"?(e(),t("i",U)):u("",!0),o("span",V," #"+_(a.order.order_id),1),a.order.order_status.status=="en preparacion"?(e(),t("div",{key:3,class:h([r.value==0&&d.value==0?"finalizado":"","countdown-timer m-3"]),style:{borderRadius:"50%",position:"relative",width:"3rem",height:"3rem"}},[o("div",E,_(r.value)+":"+_(d.value),1),o("div",{style:I({position:"absolute",width:"100%",height:"100%",borderRadius:"50%",clipPath:"polygon(0 0, 100% 0, 100% 100%, 0% 100%)",background:"linear-gradient(90deg, rgb(255, 119, 119) 0%, rgb(255, 119, 119) "+i.value+"%, transparent "+i.value+"%, transparent 100%)"})},null,4)],2)):u("",!0)])]))}},M=b(F,[["__scopeId","data-v-ba35935d"]]);const O={style:{},class:"grid p-0"},L={class:"col-12 lg:col-6 xl:col-4 p-3",style:{}},T={class:"col-12 m-0 mb-3",style:{"background-color":"rgba(255, 255, 255, 0.493)","border-radius":"0.5rem"}},q={class:"text-2xl m-auto col-12",style:{"font-weight":"bold"}},A={class:"col-12 p-0",style:{height:"60vh","overflow-y":"auto"}},G=["onClick"],H={__name:"pedidos",setup(a){const l=i=>{C(i),m.value=!m.value};return(i,s)=>(e(),t(p,null,[o("div",O,[(e(!0),t(p,null,v(n(j),r=>(e(),t("div",L,[o("div",{class:h(["col-12 mb",r.name.split(" ")[0]]),style:{"border-radius":"1rem","box-shadow":"0px 0px 30px rgba(0, 0, 0, 0.3)"}},[o("div",T,[o("span",q,_(r.name),1)]),o("div",A,[(e(!0),t(p,null,v(n($)(n(z),r.order_status),d=>(e(),t("div",{class:"col-12 p-0",style:{},onClick:g=>l(d)},[y(M,{order:d,estado:r},null,8,["order","estado"])],8,G))),256))])],2)]))),256))]),y(S),o("div",{class:h(n(m)?"before":"")},null,2)],64))}},X=b(H,[["__scopeId","data-v-fe7650e6"]]);export{X as default};
