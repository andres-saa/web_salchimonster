import{d as p,_ as I,M as N,o as S,r as f,a as v,c as g,e as t,n as x,u as c,P as w,U as b,t as _,b as h,J as V,K as y,F as $,f as A,D as k,I as B,w as D,q as M,A as U,B as R}from"./index-343dc17d.js";import{f as F}from"./formatoPesos-2a38d2e7.js";import{b as E,d,e as P,s as H,f as J}from"./valoresReactivosCompartidos-f2450b3f.js";p({products:[],total:0});p([]);const L={class:"cont p-2",style:{"background-color":"white",height:"100%",position:"relative"}},O={class:"imagen-cont",style:{position:""}},q=["src"],K={style:{display:""}},G={class:"nombre-producto mt-4",style:{"font-weight":"bold"}},Q={class:"descripcion-producto mt-2 text-sm mb-4"},W={class:"info"},X={class:"text-l",style:{"font-weight":"bold","border-radius":"100px"}},Y={__name:"TarjetaMenu",props:{product:{type:Object,default:{}}},setup(u){const e=u,l=N(),s=p(!1),r=()=>{E.value=!E.value,productoAEditar.value=e.product};p(!1),p(!0),S(async()=>{s.value=e.product.state=="active"});const o=()=>{d.value=!d.value,P.value=e.product},n=()=>{const a={...e.product};a.state=s.value?"active":"inactive",fetch(`${b}/products/${e.product.product_id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(i=>{if(!i.ok)throw new Error("Network response was not ok");return l.add({severity:`${s.value?"success":"error"}`,summary:`${s.value?"Activado":"Desactivado"}`,detail:e.product.name,life:3e3}),i.json()}).then(i=>{}).catch(i=>{console.error("Error al actualizar el producto:",i)})},m=a=>{a.target.src="https://salchimonster.com/images/logo.png"};return(a,i)=>{const C=f("Toast"),j=f("InputSwitch");return v(),g("div",L,[t("button",{style:{position:"absolute",top:"-1rem",right:"-1rem","background-color":"var(--primary-color)",width:"2.5rem",height:"2.5rem","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",color:"white","z-index":"99"},onClick:r,class:"add-cart-btn text-xl"},[t("i",{class:x(["icono text-2xl p-0 m-0",c(w).PENCIL])},null,2)]),t("button",{style:{position:"absolute",top:"-1rem",right:"2rem","background-color":"var(--red-500)",width:"2.5rem",height:"2.5rem","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",color:"white","z-index":"99"},onClick:o,class:"add-cart-btn text-xl"},[t("i",{class:x(["icono text-2xl p-0 m-0",c(w).TRASH])},null,2)]),t("div",O,[t("img",{class:"imagen",onError:m,style:{height:"50"},src:`${c(b)}/read-product-image/300/${e.product.name}`,alt:""},null,40,q)]),t("div",K,[t("p",G,_(e.product.name),1),t("p",Q,_(e.product.description),1)]),h(C,{style:{"box-shadow":"none"}}),t("div",W,[t("div",X,_(c(F)(e.product.price)),1),h(j,{class:"p-0 m-0",modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=z=>s.value=z),onChange:n,style:{}},null,8,["modelValue"])])])}}},Z=I(Y,[["__scopeId","data-v-b503596a"]]);const T=u=>(U("data-v-b5f646a8"),u=u(),R(),u),tt={style:{"text-transform":"capitalize","max-width":""},class:"text-2xl ml-2 py-2"},et=T(()=>t("div",{class:"grid"},null,-1)),ot={class:"grid p-2 col-12 m-auto",style:{"max-width":"1024px"}},st={class:"flex align-items-center justify-content-center"},at=T(()=>t("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),rt={style:{color:"black"}},nt={__name:"sesion",setup(u){const e=p([]),l=V(),s=async r=>{console.log(localStorage);const o=localStorage.getItem("siteId");try{let n=await fetch(`${b}/products/category/name/${r}/site/${o}`);if(!n.ok)throw e.value=[],new Error(`HTTP error! status: ${n.status}`);let m=await n.json();e.value=m}catch(n){e.value=[],console.error("Error fetching data: ",n)}};return y(H,(r,o)=>{r!==o&&s(l.params.sesion)}),y(J,(r,o)=>{r!==o&&s(l.params.sesion)}),S(async()=>{s(l.params.sesion)}),y(()=>l.params.sesion,r=>{s(r)}),(r,o)=>{const n=f("Button"),m=f("Dialog");return v(),g($,null,[t("p",tt,_(c(l).params.sesion),1),et,t("div",ot,[(v(!0),g($,null,A(e.value,a=>(v(),g("div",{key:a.id,class:"xl:col-3 lg:col-4 md:p-3 col-12 m-0"},[h(Z,{class:"col-12 m-0 p-0",product:a},null,8,["product"])]))),128))]),h(m,{header:"Confirmation",visible:c(d),"onUpdate:visible":o[1]||(o[1]=a=>B(d)?d.value=a:null),style:D([{width:"350px"},{"background-color":"white",color:"black"}]),modal:!0},{footer:k(()=>[h(n,{label:"Salir",icon:"pi pi-times",onClick:o[0]||(o[0]=a=>d.value=!c(d)),class:"p-button-text"})]),default:k(()=>[t("div",st,[at,t("span",rt,[M("No esta autorizado para eliminar "),t("b",null,_(c(P).name),1)])])]),_:1},8,["visible"])],64)}}},dt=I(nt,[["__scopeId","data-v-b5f646a8"]]);export{dt as default};
