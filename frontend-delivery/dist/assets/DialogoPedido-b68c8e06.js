import{C as ie,D as W,_ as se,k as D,u as ae,g as ne,U as oe,f as re,r as z,o as P,c as A,b as e,a as x,p as L,E as $,d as b,G as N,h as T,t as _,x as H,y as B,n as de,F as V,i as F,s as ce,v as ue}from"./index-eadb7dc2.js";import{f as R}from"./formatoPesos-2a38d2e7.js";import{u as K}from"./reportes-06e0a1ba.js";const le={router:ie,async get(M,S,s={}){const d=K();try{S?d.setLoading(!0,S):d.setLoading(!0,"cargando");const t={headers:s.headers||{}},l=await W.get(M,t);return l.status===200?(d.setLoading(!1),l.data):(d.setLoading(!1),console.error("An error occurred while fetching data:",l.status),null)}catch(t){return d.setLoading(!1),console.error("An error occurred while fetching data:",t),null}},async post(M,S,s,d=null){const t=K();try{t.setLoading(!0,s);const l=await W.post(M,S);return l.status===200||l.status===201?(t.setLoading(!1),d&&this.router.push(d),l.data):(t.setLoading(!1),console.error("An error occurred while posting data:",l.status),null)}catch(l){return t.setLoading(!1),console.error("An error occurred while posting data:",l),null}},async put(M,S,s,d=null){const t=K();try{t.setLoading(!0,s);const l=await W.put(M,S);return l.status===200||l.status===204?(t.setLoading(!1),d&&this.router.push(d),l.data):(t.setLoading(!1),console.error("An error occurred while updating data:",l.status),null)}catch(l){return t.setLoading(!1),console.error("An error occurred while updating data:",l),null}},async delete(M,S,s=null){const d=K();try{d.setLoading(!0,S);const t=await W.delete(M);return t.status===200||t.status===204?(d.setLoading(!1),s&&this.router.push(s),t.data):(d.setLoading(!1),console.error("An error occurred while deleting data:",t.status),null)}catch(t){return d.setLoading(!1),console.error("An error occurred while deleting data:",t),null}}};var fe={exports:{}};(function(M,S){(function(d,t){M.exports=t()})(window,function(){return function(s){var d={};function t(l){if(d[l])return d[l].exports;var f=d[l]={i:l,l:!1,exports:{}};return s[l].call(f.exports,f,f.exports,t),f.l=!0,f.exports}return t.m=s,t.c=d,t.d=function(l,f,p){t.o(l,f)||Object.defineProperty(l,f,{enumerable:!0,get:p})},t.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},t.t=function(l,f){if(f&1&&(l=t(l)),f&8||f&4&&typeof l=="object"&&l&&l.__esModule)return l;var p=Object.create(null);if(t.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:l}),f&2&&typeof l!="string")for(var E in l)t.d(p,E,(function(u){return l[u]}).bind(null,E));return p},t.n=function(l){var f=l&&l.__esModule?function(){return l.default}:function(){return l};return t.d(f,"a",f),f},t.o=function(l,f){return Object.prototype.hasOwnProperty.call(l,f)},t.p="",t(t.s=0)}({"./src/index.js":function(s,d,t){t.r(d),t("./src/sass/index.scss");var l=t("./src/js/init.js"),f=l.default.init;typeof window<"u"&&(window.printJS=f),d.default=f},"./src/js/browser.js":function(s,d,t){t.r(d);var l={isFirefox:function(){return typeof InstallTrigger<"u"},isIE:function(){return navigator.userAgent.indexOf("MSIE")!==-1||!!document.documentMode},isEdge:function(){return!l.isIE()&&!!window.StyleMedia},isChrome:function(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;return!!p.chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||navigator.userAgent.toLowerCase().indexOf("safari")!==-1},isIOSChrome:function(){return navigator.userAgent.toLowerCase().indexOf("crios")!==-1}};d.default=l},"./src/js/functions.js":function(s,d,t){t.r(d),t.d(d,"addWrapper",function(){return E}),t.d(d,"capitalizePrint",function(){return u}),t.d(d,"collectStyles",function(){return c}),t.d(d,"addHeader",function(){return r}),t.d(d,"cleanUp",function(){return m}),t.d(d,"isRawHTML",function(){return h});var l=t("./src/js/modal.js"),f=t("./src/js/browser.js");function p(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?p=function(n){return typeof n}:p=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},p(o)}function E(o,i){var n="font-family:"+i.font+" !important; font-size: "+i.font_size+" !important; width:100%;";return'<div style="'+n+'">'+o+"</div>"}function u(o){return o.charAt(0).toUpperCase()+o.slice(1)}function c(o,i){for(var n=document.defaultView||window,g="",y=n.getComputedStyle(o,""),O=0;O<y.length;O++)(i.targetStyles.indexOf("*")!==-1||i.targetStyle.indexOf(y[O])!==-1||a(i.targetStyles,y[O]))&&y.getPropertyValue(y[O])&&(g+=y[O]+":"+y.getPropertyValue(y[O])+";");return g+="max-width: "+i.maxWidth+"px !important; font-size: "+i.font_size+" !important;",g}function a(o,i){for(var n=0;n<o.length;n++)if(p(i)==="object"&&i.indexOf(o[n])!==-1)return!0;return!1}function r(o,i){var n=document.createElement("div");if(h(i.header))n.innerHTML=i.header;else{var g=document.createElement("h1"),y=document.createTextNode(i.header);g.appendChild(y),g.setAttribute("style",i.headerStyle),n.appendChild(g)}o.insertBefore(n,o.childNodes[0])}function m(o){o.showModal&&l.default.close(),o.onLoadingEnd&&o.onLoadingEnd(),(o.showModal||o.onLoadingStart)&&window.URL.revokeObjectURL(o.printable);var i="mouseover";(f.default.isChrome()||f.default.isFirefox())&&(i="focus");var n=function g(){window.removeEventListener(i,g),o.onPrintDialogClose();var y=document.getElementById(o.frameId);y&&y.remove()};window.addEventListener(i,n)}function h(o){var i=new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>");return i.test(o)}},"./src/js/html.js":function(s,d,t){t.r(d);var l=t("./src/js/functions.js"),f=t("./src/js/print.js");function p(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?p=function(r){return typeof r}:p=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},p(c)}d.default={print:function(a,r){var m=u(a.printable)?a.printable:document.getElementById(a.printable);if(!m){window.console.error("Invalid HTML element id: "+a.printable);return}a.printableElement=E(m,a),a.header&&Object(l.addHeader)(a.printableElement,a),f.default.send(a,r)}};function E(c,a){for(var r=c.cloneNode(),m=Array.prototype.slice.call(c.childNodes),h=0;h<m.length;h++)if(a.ignoreElements.indexOf(m[h].id)===-1){var o=E(m[h],a);r.appendChild(o)}switch(a.scanStyles&&c.nodeType===1&&r.setAttribute("style",Object(l.collectStyles)(c,a)),c.tagName){case"SELECT":r.value=c.value;break;case"CANVAS":r.getContext("2d").drawImage(c,0,0);break}return r}function u(c){return p(c)==="object"&&c&&(c instanceof HTMLElement||c.nodeType===1)}},"./src/js/image.js":function(s,d,t){t.r(d);var l=t("./src/js/functions.js"),f=t("./src/js/print.js"),p=t("./src/js/browser.js");d.default={print:function(u,c){u.printable.constructor!==Array&&(u.printable=[u.printable]),u.printableElement=document.createElement("div"),u.printable.forEach(function(a){var r=document.createElement("img");if(r.setAttribute("style",u.imageStyle),r.src=a,p.default.isFirefox()){var m=r.src;r.src=m}var h=document.createElement("div");h.appendChild(r),u.printableElement.appendChild(h)}),u.header&&Object(l.addHeader)(u.printableElement,u),f.default.send(u,c)}}},"./src/js/init.js":function(s,d,t){t.r(d);var l=t("./src/js/browser.js"),f=t("./src/js/modal.js"),p=t("./src/js/pdf.js"),E=t("./src/js/html.js"),u=t("./src/js/raw-html.js"),c=t("./src/js/image.js"),a=t("./src/js/json.js");function r(h){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r=function(i){return typeof i}:r=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},r(h)}var m=["pdf","html","image","json","raw-html"];d.default={init:function(){var o={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(U){throw U},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},i=arguments[0];if(i===void 0)throw new Error("printJS expects at least 1 attribute.");switch(r(i)){case"string":o.printable=encodeURI(i),o.fallbackPrintable=o.printable,o.type=arguments[1]||o.type;break;case"object":o.printable=i.printable,o.fallbackPrintable=typeof i.fallbackPrintable<"u"?i.fallbackPrintable:o.printable,o.fallbackPrintable=o.base64?"data:application/pdf;base64,".concat(o.fallbackPrintable):o.fallbackPrintable;for(var n in o)n==="printable"||n==="fallbackPrintable"||(o[n]=typeof i[n]<"u"?i[n]:o[n]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+r(i))}if(!o.printable)throw new Error("Missing printable information.");if(!o.type||typeof o.type!="string"||m.indexOf(o.type.toLowerCase())===-1)throw new Error("Invalid print type. Available types are: pdf, html, image and json.");o.showModal&&f.default.show(o),o.onLoadingStart&&o.onLoadingStart();var g=document.getElementById(o.frameId);g&&g.parentNode.removeChild(g);var y=document.createElement("iframe");switch(l.default.isFirefox()?y.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):y.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),y.setAttribute("id",o.frameId),o.type!=="pdf"&&(y.srcdoc="<html><head><title>"+o.documentTitle+"</title>",o.css&&(Array.isArray(o.css)||(o.css=[o.css]),o.css.forEach(function(j){y.srcdoc+='<link rel="stylesheet" href="'+j+'">'})),y.srcdoc+="</head><body></body></html>"),o.type){case"pdf":if(l.default.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer.");var O=window.open(o.fallbackPrintable,"_blank");O.focus(),o.onIncompatibleBrowser()}catch(j){o.onError(j)}finally{o.showModal&&f.default.close(),o.onLoadingEnd&&o.onLoadingEnd()}else p.default.print(o,y);break;case"image":c.default.print(o,y);break;case"html":E.default.print(o,y);break;case"raw-html":u.default.print(o,y);break;case"json":a.default.print(o,y);break}}}},"./src/js/json.js":function(s,d,t){t.r(d);var l=t("./src/js/functions.js"),f=t("./src/js/print.js");function p(u){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?p=function(a){return typeof a}:p=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},p(u)}d.default={print:function(c,a){if(p(c.printable)!=="object")throw new Error("Invalid javascript data object (JSON).");if(typeof c.repeatTableHeader!="boolean")throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!c.properties||!Array.isArray(c.properties))throw new Error("Invalid properties array for your JSON data.");c.properties=c.properties.map(function(r){return{field:p(r)==="object"?r.field:r,displayName:p(r)==="object"?r.displayName:r,columnSize:p(r)==="object"&&r.columnSize?r.columnSize+";":100/c.properties.length+"%;"}}),c.printableElement=document.createElement("div"),c.header&&Object(l.addHeader)(c.printableElement,c),c.printableElement.innerHTML+=E(c),f.default.send(c,a)}};function E(u){var c=u.printable,a=u.properties,r='<table style="border-collapse: collapse; width: 100%;">';u.repeatTableHeader&&(r+="<thead>"),r+="<tr>";for(var m=0;m<a.length;m++)r+='<th style="width:'+a[m].columnSize+";"+u.gridHeaderStyle+'">'+Object(l.capitalizePrint)(a[m].displayName)+"</th>";r+="</tr>",u.repeatTableHeader&&(r+="</thead>"),r+="<tbody>";for(var h=0;h<c.length;h++){r+="<tr>";for(var o=0;o<a.length;o++){var i=c[h],n=a[o].field.split(".");if(n.length>1)for(var g=0;g<n.length;g++)i=i[n[g]];else i=i[a[o].field];r+='<td style="width:'+a[o].columnSize+u.gridStyle+'">'+i+"</td>"}r+="</tr>"}return r+="</tbody></table>",r}},"./src/js/modal.js":function(s,d,t){t.r(d);var l={show:function(p){var E="font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;",u=document.createElement("div");u.setAttribute("style",E),u.setAttribute("id","printJS-Modal");var c=document.createElement("div");c.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var a=document.createElement("div");a.setAttribute("class","printClose"),a.setAttribute("id","printClose"),c.appendChild(a);var r=document.createElement("span");r.setAttribute("class","printSpinner"),c.appendChild(r);var m=document.createTextNode(p.modalMessage);c.appendChild(m),u.appendChild(c),document.getElementsByTagName("body")[0].appendChild(u),document.getElementById("printClose").addEventListener("click",function(){l.close()})},close:function(){var p=document.getElementById("printJS-Modal");p&&p.parentNode.removeChild(p)}};d.default=l},"./src/js/pdf.js":function(s,d,t){t.r(d);var l=t("./src/js/print.js"),f=t("./src/js/functions.js");d.default={print:function(u,c){if(u.base64){var a=Uint8Array.from(atob(u.printable),function(m){return m.charCodeAt(0)});p(u,c,a);return}u.printable=/^(blob|http|\/\/)/i.test(u.printable)?u.printable:window.location.origin+(u.printable.charAt(0)!=="/"?"/"+u.printable:u.printable);var r=new window.XMLHttpRequest;r.responseType="arraybuffer",r.addEventListener("error",function(){Object(f.cleanUp)(u),u.onError(r.statusText,r)}),r.addEventListener("load",function(){if([200,201].indexOf(r.status)===-1){Object(f.cleanUp)(u),u.onError(r.statusText,r);return}p(u,c,r.response)}),r.open("GET",u.printable,!0),r.send()}};function p(E,u,c){var a=new window.Blob([c],{type:"application/pdf"});a=window.URL.createObjectURL(a),u.setAttribute("src",a),l.default.send(E,u)}},"./src/js/print.js":function(s,d,t){t.r(d);var l=t("./src/js/browser.js"),f=t("./src/js/functions.js"),p={send:function(r,m){document.getElementsByTagName("body")[0].appendChild(m);var h=document.getElementById(r.frameId);h.onload=function(){if(r.type==="pdf"){l.default.isFirefox()?setTimeout(function(){return E(h,r)},1e3):E(h,r);return}var o=h.contentWindow||h.contentDocument;if(o.document&&(o=o.document),o.body.appendChild(r.printableElement),r.type!=="pdf"&&r.style){var i=document.createElement("style");i.innerHTML=r.style,o.head.appendChild(i)}var n=o.getElementsByTagName("img");n.length>0?u(Array.from(n)).then(function(){return E(h,r)}):E(h,r)}}};function E(a,r){try{if(a.focus(),l.default.isEdge()||l.default.isIE())try{a.contentWindow.document.execCommand("print",!1,null)}catch{a.contentWindow.print()}else a.contentWindow.print()}catch(m){r.onError(m)}finally{l.default.isFirefox()&&(a.style.visibility="hidden",a.style.left="-1px"),Object(f.cleanUp)(r)}}function u(a){var r=a.map(function(m){if(m.src&&m.src!==window.location.href)return c(m)});return Promise.all(r)}function c(a){return new Promise(function(r){var m=function h(){!a||typeof a.naturalWidth>"u"||a.naturalWidth===0||!a.complete?setTimeout(h,500):r()};m()})}d.default=p},"./src/js/raw-html.js":function(s,d,t){t.r(d);var l=t("./src/js/print.js");d.default={print:function(p,E){p.printableElement=document.createElement("div"),p.printableElement.setAttribute("style","width:100%"),p.printableElement.innerHTML=p.printable,l.default.send(p,E)}}},"./src/sass/index.scss":function(s,d,t){},0:function(s,d,t){s.exports=t("./src/index.js")}}).default})})(fe);const w=M=>(ce("data-v-48a10fe7"),M=M(),ue(),M),pe=w(()=>e("h3",null,[e("b",null,"Cancelar Orden")],-1)),me=["onSubmit"],be=w(()=>e("span",{for:"responsible"},"Responsable",-1)),ye=w(()=>e("span",{for:"reason"},"Razón",-1)),he=w(()=>e("h3",null,[e("b",null,"Cancelar Orden")],-1)),ge=["onSubmit"],ve=w(()=>e("span",{class:"advert",style:{"text-transform":"lowercase",color:"red","font-weight":"bold"}}," Desde el 16 de mayo de 2024, la cancelación de órdenes requerirá autorización.",-1)),_e=w(()=>e("span",{for:"responsible"},"Responsable",-1)),Ee=w(()=>e("span",{for:"reason"},"Razón",-1)),we={style:{"text-transform":"capitalize"}},Oe={class:"col-12 mb-0 pb-0 px-0 m-0",style:{display:"flex","justify-content":"space-between",gap:"1rem"}},xe={class:""},je={id:"factura",style:{width:"100%"}},Me=w(()=>e("i",{class:"pi pi-whatsapp mr-2"},null,-1)),Se=w(()=>e("br",null,null,-1)),Pe={class:"",style:{width:"auto"}},Ce={class:"",id:"id",style:{"font-weight":"bold","min-width":"100%",width:"max-content","text-align":"center",color:"black",margin:"0rem"}},Le={class:"",id:"id",style:{"font-weight":"bold","min-width":"100%",width:"max-content","text-align":"center",color:"black",margin:"0rem"}},Te={style:{padding:"0",color:"black","text-align":"center",margin:"auto","margin-bottom":"1rem",width:"max-content","min-width":"max-content",display:"flex","justify-content":"center","flex-direction":"column"}},Ae=w(()=>e("div",{class:"",style:{"font-weight":"bold",color:"white",margin:"0","background-color":"black","align-items":"center",display:"grid","grid-template-columns":"auto auto"}},[e("div",{style:{width:"100%"}},[e("b",null," productos")]),e("div",null,[e("p",{style:{"text-align":"end","font-weight":"bold"}},[e("b",null," total ")])])],-1)),De={style:{display:"grid","grid-template-columns":"auto auto"}},Ie={class:"p-0 m-0"},Be=w(()=>e("br",null,null,-1)),Re={key:0,style:{"text-align":"end",color:"black"}},Ue={key:1,style:{"text-align":"end",color:"black"}},ze={key:0,class:"p-0 m-0"},Ne=w(()=>e("b",null,"COMBO INCLUYE",-1)),We=[Ne],He={class:"p-0 m-0 ml-5",style:{}},Ve={style:{display:"flex",width:"","justify-content":"space-between"},class:"p-0 m-0"},Ke={class:"p-0 m-0",style:{}},$e={class:"p-0 m-0",style:{"text-align":"end"}},Fe=w(()=>e("div",{style:{"background-color":"rgba(0, 0, 0, 0.286)",height:"1px"}},null,-1)),ke={class:"",style:{display:"grid",color:"","margin-top":"0.5rem","grid-template-columns":"auto auto"}},Je=w(()=>e("div",{class:""},[e("span",{style:{"font-weight":"bold"}},[e("b",null,"Subtotal")])],-1)),Ge={class:""},Ze={style:{"text-align":"end","font-weight":"bold",color:"black"}},Xe=w(()=>e("div",{class:""},[e("span",{style:{"font-weight":"bold"}},[e("b",null,"Domicilio")])],-1)),Ye={class:""},Qe={style:{"text-align":"end","font-weight":"bold",color:"black"}},qe=w(()=>e("div",{class:""},[e("span",{style:{"font-weight":"bold",color:"black"}},[e("b",null,"Total")])],-1)),et={class:""},tt={style:{"text-align":"end",color:"black","font-weight":"bold"}},nt=w(()=>e("div",{class:""},null,-1)),ot=w(()=>e("p",{style:{"font-weight":"bold","background-color":"black",color:"white",padding:"0",margin:"0","margin-top":"0.5rem"}},[e("b",null,"Notas")],-1)),rt={class:"notas",style:{border:"1px solid",margin:"0",color:"black",padding:"0.5rem"}},lt=w(()=>e("p",{style:{"background-color":"black","font-weight":"bold","margin-top":"1rem",color:"white"}},[e("b",null,"cliente")],-1)),it={style:{display:"grid","grid-template-columns":"auto auto"}},st=w(()=>e("div",{class:"",style:{}},[e("span",null,[e("b",null,"NOMBRE")])],-1)),at={class:""},dt={style:{"text-align":"end",color:"black"}},ct=w(()=>e("div",{style:{}},[e("span",null,[e("b",null,"telefono")])],-1)),ut={style:{"text-align":"end",color:"black"}},ft=w(()=>e("div",{style:{}},[e("span",null,[e("b",null,"direccion ")])],-1)),pt={style:{"text-align":"end",color:"black"}},mt=w(()=>e("div",null,[e("span",null,[e("b",null,"metodo de pago")])],-1)),bt={style:{"text-align":"end",color:"black"}},yt={class:"col-12 mb-0 pb-0 px-0 m-0",style:{display:"flex","justify-content":"space-between",gap:"1rem"}},ht={class:"mt-3"},gt=w(()=>e("h3",null,[e("b",null,"Cambiar Método de Pago")],-1)),vt=["onSubmit"],_t=w(()=>e("span",{for:"paymentMethod"},"Método de Pago actual",-1)),Et={for:"paymentMethod"},wt=w(()=>e("span",{for:"paymentMethod"},"Nuevo método de Pago",-1)),Ot={__name:"DialogoPedido",setup(M){const S=D(!1),s=ae(),d=i=>{var g,y,O,j;const n=(j=(O=(y=(g=i.latest_status_timestamp)==null?void 0:g.split("T")[1])==null?void 0:y.split(":"))==null?void 0:O.slice(0,2))==null?void 0:j.join(":");switch(i.current_status){case"enviada":return`El pedido fue enviado a su domicilio a las ${n}`;case"cancelada":return`El pedido fue cancelado a las ${n}
Responsable: ${i.responsible}
Razón: ${i.reason}`;case"en preparacion":return`El pedido está en preparación desde las ${n} y será enviado en breve.`;case"generada":return`Hemos recibido su pedido a las ${n} y empezaremos a prepararlo en breve. Gracias por su espera.`;default:return""}},t=async()=>{if(f.value)try{await le.put(`${oe}/change-method/${s.currentOrder.order_id}/${f.value}`,`Cambiando método de pago para la orden ${s.currentOrder.order_id}`),l.value=!1,s.visibles.currentOrder=!1,s.getTodayOrders(),console.log("Método de pago cambiado exitosamente")}catch(i){console.error("Error al cambiar el método de pago:",i)}};D(!1);const l=D(!1),f=D(null),p=D([]);ne(async()=>{try{const i=await le.get(`${oe}/payment_methods`);p.value=i}catch(i){console.error("Error al obtener métodos de pago:",i)}});const E=async()=>{var n;const i={order_id:s.currentOrder.order_id,responsible:(n=m.value.responsible)==null?void 0:n.name,reason:m.value.reason};await N.create_cancellling_request(i),S.value=!1,s.Notification.pause(),s.Notification.currentTime=0},u=re(()=>s.currentOrder.pe_json.listaPedidos.reduce((i,n)=>{let g=n.pedido_cantidad*n.pedido_precio;return i+g},0));re(()=>u.value+s.currentOrder.delivery_price);const c=D(!1),a=()=>{const i=document.getElementById("factura").innerHTML,n=window.open("","_blank");n.document.write("<html><head><title>Factura</title>");const g=document.getElementsByTagName("style");for(let y=0;y<g.length;y++)n.document.write(g[y].outerHTML);n.document.write("<style>  @media print { html{height: min-content;}  *{text-transform:uppercase;align-items:center; width:100%; font-family: sans-serif;padding:0;margin:0; font-size:o.9rem !IMPORTANT} body { padding:0; -webkit-print-color-adjust: exact; /* Chrome, Safari */ color-adjust: exact; /* Firefox */ } }  </style>"),n.document.write("</head><body>"),n.document.write(i),n.document.write("</body></html>"),n.document.close(),n.print(),setTimeout(()=>{n.close()},.01)};ne(async()=>{s.currentOrder.value=s.currentOrder});const r=D(!1),m=D({responsible:null,reason:"Sin razon"}),h=D([{name:"Restaurante",value:"restaurant"},{name:"Cliente",value:"client"}]),o=()=>{m.value.responsible&&N.cancelOrder(s.currentOrder.order_id,m.value.reason,m.value.responsible.name).then(i=>{i&&(r.value=!1,console.log("Order canceled successfully"))}).catch(i=>{console.error("Failed to cancel order:",i)})};return(i,n)=>{const g=z("Dropdown"),y=z("Textarea"),O=z("Button"),j=z("Dialog"),U=z("Tag");return P(),A(V,null,[e("div",null,[x(j,{visible:r.value,"onUpdate:visible":n[2]||(n[2]=v=>r.value=v),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:L(()=>[pe]),default:L(()=>[e("form",{onSubmit:$(o,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[be,x(g,{style:{width:"100%"},id:"responsible",modelValue:m.value.responsible,"onUpdate:modelValue":n[0]||(n[0]=v=>m.value.responsible=v),options:h.value,optionLabel:"name",placeholder:"Selecciona un responsable"},null,8,["modelValue","options"]),ye,x(y,{style:{resize:"none","text-transform":"lowercase",width:"100%"},id:"reason",modelValue:m.value.reason,"onUpdate:modelValue":n[1]||(n[1]=v=>m.value.reason=v),rows:"5",placeholder:"Escribe la razón de la cancelación"},null,8,["modelValue"]),x(O,{style:{width:"100%","border-radius":"0.5rem"},label:"cancelar",type:"submit",class:"p-button-danger"})],40,me)]),_:1},8,["visible"]),x(j,{visible:S.value,"onUpdate:visible":n[5]||(n[5]=v=>S.value=v),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:L(()=>[he]),default:L(()=>[e("form",{onSubmit:$(E,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[ve,_e,x(g,{style:{width:"100%"},id:"responsible",modelValue:m.value.responsible,"onUpdate:modelValue":n[3]||(n[3]=v=>m.value.responsible=v),options:h.value,optionLabel:"name",placeholder:"Selecciona un responsable"},null,8,["modelValue","options"]),Ee,x(y,{style:{resize:"none","text-transform":"lowercase",width:"100%"},id:"reason",modelValue:m.value.reason,"onUpdate:modelValue":n[4]||(n[4]=v=>m.value.reason=v),rows:"5",placeholder:"Escribe la razón de la cancelación"},null,8,["modelValue"]),x(O,{style:{width:"100%","border-radius":"0.5rem"},label:"solicitar cancelacion",type:"submit",class:"p-button-danger"})],40,ge)]),_:1},8,["visible"]),x(j,{closable:!1,style:{width:"30rem"},modal:"",visible:c.value,"onUpdate:visible":n[8]||(n[8]=v=>c.value=v)},{footer:L(()=>[e("div",Oe,[x(O,{text:"",size:"small",onClick:n[6]||(n[6]=()=>{b(N).deliveryZero(b(s).currentOrder.order_id),c.value=!1}),style:{"border-radius":"0.3rem",width:"100%"},severity:"danger",label:"si"}),x(O,{onClick:n[7]||(n[7]=v=>c.value=!1),size:"small",style:{"border-radius":"0.3rem",width:"100%"},severity:"danger",label:"no"})])]),default:L(()=>[e("span",we,[T(" Esta seguro de llevar a $0.00 el valor del domicilio para la orden "),e("b",null,_(b(s).currentOrder.order_id),1),T(" del cliente "),e("b",null,_(b(s).currentOrder.user_name),1),T("? ")])]),_:1},8,["visible"]),x(j,{class:"mx-3",closeOnEscape:"",closable:!1,visible:b(s).visibles.currentOrder,"onUpdate:visible":n[14]||(n[14]=v=>b(s).visibles.currentOrder=v),modal:"",style:{"max-height":"95vh",width:"35rem",position:"relative"}},{footer:L(()=>[e("div",yt,[b(s).currentOrder.current_status=="generada"?(P(),H(O,{key:0,size:"small",onClick:n[9]||(n[9]=v=>b(N).prepareOrder(b(s).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"Preparar"})):B("",!0),b(s).currentOrder.current_status=="en preparacion"?(P(),H(O,{key:1,size:"small",onClick:n[10]||(n[10]=v=>b(N).sendOrder(b(s).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"enviar"})):B("",!0),x(O,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:a,severity:"warning",label:"imprimir"}),x(O,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:n[11]||(n[11]=v=>S.value=!0),severity:"danger",label:"CANCELAR "})]),e("div",ht,[x(O,{onClick:n[12]||(n[12]=v=>l.value=!0),label:"Cambiar metodo de pago",severity:"success"})])]),default:L(()=>{var v,k,J,G,Z,X,Y,Q,q,ee;return[e("div",xe,[e("div",null,[e("p",{class:de(`estado ${(k=(v=b(s).currentOrder)==null?void 0:v.current_status)==null?void 0:k.split(" ")[0]}`)},_(d(b(s).currentOrder)),3)])]),e("div",je,[b(s).currentOrder.responsible_id?(P(),H(U,{key:0,style:{},class:"tag mb-2",severity:"success"},{default:L(()=>[Me,T(" TRANSFERENCIA APROBADA")]),_:1})):B("",!0),T(),Se,b(s).currentOrder.responsible_id?(P(),H(U,{key:1,class:"tag",severity:"success"},{default:L(()=>[T(_(b(s).currentOrder.name),1)]),_:1})):B("",!0),e("div",Pe,[e("p",Ce," ID:"+_(b(s).currentOrder.order_id),1),e("p",Le,_(b(s).currentOrder.user_name),1),e("p",Te,[e("b",null," fecha: "+_((J=b(s).currentOrder.latest_status_timestamp)==null?void 0:J.split("T")[0]),1),e("b",null," Hora: "+_((Y=(X=(Z=(G=b(s).currentOrder.latest_status_timestamp)==null?void 0:G.split("T")[1])==null?void 0:Z.split(":"))==null?void 0:X.slice(0,2))==null?void 0:Y.join(":")),1)]),Ae,(P(!0),A(V,null,F((ee=(q=(Q=b(s))==null?void 0:Q.currentOrder)==null?void 0:q.pe_json)==null?void 0:ee.listaPedidos,C=>{var te;return P(),A("div",null,[e("div",De,[e("p",Ie,[T(" ( "+_(C.pedido_cantidad)+" ) "+_(C.pedido_nombre_producto)+" ",1),Be]),e("div",null,[C.pedido_base_price?(P(),A("p",Re,_(b(R)(C.pedido_base_price*C.pedido_cantidad)),1)):(P(),A("p",Ue,_(b(R)(C.pedido_precio)),1))])]),((te=C.lista_productocombo)==null?void 0:te.length)>0?(P(),A("p",ze,We)):B("",!0),C.lista_productocombo?(P(!0),A(V,{key:1},F(C.lista_productocombo,I=>(P(),A("p",He,[T(" -- "),e("b",null,_(I.pedido_cantidad),1),T(" "+_(I.pedido_nombre),1)]))),256)):B("",!0),(P(!0),A(V,null,F(C.modificadorseleccionList,I=>(P(),A("div",Ve,[e("p",Ke,[T(" - ( "+_(C.pedido_cantidad)+" ) ",1),e("b",null,_(I.modificadorseleccion_cantidad),1),T(" "+_(I.modificadorseleccion_nombre),1)]),e("p",$e,_(b(R)(I.pedido_precio*I.modificadorseleccion_cantidad*C.pedido_cantidad)),1)]))),256)),Fe])}),256)),e("div",ke,[Je,e("div",Ge,[e("p",Ze,[e("b",null,_(b(R)(b(s).currentOrder.pe_json.delivery.delivery_pagocon-b(s).currentOrder.delivery_price)),1)])]),Xe,e("div",Ye,[e("p",Qe,[e("b",null,_(b(R)(b(s).currentOrder.delivery_price)),1)])]),qe,e("div",et,[e("p",tt,[e("b",null,_(b(R)(b(s).currentOrder.pe_json.delivery.delivery_pagocon)),1)])]),nt]),ot,e("p",rt,_(b(s).currentOrder.order_notes),1),lt,e("div",it,[st,e("div",at,[e("p",dt,_(b(s).currentOrder.user_name),1)]),ct,e("div",null,[e("p",ut,_(b(s).currentOrder.user_phone),1)]),ft,e("div",null,[e("p",pt,_(b(s).currentOrder.user_address),1)]),mt,e("div",null,[e("p",bt,_(b(s).currentOrder.payment_method),1)])])])]),x(O,{class:"shadow-4",onClick:n[13]||(n[13]=C=>b(s).setVisible("currentOrder",!1)),icon:"pi pi-times",rounded:"",severity:"danger",style:{position:"absolute",top:"-1rem","border-radius":"50%",right:"-1rem"}})]}),_:1},8,["visible"])]),x(j,{visible:l.value,"onUpdate:visible":n[16]||(n[16]=v=>l.value=v),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:L(()=>[gt]),default:L(()=>[e("form",{onSubmit:$(t,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[_t,x(U,{class:"px-4",severity:"warning"},{default:L(()=>[e("span",Et,[e("b",null,_(b(s).currentOrder.payment_method),1)])]),_:1}),wt,x(g,{style:{width:"100%"},id:"paymentMethod",modelValue:f.value,"onUpdate:modelValue":n[15]||(n[15]=v=>f.value=v),options:p.value,optionLabel:"name",optionValue:"id",placeholder:"Selecciona un método de pago",required:""},null,8,["modelValue","options"]),x(O,{style:{width:"100%","border-radius":"0.5rem"},label:"Cambiar",type:"submit",class:"p-button-help"})],40,vt)]),_:1},8,["visible"])],64)}}},St=se(Ot,[["__scopeId","data-v-48a10fe7"]]);export{St as D};
