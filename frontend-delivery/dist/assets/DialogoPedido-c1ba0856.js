import{C as ae,D as H,_ as de,k as I,u as ce,f as k,g as le,U as ie,r as z,o as C,c as D,b as t,a as x,p as T,E as J,d as b,G as W,h as A,t as E,x as V,y as U,n as ue,F as K,i as Z,s as fe,v as pe}from"./index-df1f671e.js";import{f as N}from"./formatoPesos-2a38d2e7.js";import{u as $}from"./reportes-d8b241e8.js";const se={router:ae,async get(S,P,i={}){const a=$();try{P?a.setLoading(!0,P):a.setLoading(!0,"cargando");const n={headers:i.headers||{}},l=await H.get(S,n);return l.status===200?(a.setLoading(!1),l.data):(a.setLoading(!1),console.error("An error occurred while fetching data:",l.status),null)}catch(n){return a.setLoading(!1),console.error("An error occurred while fetching data:",n),null}},async post(S,P,i,a=null){const n=$();try{n.setLoading(!0,i);const l=await H.post(S,P);return l.status===200||l.status===201?(n.setLoading(!1),a&&this.router.push(a),l.data):(n.setLoading(!1),console.error("An error occurred while posting data:",l.status),null)}catch(l){return n.setLoading(!1),console.error("An error occurred while posting data:",l),null}},async put(S,P,i,a=null){const n=$();try{n.setLoading(!0,i);const l=await H.put(S,P);return l.status===200||l.status===204?(n.setLoading(!1),a&&this.router.push(a),l.data):(n.setLoading(!1),console.error("An error occurred while updating data:",l.status),null)}catch(l){return n.setLoading(!1),console.error("An error occurred while updating data:",l),null}},async delete(S,P,i=null){const a=$();try{a.setLoading(!0,P);const n=await H.delete(S);return n.status===200||n.status===204?(a.setLoading(!1),i&&this.router.push(i),n.data):(a.setLoading(!1),console.error("An error occurred while deleting data:",n.status),null)}catch(n){return a.setLoading(!1),console.error("An error occurred while deleting data:",n),null}}};var me={exports:{}};(function(S,P){(function(a,n){S.exports=n()})(window,function(){return function(i){var a={};function n(l){if(a[l])return a[l].exports;var p=a[l]={i:l,l:!1,exports:{}};return i[l].call(p.exports,p,p.exports,n),p.l=!0,p.exports}return n.m=i,n.c=a,n.d=function(l,p,u){n.o(l,p)||Object.defineProperty(l,p,{enumerable:!0,get:u})},n.r=function(l){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},n.t=function(l,p){if(p&1&&(l=n(l)),p&8||p&4&&typeof l=="object"&&l&&l.__esModule)return l;var u=Object.create(null);if(n.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:l}),p&2&&typeof l!="string")for(var v in l)n.d(u,v,(function(d){return l[d]}).bind(null,v));return u},n.n=function(l){var p=l&&l.__esModule?function(){return l.default}:function(){return l};return n.d(p,"a",p),p},n.o=function(l,p){return Object.prototype.hasOwnProperty.call(l,p)},n.p="",n(n.s=0)}({"./src/index.js":function(i,a,n){n.r(a),n("./src/sass/index.scss");var l=n("./src/js/init.js"),p=l.default.init;typeof window<"u"&&(window.printJS=p),a.default=p},"./src/js/browser.js":function(i,a,n){n.r(a);var l={isFirefox:function(){return typeof InstallTrigger<"u"},isIE:function(){return navigator.userAgent.indexOf("MSIE")!==-1||!!document.documentMode},isEdge:function(){return!l.isIE()&&!!window.StyleMedia},isChrome:function(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window;return!!u.chrome},isSafari:function(){return Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||navigator.userAgent.toLowerCase().indexOf("safari")!==-1},isIOSChrome:function(){return navigator.userAgent.toLowerCase().indexOf("crios")!==-1}};a.default=l},"./src/js/functions.js":function(i,a,n){n.r(a),n.d(a,"addWrapper",function(){return v}),n.d(a,"capitalizePrint",function(){return d}),n.d(a,"collectStyles",function(){return c}),n.d(a,"addHeader",function(){return o}),n.d(a,"cleanUp",function(){return h}),n.d(a,"isRawHTML",function(){return g});var l=n("./src/js/modal.js"),p=n("./src/js/browser.js");function u(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(y){return typeof y}:u=function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},u(e)}function v(e,f){var y="font-family:"+f.font+" !important; font-size: "+f.font_size+" !important; width:100%;";return'<div style="'+y+'">'+e+"</div>"}function d(e){return e.charAt(0).toUpperCase()+e.slice(1)}function c(e,f){for(var y=document.defaultView||window,m="",r=y.getComputedStyle(e,""),O=0;O<r.length;O++)(f.targetStyles.indexOf("*")!==-1||f.targetStyle.indexOf(r[O])!==-1||s(f.targetStyles,r[O]))&&r.getPropertyValue(r[O])&&(m+=r[O]+":"+r.getPropertyValue(r[O])+";");return m+="max-width: "+f.maxWidth+"px !important; font-size: "+f.font_size+" !important;",m}function s(e,f){for(var y=0;y<e.length;y++)if(u(f)==="object"&&f.indexOf(e[y])!==-1)return!0;return!1}function o(e,f){var y=document.createElement("div");if(g(f.header))y.innerHTML=f.header;else{var m=document.createElement("h1"),r=document.createTextNode(f.header);m.appendChild(r),m.setAttribute("style",f.headerStyle),y.appendChild(m)}e.insertBefore(y,e.childNodes[0])}function h(e){e.showModal&&l.default.close(),e.onLoadingEnd&&e.onLoadingEnd(),(e.showModal||e.onLoadingStart)&&window.URL.revokeObjectURL(e.printable);var f="mouseover";(p.default.isChrome()||p.default.isFirefox())&&(f="focus");var y=function m(){window.removeEventListener(f,m),e.onPrintDialogClose();var r=document.getElementById(e.frameId);r&&r.remove()};window.addEventListener(f,y)}function g(e){var f=new RegExp("<([A-Za-z][A-Za-z0-9]*)\\b[^>]*>(.*?)</\\1>");return f.test(e)}},"./src/js/html.js":function(i,a,n){n.r(a);var l=n("./src/js/functions.js"),p=n("./src/js/print.js");function u(c){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(o){return typeof o}:u=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},u(c)}a.default={print:function(s,o){var h=d(s.printable)?s.printable:document.getElementById(s.printable);if(!h){window.console.error("Invalid HTML element id: "+s.printable);return}s.printableElement=v(h,s),s.header&&Object(l.addHeader)(s.printableElement,s),p.default.send(s,o)}};function v(c,s){for(var o=c.cloneNode(),h=Array.prototype.slice.call(c.childNodes),g=0;g<h.length;g++)if(s.ignoreElements.indexOf(h[g].id)===-1){var e=v(h[g],s);o.appendChild(e)}switch(s.scanStyles&&c.nodeType===1&&o.setAttribute("style",Object(l.collectStyles)(c,s)),c.tagName){case"SELECT":o.value=c.value;break;case"CANVAS":o.getContext("2d").drawImage(c,0,0);break}return o}function d(c){return u(c)==="object"&&c&&(c instanceof HTMLElement||c.nodeType===1)}},"./src/js/image.js":function(i,a,n){n.r(a);var l=n("./src/js/functions.js"),p=n("./src/js/print.js"),u=n("./src/js/browser.js");a.default={print:function(d,c){d.printable.constructor!==Array&&(d.printable=[d.printable]),d.printableElement=document.createElement("div"),d.printable.forEach(function(s){var o=document.createElement("img");if(o.setAttribute("style",d.imageStyle),o.src=s,u.default.isFirefox()){var h=o.src;o.src=h}var g=document.createElement("div");g.appendChild(o),d.printableElement.appendChild(g)}),d.header&&Object(l.addHeader)(d.printableElement,d),p.default.send(d,c)}}},"./src/js/init.js":function(i,a,n){n.r(a);var l=n("./src/js/browser.js"),p=n("./src/js/modal.js"),u=n("./src/js/pdf.js"),v=n("./src/js/html.js"),d=n("./src/js/raw-html.js"),c=n("./src/js/image.js"),s=n("./src/js/json.js");function o(g){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?o=function(f){return typeof f}:o=function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},o(g)}var h=["pdf","html","image","json","raw-html"];a.default={init:function(){var e={printable:null,fallbackPrintable:null,type:"pdf",header:null,headerStyle:"font-weight: 300;",maxWidth:800,properties:null,gridHeaderStyle:"font-weight: bold; padding: 5px; border: 1px solid #dddddd;",gridStyle:"border: 1px solid lightgray; margin-bottom: -1px;",showModal:!1,onError:function(M){throw M},onLoadingStart:null,onLoadingEnd:null,onPrintDialogClose:function(){},onIncompatibleBrowser:function(){},modalMessage:"Retrieving Document...",frameId:"printJS",printableElement:null,documentTitle:"Document",targetStyle:["clear","display","width","min-width","height","min-height","max-height"],targetStyles:["border","box","break","text-decoration"],ignoreElements:[],repeatTableHeader:!0,css:null,style:null,scanStyles:!0,base64:!1,onPdfOpen:null,font:"TimesNewRoman",font_size:"12pt",honorMarginPadding:!0,honorColor:!1,imageStyle:"max-width: 100%;"},f=arguments[0];if(f===void 0)throw new Error("printJS expects at least 1 attribute.");switch(o(f)){case"string":e.printable=encodeURI(f),e.fallbackPrintable=e.printable,e.type=arguments[1]||e.type;break;case"object":e.printable=f.printable,e.fallbackPrintable=typeof f.fallbackPrintable<"u"?f.fallbackPrintable:e.printable,e.fallbackPrintable=e.base64?"data:application/pdf;base64,".concat(e.fallbackPrintable):e.fallbackPrintable;for(var y in e)y==="printable"||y==="fallbackPrintable"||(e[y]=typeof f[y]<"u"?f[y]:e[y]);break;default:throw new Error('Unexpected argument type! Expected "string" or "object", got '+o(f))}if(!e.printable)throw new Error("Missing printable information.");if(!e.type||typeof e.type!="string"||h.indexOf(e.type.toLowerCase())===-1)throw new Error("Invalid print type. Available types are: pdf, html, image and json.");e.showModal&&p.default.show(e),e.onLoadingStart&&e.onLoadingStart();var m=document.getElementById(e.frameId);m&&m.parentNode.removeChild(m);var r=document.createElement("iframe");switch(l.default.isFirefox()?r.setAttribute("style","width: 1px; height: 100px; position: fixed; left: 0; top: 0; opacity: 0; border-width: 0; margin: 0; padding: 0"):r.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute; border: 0"),r.setAttribute("id",e.frameId),e.type!=="pdf"&&(r.srcdoc="<html><head><title>"+e.documentTitle+"</title>",e.css&&(Array.isArray(e.css)||(e.css=[e.css]),e.css.forEach(function(j){r.srcdoc+='<link rel="stylesheet" href="'+j+'">'})),r.srcdoc+="</head><body></body></html>"),e.type){case"pdf":if(l.default.isIE())try{console.info("Print.js doesn't support PDF printing in Internet Explorer.");var O=window.open(e.fallbackPrintable,"_blank");O.focus(),e.onIncompatibleBrowser()}catch(j){e.onError(j)}finally{e.showModal&&p.default.close(),e.onLoadingEnd&&e.onLoadingEnd()}else u.default.print(e,r);break;case"image":c.default.print(e,r);break;case"html":v.default.print(e,r);break;case"raw-html":d.default.print(e,r);break;case"json":s.default.print(e,r);break}}}},"./src/js/json.js":function(i,a,n){n.r(a);var l=n("./src/js/functions.js"),p=n("./src/js/print.js");function u(d){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(s){return typeof s}:u=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},u(d)}a.default={print:function(c,s){if(u(c.printable)!=="object")throw new Error("Invalid javascript data object (JSON).");if(typeof c.repeatTableHeader!="boolean")throw new Error("Invalid value for repeatTableHeader attribute (JSON).");if(!c.properties||!Array.isArray(c.properties))throw new Error("Invalid properties array for your JSON data.");c.properties=c.properties.map(function(o){return{field:u(o)==="object"?o.field:o,displayName:u(o)==="object"?o.displayName:o,columnSize:u(o)==="object"&&o.columnSize?o.columnSize+";":100/c.properties.length+"%;"}}),c.printableElement=document.createElement("div"),c.header&&Object(l.addHeader)(c.printableElement,c),c.printableElement.innerHTML+=v(c),p.default.send(c,s)}};function v(d){var c=d.printable,s=d.properties,o='<table style="border-collapse: collapse; width: 100%;">';d.repeatTableHeader&&(o+="<thead>"),o+="<tr>";for(var h=0;h<s.length;h++)o+='<th style="width:'+s[h].columnSize+";"+d.gridHeaderStyle+'">'+Object(l.capitalizePrint)(s[h].displayName)+"</th>";o+="</tr>",d.repeatTableHeader&&(o+="</thead>"),o+="<tbody>";for(var g=0;g<c.length;g++){o+="<tr>";for(var e=0;e<s.length;e++){var f=c[g],y=s[e].field.split(".");if(y.length>1)for(var m=0;m<y.length;m++)f=f[y[m]];else f=f[s[e].field];o+='<td style="width:'+s[e].columnSize+d.gridStyle+'">'+f+"</td>"}o+="</tr>"}return o+="</tbody></table>",o}},"./src/js/modal.js":function(i,a,n){n.r(a);var l={show:function(u){var v="font-family:sans-serif; display:table; text-align:center; font-weight:300; font-size:30px; left:0; top:0;position:fixed; z-index: 9990;color: #0460B5; width: 100%; height: 100%; background-color:rgba(255,255,255,.9);transition: opacity .3s ease;",d=document.createElement("div");d.setAttribute("style",v),d.setAttribute("id","printJS-Modal");var c=document.createElement("div");c.setAttribute("style","display:table-cell; vertical-align:middle; padding-bottom:100px;");var s=document.createElement("div");s.setAttribute("class","printClose"),s.setAttribute("id","printClose"),c.appendChild(s);var o=document.createElement("span");o.setAttribute("class","printSpinner"),c.appendChild(o);var h=document.createTextNode(u.modalMessage);c.appendChild(h),d.appendChild(c),document.getElementsByTagName("body")[0].appendChild(d),document.getElementById("printClose").addEventListener("click",function(){l.close()})},close:function(){var u=document.getElementById("printJS-Modal");u&&u.parentNode.removeChild(u)}};a.default=l},"./src/js/pdf.js":function(i,a,n){n.r(a);var l=n("./src/js/print.js"),p=n("./src/js/functions.js");a.default={print:function(d,c){if(d.base64){var s=Uint8Array.from(atob(d.printable),function(h){return h.charCodeAt(0)});u(d,c,s);return}d.printable=/^(blob|http|\/\/)/i.test(d.printable)?d.printable:window.location.origin+(d.printable.charAt(0)!=="/"?"/"+d.printable:d.printable);var o=new window.XMLHttpRequest;o.responseType="arraybuffer",o.addEventListener("error",function(){Object(p.cleanUp)(d),d.onError(o.statusText,o)}),o.addEventListener("load",function(){if([200,201].indexOf(o.status)===-1){Object(p.cleanUp)(d),d.onError(o.statusText,o);return}u(d,c,o.response)}),o.open("GET",d.printable,!0),o.send()}};function u(v,d,c){var s=new window.Blob([c],{type:"application/pdf"});s=window.URL.createObjectURL(s),d.setAttribute("src",s),l.default.send(v,d)}},"./src/js/print.js":function(i,a,n){n.r(a);var l=n("./src/js/browser.js"),p=n("./src/js/functions.js"),u={send:function(o,h){document.getElementsByTagName("body")[0].appendChild(h);var g=document.getElementById(o.frameId);g.onload=function(){if(o.type==="pdf"){l.default.isFirefox()?setTimeout(function(){return v(g,o)},1e3):v(g,o);return}var e=g.contentWindow||g.contentDocument;if(e.document&&(e=e.document),e.body.appendChild(o.printableElement),o.type!=="pdf"&&o.style){var f=document.createElement("style");f.innerHTML=o.style,e.head.appendChild(f)}var y=e.getElementsByTagName("img");y.length>0?d(Array.from(y)).then(function(){return v(g,o)}):v(g,o)}}};function v(s,o){try{if(s.focus(),l.default.isEdge()||l.default.isIE())try{s.contentWindow.document.execCommand("print",!1,null)}catch{s.contentWindow.print()}else s.contentWindow.print()}catch(h){o.onError(h)}finally{l.default.isFirefox()&&(s.style.visibility="hidden",s.style.left="-1px"),Object(p.cleanUp)(o)}}function d(s){var o=s.map(function(h){if(h.src&&h.src!==window.location.href)return c(h)});return Promise.all(o)}function c(s){return new Promise(function(o){var h=function g(){!s||typeof s.naturalWidth>"u"||s.naturalWidth===0||!s.complete?setTimeout(g,500):o()};h()})}a.default=u},"./src/js/raw-html.js":function(i,a,n){n.r(a);var l=n("./src/js/print.js");a.default={print:function(u,v){u.printableElement=document.createElement("div"),u.printableElement.setAttribute("style","width:100%"),u.printableElement.innerHTML=u.printable,l.default.send(u,v)}}},"./src/sass/index.scss":function(i,a,n){},0:function(i,a,n){i.exports=n("./src/index.js")}}).default})})(me);const w=S=>(fe("data-v-42b7f4e4"),S=S(),pe(),S),be=w(()=>t("h3",null,[t("b",null,"Cancelar Orden")],-1)),ye=["onSubmit"],he=w(()=>t("span",{for:"responsible"},"Responsable",-1)),ge=w(()=>t("span",{for:"reason"},"Razón",-1)),ve=w(()=>t("h3",null,[t("b",null,"Cancelar Orden")],-1)),_e=["onSubmit"],Ee=w(()=>t("span",{class:"advert",style:{"text-transform":"lowercase",color:"red","font-weight":"bold"}}," Desde el 16 de mayo de 2024, la cancelación de órdenes requerirá autorización.",-1)),we=w(()=>t("span",{for:"responsible"},"Responsable",-1)),Oe=w(()=>t("span",{for:"reason"},"Razón",-1)),xe={style:{"text-transform":"capitalize"}},je={class:"col-12 mb-0 pb-0 px-0 m-0",style:{display:"flex","justify-content":"space-between",gap:"1rem"}},Me={class:""},Se={id:"factura",style:{width:"100%"}},Pe=w(()=>t("i",{class:"pi pi-whatsapp mr-2"},null,-1)),Ce=w(()=>t("br",null,null,-1)),Le={class:"",style:{width:"auto"}},Te={class:"",id:"id",style:{"font-weight":"bold","min-width":"100%",width:"max-content","text-align":"center",color:"black",margin:"0rem"}},Ae={class:"",id:"id",style:{"font-weight":"bold","min-width":"100%",width:"max-content","text-align":"center",color:"black",margin:"0rem"}},De={style:{padding:"0",color:"black","text-align":"center",margin:"auto","margin-bottom":"1rem",width:"max-content","min-width":"max-content",display:"flex","justify-content":"center","flex-direction":"column"}},Ie=w(()=>t("div",{class:"",style:{"font-weight":"bold",color:"white",margin:"0","background-color":"black","align-items":"center",display:"grid","grid-template-columns":"auto auto"}},[t("div",{style:{width:"100%"}},[t("b",null," productos")]),t("div",null,[t("p",{style:{"text-align":"end","font-weight":"bold"}},[t("b",null," total ")])])],-1)),Be={style:{display:"grid","grid-template-columns":"auto auto"}},Re={class:"p-0 m-0"},Ue=w(()=>t("br",null,null,-1)),Ne={key:0,style:{"text-align":"end",color:"black"}},ze={key:1,style:{"text-align":"end",color:"black"}},We={key:0,class:"p-0 m-0"},He=w(()=>t("b",null,"COMBO INCLUYE",-1)),Ve=[He],Ke={class:"p-0 m-0 ml-5",style:{}},$e={style:{display:"flex",width:"","justify-content":"space-between"},class:"p-0 m-0"},Fe={class:"p-0 m-0",style:{}},ke={class:"p-0 m-0",style:{"text-align":"end"}},Je=w(()=>t("div",{style:{"background-color":"rgba(0, 0, 0, 0.286)",height:"1px"}},null,-1)),Ze={class:"",style:{display:"grid",color:"","margin-top":"0.5rem","grid-template-columns":"auto auto"}},Ge=w(()=>t("div",{class:""},[t("span",{style:{"font-weight":"bold"}},[t("b",null,"Subtotal")])],-1)),Xe={class:""},Ye={style:{"text-align":"end","font-weight":"bold",color:"black"}},Qe=w(()=>t("div",{class:""},[t("span",{style:{"font-weight":"bold"}},[t("b",null,"Domicilio")])],-1)),qe={class:""},et={style:{"text-align":"end","font-weight":"bold",color:"black"}},tt=w(()=>t("div",{class:""},[t("span",{style:{"font-weight":"bold",color:"black"}},[t("b",null,"Total")])],-1)),nt={class:""},ot={style:{"text-align":"end",color:"black","font-weight":"bold"}},rt=w(()=>t("div",{class:""},null,-1)),lt=w(()=>t("p",{style:{"font-weight":"bold","background-color":"black",color:"white",padding:"0",margin:"0","margin-top":"0.5rem"}},[t("b",null,"Notas")],-1)),it=["innerHTML"],st=w(()=>t("p",{style:{"background-color":"black","font-weight":"bold","margin-top":"1rem",color:"white"}},[t("b",null,"cliente")],-1)),at={style:{display:"grid","grid-template-columns":"auto auto"}},dt=w(()=>t("div",{class:"",style:{}},[t("span",null,[t("b",null,"NOMBRE")])],-1)),ct={class:""},ut={style:{"text-align":"end",color:"black"}},ft=w(()=>t("div",{style:{}},[t("span",null,[t("b",null,"telefono")])],-1)),pt={style:{"text-align":"end",color:"black"}},mt=w(()=>t("div",{style:{}},[t("span",null,[t("b",null,"direccion ")])],-1)),bt={style:{"text-align":"end",color:"black"}},yt=w(()=>t("div",null,[t("span",null,[t("b",null,"metodo de pago")])],-1)),ht={style:{"text-align":"end",color:"black"}},gt={class:"col-12 mb-0 pb-0 px-0 m-0",style:{display:"flex","justify-content":"space-between",gap:"1rem"}},vt={class:"mt-3"},_t=w(()=>t("h3",null,[t("b",null,"Cambiar Método de Pago")],-1)),Et=["onSubmit"],wt=w(()=>t("span",{for:"paymentMethod"},"Método de Pago actual",-1)),Ot={for:"paymentMethod"},xt=w(()=>t("span",{for:"paymentMethod"},"Nuevo método de Pago",-1)),jt={__name:"DialogoPedido",setup(S){const P=I(!1),i=ce();function a(m){if(!m)return"";let r=m.replace(/\n/g,"<br>");return r=r.replace(/\b([A-Za-z]{3}-\d{3})\b/g,O=>`<strong style="text-transform:uppercase">${O.toUpperCase()}</strong>`),r}const n=k(()=>a(i.currentOrder.order_notes)),l=m=>{var O,j,M,B;const r=(B=(M=(j=(O=m.latest_status_timestamp)==null?void 0:O.split("T")[1])==null?void 0:j.split(":"))==null?void 0:M.slice(0,2))==null?void 0:B.join(":");switch(m.current_status){case"enviada":return`El pedido fue enviado a su domicilio a las ${r}`;case"cancelada":return`El pedido fue cancelado a las ${r}
Responsable: ${m.responsible}
Razón: ${m.reason}`;case"en preparacion":return`El pedido está en preparación desde las ${r} y será enviado en breve.`;case"generada":return`Hemos recibido su pedido a las ${r} y empezaremos a prepararlo en breve. Gracias por su espera.`;default:return""}},p=async()=>{if(v.value)try{await se.put(`${ie}/change-method/${i.currentOrder.order_id}/${v.value}`,`Cambiando método de pago para la orden ${i.currentOrder.order_id}`),u.value=!1,i.visibles.currentOrder=!1,i.getTodayOrders(),console.log("Método de pago cambiado exitosamente")}catch(m){console.error("Error al cambiar el método de pago:",m)}};I(!1);const u=I(!1),v=I(null),d=I([]);le(async()=>{try{const m=await se.get(`${ie}/payment_methods`);d.value=m}catch(m){console.error("Error al obtener métodos de pago:",m)}});const c=async()=>{var r;const m={order_id:i.currentOrder.order_id,responsible:(r=e.value.responsible)==null?void 0:r.name,reason:e.value.reason};await W.create_cancellling_request(m),P.value=!1,i.Notification.pause(),i.Notification.currentTime=0},s=k(()=>i.currentOrder.pe_json.listaPedidos.reduce((m,r)=>{let O=r.pedido_cantidad*r.pedido_precio;return m+O},0));k(()=>s.value+i.currentOrder.delivery_price);const o=I(!1),h=()=>{const m=document.getElementById("factura").innerHTML,r=window.open("","_blank");r.document.write("<html><head><title>Factura</title>");const O=document.getElementsByTagName("style");for(let j=0;j<O.length;j++)r.document.write(O[j].outerHTML);r.document.write("<style>  @media print { html{height: min-content;}  *{text-transform:uppercase;align-items:center; width:100%; font-family: sans-serif;padding:0;margin:0; font-size:o.9rem !IMPORTANT} body { padding:0; -webkit-print-color-adjust: exact; /* Chrome, Safari */ color-adjust: exact; /* Firefox */ } }  </style>"),r.document.write("</head><body>"),r.document.write(m),r.document.write("</body></html>"),r.document.close(),r.print(),setTimeout(()=>{r.close()},.01)};le(async()=>{i.currentOrder.value=i.currentOrder});const g=I(!1),e=I({responsible:null,reason:"Sin razon"}),f=I([{name:"Restaurante",value:"restaurant"},{name:"Cliente",value:"client"}]),y=()=>{e.value.responsible&&W.cancelOrder(i.currentOrder.order_id,e.value.reason,e.value.responsible.name).then(m=>{m&&(g.value=!1,console.log("Order canceled successfully"))}).catch(m=>{console.error("Failed to cancel order:",m)})};return(m,r)=>{const O=z("Dropdown"),j=z("Textarea"),M=z("Button"),B=z("Dialog"),F=z("Tag");return C(),D(K,null,[t("div",null,[x(B,{visible:g.value,"onUpdate:visible":r[2]||(r[2]=_=>g.value=_),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:T(()=>[be]),default:T(()=>[t("form",{onSubmit:J(y,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[he,x(O,{style:{width:"100%"},id:"responsible",modelValue:e.value.responsible,"onUpdate:modelValue":r[0]||(r[0]=_=>e.value.responsible=_),options:f.value,optionLabel:"name",placeholder:"Selecciona un responsable"},null,8,["modelValue","options"]),ge,x(j,{style:{resize:"none","text-transform":"lowercase",width:"100%"},id:"reason",modelValue:e.value.reason,"onUpdate:modelValue":r[1]||(r[1]=_=>e.value.reason=_),rows:"5",placeholder:"Escribe la razón de la cancelación"},null,8,["modelValue"]),x(M,{style:{width:"100%","border-radius":"0.5rem"},label:"cancelar",type:"submit",class:"p-button-danger"})],40,ye)]),_:1},8,["visible"]),x(B,{visible:P.value,"onUpdate:visible":r[5]||(r[5]=_=>P.value=_),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:T(()=>[ve]),default:T(()=>[t("form",{onSubmit:J(c,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[Ee,we,x(O,{style:{width:"100%"},id:"responsible",modelValue:e.value.responsible,"onUpdate:modelValue":r[3]||(r[3]=_=>e.value.responsible=_),options:f.value,optionLabel:"name",placeholder:"Selecciona un responsable"},null,8,["modelValue","options"]),Oe,x(j,{style:{resize:"none","text-transform":"lowercase",width:"100%"},id:"reason",modelValue:e.value.reason,"onUpdate:modelValue":r[4]||(r[4]=_=>e.value.reason=_),rows:"5",placeholder:"Escribe la razón de la cancelación"},null,8,["modelValue"]),x(M,{style:{width:"100%","border-radius":"0.5rem"},label:"solicitar cancelacion",type:"submit",class:"p-button-danger"})],40,_e)]),_:1},8,["visible"]),x(B,{closable:!1,style:{width:"30rem"},modal:"",visible:o.value,"onUpdate:visible":r[8]||(r[8]=_=>o.value=_)},{footer:T(()=>[t("div",je,[x(M,{text:"",size:"small",onClick:r[6]||(r[6]=()=>{b(W).deliveryZero(b(i).currentOrder.order_id),o.value=!1}),style:{"border-radius":"0.3rem",width:"100%"},severity:"danger",label:"si"}),x(M,{onClick:r[7]||(r[7]=_=>o.value=!1),size:"small",style:{"border-radius":"0.3rem",width:"100%"},severity:"danger",label:"no"})])]),default:T(()=>[t("span",xe,[A(" Esta seguro de llevar a $0.00 el valor del domicilio para la orden "),t("b",null,E(b(i).currentOrder.order_id),1),A(" del cliente "),t("b",null,E(b(i).currentOrder.user_name),1),A("? ")])]),_:1},8,["visible"]),x(B,{class:"mx-3",closeOnEscape:"",closable:!1,visible:b(i).visibles.currentOrder,"onUpdate:visible":r[14]||(r[14]=_=>b(i).visibles.currentOrder=_),modal:"",style:{"max-height":"95vh",width:"35rem",position:"relative"}},{footer:T(()=>[t("div",gt,[b(i).currentOrder.current_status=="generada"?(C(),V(M,{key:0,size:"small",onClick:r[9]||(r[9]=_=>b(W).prepareOrder(b(i).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"Preparar"})):U("",!0),b(i).currentOrder.current_status=="en preparacion"?(C(),V(M,{key:1,size:"small",onClick:r[10]||(r[10]=_=>b(W).sendOrder(b(i).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"enviar"})):U("",!0),x(M,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:h,severity:"warning",label:"imprimir"}),x(M,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:r[11]||(r[11]=_=>P.value=!0),severity:"danger",label:"CANCELAR "})]),t("div",vt,[x(M,{onClick:r[12]||(r[12]=_=>u.value=!0),label:"Cambiar metodo de pago",severity:"success"})])]),default:T(()=>{var _,G,X,Y,Q,q,ee,te,ne,oe;return[t("div",Me,[t("div",null,[t("p",{class:ue(`estado ${(G=(_=b(i).currentOrder)==null?void 0:_.current_status)==null?void 0:G.split(" ")[0]}`)},E(l(b(i).currentOrder)),3)])]),t("div",Se,[b(i).currentOrder.responsible_id?(C(),V(F,{key:0,style:{},class:"tag mb-2",severity:"success"},{default:T(()=>[Pe,A(" TRANSFERENCIA APROBADA")]),_:1})):U("",!0),A(),Ce,b(i).currentOrder.responsible_id?(C(),V(F,{key:1,class:"tag",severity:"success"},{default:T(()=>[A(E(b(i).currentOrder.name),1)]),_:1})):U("",!0),t("div",Le,[t("p",Te," ID:"+E(b(i).currentOrder.order_id),1),t("p",Ae,E(b(i).currentOrder.user_name),1),t("p",De,[t("b",null," fecha: "+E((X=b(i).currentOrder.latest_status_timestamp)==null?void 0:X.split("T")[0]),1),t("b",null," Hora: "+E((ee=(q=(Q=(Y=b(i).currentOrder.latest_status_timestamp)==null?void 0:Y.split("T")[1])==null?void 0:Q.split(":"))==null?void 0:q.slice(0,2))==null?void 0:ee.join(":")),1)]),Ie,(C(!0),D(K,null,Z((oe=(ne=(te=b(i))==null?void 0:te.currentOrder)==null?void 0:ne.pe_json)==null?void 0:oe.listaPedidos,L=>{var re;return C(),D("div",null,[t("div",Be,[t("p",Re,[A(" ( "+E(L.pedido_cantidad)+" ) "+E(L.pedido_nombre_producto)+" ",1),Ue]),t("div",null,[L.pedido_base_price?(C(),D("p",Ne,E(b(N)(L.pedido_base_price*L.pedido_cantidad)),1)):(C(),D("p",ze,E(b(N)(L.pedido_precio)),1))])]),((re=L.lista_productocombo)==null?void 0:re.length)>0?(C(),D("p",We,Ve)):U("",!0),L.lista_productocombo?(C(!0),D(K,{key:1},Z(L.lista_productocombo,R=>(C(),D("p",Ke,[A(" -- "),t("b",null,E(R.pedido_cantidad),1),A(" "+E(R.pedido_nombre),1)]))),256)):U("",!0),(C(!0),D(K,null,Z(L.modificadorseleccionList,R=>(C(),D("div",$e,[t("p",Fe,[A(" - ( "+E(L.pedido_cantidad)+" ) ",1),t("b",null,E(R.modificadorseleccion_cantidad),1),A(" "+E(R.modificadorseleccion_nombre),1)]),t("p",ke,E(b(N)(R.pedido_precio*R.modificadorseleccion_cantidad*L.pedido_cantidad)),1)]))),256)),Je])}),256)),t("div",Ze,[Ge,t("div",Xe,[t("p",Ye,[t("b",null,E(b(N)(b(i).currentOrder.pe_json.delivery.delivery_pagocon-b(i).currentOrder.delivery_price)),1)])]),Qe,t("div",qe,[t("p",et,[t("b",null,E(b(N)(b(i).currentOrder.delivery_price)),1)])]),tt,t("div",nt,[t("p",ot,[t("b",null,E(b(N)(b(i).currentOrder.pe_json.delivery.delivery_pagocon)),1)])]),rt]),lt,t("p",{class:"notas",style:{border:"1px solid",margin:"0",color:"black",padding:"0.5rem"},innerHTML:n.value},null,8,it),st,t("div",at,[dt,t("div",ct,[t("p",ut,E(b(i).currentOrder.user_name),1)]),ft,t("div",null,[t("p",pt,E(b(i).currentOrder.user_phone),1)]),mt,t("div",null,[t("p",bt,E(b(i).currentOrder.user_address),1)]),yt,t("div",null,[t("p",ht,E(b(i).currentOrder.payment_method),1)])])])]),x(M,{class:"shadow-4",onClick:r[13]||(r[13]=L=>b(i).setVisible("currentOrder",!1)),icon:"pi pi-times",rounded:"",severity:"danger",style:{position:"absolute",top:"-1rem","border-radius":"50%",right:"-1rem"}})]}),_:1},8,["visible"])]),x(B,{visible:u.value,"onUpdate:visible":r[16]||(r[16]=_=>u.value=_),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:T(()=>[_t]),default:T(()=>[t("form",{onSubmit:J(p,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column","align-items":"start"}},[wt,x(F,{class:"px-4",severity:"warning"},{default:T(()=>[t("span",Ot,[t("b",null,E(b(i).currentOrder.payment_method),1)])]),_:1}),xt,x(O,{style:{width:"100%"},id:"paymentMethod",modelValue:v.value,"onUpdate:modelValue":r[15]||(r[15]=_=>v.value=_),options:d.value,optionLabel:"name",optionValue:"id",placeholder:"Selecciona un método de pago",required:""},null,8,["modelValue","options"]),x(M,{style:{width:"100%","border-radius":"0.5rem"},label:"Cambiar",type:"submit",class:"p-button-help"})],40,Et)]),_:1},8,["visible"])],64)}}},Ct=de(jt,[["__scopeId","data-v-42b7f4e4"]]);export{Ct as D};
