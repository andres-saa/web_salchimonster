import{_ as v,i as R,o as E,U as P,q as r,r as k,a as d,c as u,d as t,t as l,u as o,F as g,e as f,v as w,f as h,b as I,w as T,x as C,y as O,z as N,k as S,h as m,A as $,n as j,P as D,B as M,C as F,D as L}from"./index-11d957fb.js";function _(s){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(s)}const B=1e6,U=_(B);console.log(U);function q(s){let n=0;for(let c=0;c<s.length;c++)n+=s[c].price;return n}function z(s){const n={};return s.forEach(e=>{const p=e.id;n[p]?n[p].quantity++:n[p]={product:e,quantity:1}}),Object.values(n).map(e=>e)}function A(s){if(s.price){const n=q(s.adiciones);return s.price+n}else return s.price||0}function x(s){let n=0;for(const c of s.order_products)n+=A(c);return n}const i=s=>(C("data-v-ccdf3ca9"),s=s(),O(),s),V={class:"col-12 p-0 m-0 xl:col-12 p-0 md:p-3 texto-negro",style:{width:"100%"}},H=i(()=>t("div",{class:"col-12 p-0",style:{display:"flex"}},[t("img",{class:"m-auto",src:"https://salchimonster.com/images/logo.png",alt:"",style:{height:"4rem",width:"4rem","object-fit":"contain"}})],-1)),G=i(()=>t("p",{class:"text-xl col-12 text-center",style:{"font-weight":"bold"}},"SALCHIMONSTER",-1)),J={class:"text-xl col-12 text-center",style:{"font-weight":"bold"}},K=i(()=>t("p",{class:"text-xl pl-4 negrilla",style:{"font-weight":"bold",color:"white","background-color":"black"}},"ENTREGAR",-1)),Q={class:"productos"},W={class:"producto",style:{display:"flex","justify-content":"space-between","align-items":"center","flex-direction":"column"}},X={class:"col-12 p-0",style:{display:"flex","justify-content":"space-between","align-items":"center"}},Y={class:"",style:{"font-weight":"bold","text-transform":"uppercase","min-width":"max-content",margin:"0",padding:"0.5rem 0"}},Z={style:{"font-weight":"bold",height:""}},tt={key:0,class:"col-12 p-0 pl-2 mb-0",style:{"font-weight":"bold"}},et={class:"col-12 p-0 pl-1",style:{display:"flex","justify-content":"space-between","align-items":"center"}},ot={class:"pl-2",style:{"text-transform":"uppercase","min-width":"",margin:"0",padding:"0.1rem 0",width:"100%"}},st={key:1,class:"col-12 p-0 pl-2 mb-0",style:{"font-weight":"bold"}},nt={class:"col-12 p-0 pl-1",style:{display:"flex","justify-content":"space-between","align-items":"center"}},at={class:"pl-2",style:{"text-transform":"uppercase","min-width":"",margin:"0",padding:"0.1rem 0",width:"100%"}},rt={style:{"font-weight":"",height:""}},lt=i(()=>t("div",{style:{width:"100%","border-bottom":"0.1px solid","margin-top":"0rem"}},null,-1)),it=i(()=>t("br",null,null,-1)),ct={class:"text-l",style:{width:"100%",display:"flex","justify-content":"space-between",margin:"1rem 0"}},dt=i(()=>t("span",{style:{"font-weight":"bold"}}," SUBTOTAL ",-1)),pt={style:{"font-weight":"bold"}},ut={class:"text-l",style:{width:"100%",display:"flex","justify-content":"space-between",margin:"1rem 0"}},_t=i(()=>t("span",{style:{"font-weight":"bold"}}," DOMICILIO ",-1)),mt={style:{"font-weight":"bold"}},ht={class:"text-xl",style:{width:"100%",display:"flex","justify-content":"space-between",margin:"1rem 0"}},yt=i(()=>t("span",{style:{"font-weight":"bold"}}," TOTAL ",-1)),bt={style:{"font-weight":"bold"}},gt=i(()=>t("p",{class:"text-xl pl-4",style:{"font-weight":"bold",color:"white","background-color":"black"}},"NOTAS",-1)),ft=i(()=>t("p",{class:"text-xl pl-4 py-0 negrilla",style:{"font-weight":"bold",color:"white","background-color":"black"}}," DATOS DE USUARIO",-1)),wt={class:"text-l",style:{width:"100%",display:"flex","justify-content":"space-between",margin:"1rem 0"}},xt=i(()=>t("span",{style:{"font-weight":"bold"}}," NOMBRE ",-1)),vt={style:{"text-transform":"uppercase"}},kt={class:"text-l",style:{width:"100%",display:"flex","justify-content":"space-between",margin:"1rem 0"}},It=i(()=>t("span",{style:{"font-weight":"bold"}}," TELEFONO ",-1)),Tt={style:{"text-transform":"uppercase"}},Ct={class:"text-l",style:{width:"100%",display:"flex","justify-content":"space-between",margin:"1rem 0"}},Ot=i(()=>t("span",{style:{"font-weight":"bold"}}," DIRECCIÓN ",-1)),At={style:{"text-transform":"uppercase"}},Rt={class:"text-l",style:{width:"100%",display:"flex","justify-content":"space-between",margin:"1rem 0"}},Et=i(()=>t("span",{style:{"font-weight":"bold"}}," MÉTODO DE PAGO ",-1)),Pt={style:{"text-transform":"uppercase"}},Nt={__name:"factura",setup(s){const n=R({});return E(async()=>{const c=`${P}/user/${r.value.user_id}`;try{const e=await fetch(c);if(!e.ok)throw new Error(`Error en la solicitud: ${e.status}`);const p=await e.json();n.value=p}catch(e){console.error("Error en la solicitud:",e)}}),(c,e)=>{const p=k("P");return d(),u("div",V,[H,G,t("p",J,"ORDEN #"+l(o(r).order_id),1),K,t("div",Q,[(d(!0),u(g,null,f(o(z)(o(r).order_products),a=>(d(),u("div",W,[t("div",X,[t("p",Y,[t("span",null,l(a.quantity),1),w(),t("span",null,l(a.product.name),1)]),t("p",Z,l(o(_)(a.quantity*o(A)(a.product))),1)]),a.product.salsas.length>0?(d(),u("p",tt,"SALSAS ")):h("",!0),(d(!0),u(g,null,f(a.product.salsas,y=>(d(),u("div",et,[t("p",ot,[t("span",null,l(y),1)])]))),256)),a.product.adiciones.length>0?(d(),u("p",st," ADICIONES")):h("",!0),(d(!0),u(g,null,f(a.product.adiciones,y=>(d(),u("div",nt,[t("p",at,[t("span",null,l(y.name),1)]),t("p",rt,l(o(_)(y.price)),1)]))),256)),lt]))),256)),it]),t("div",ct,[dt,t("span",pt,l(o(_)(o(x)(o(r)))),1)]),t("div",ut,[_t,t("span",mt,l(o(_)(o(r).delivery_price)),1)]),t("div",ht,[yt,t("span",bt,l(o(_)(o(x)(o(r))+o(r).delivery_price)),1)]),gt,I(p,null,{default:T(()=>[w(l(o(r).order_notes),1)]),_:1}),ft,t("div",wt,[xt,t("span",vt,l(n.value.user_name),1)]),t("div",kt,[It,t("span",Tt,l(n.value.user_phone),1)]),t("div",Ct,[Ot,t("span",At,l(n.value.user_address),1)]),t("div",Rt,[Et,t("span",Pt,l(o(r).payment_method),1)])])}}},St=v(Nt,[["__scopeId","data-v-ccdf3ca9"]]);const b=s=>(C("data-v-53090edc"),s=s(),O(),s),$t={class:"btn_accion_dialogo",style:{position:"absolute",top:"90%",display:"flex",gap:"2rem"}},jt=b(()=>t("span",{class:"text-xl p-0",style:{border:"none","font-weight":"bold"}},"PREPARAR",-1)),Dt=[jt],Mt=b(()=>t("span",{class:"text-xl p-0",style:{border:"none","font-weight":"bold"}},"ENVIAR",-1)),Ft=[Mt],Lt=b(()=>t("span",{class:"text-xl",style:{border:"none","font-weight":"bold"}},"CANCELAR",-1)),Bt=[Lt],Ut=b(()=>t("span",{class:"text-xl",style:{border:"none","font-weight":"bold"}},"IMPRIMIR",-1)),qt=[Ut],zt={__name:"dialogo-pedido",setup(s){const n=()=>{const c=document.getElementById("factura").innerHTML,e=window.open("","_blank");e.document.write("<html><head><title>Factura</title>");const p=document.getElementsByTagName("style");for(let a=0;a<p.length;a++)e.document.write(p[a].outerHTML);e.document.write("<style> @media print { html{height: min-content;} .negrilla{background-color:black !IMPORTANT; color:white !IMPORTANT;} *{font-family: sans-serif; padding: 0 !IMPORTANT; margin: 0.1rem !IMPORTANT; font-size:0.9rem !IMPORTANT} body { -webkit-print-color-adjust: exact; /* Chrome, Safari */ color-adjust: exact; /* Firefox */ } } </style>"),e.document.write("</head><body>"),e.document.write(c),e.document.write("</body></html>"),e.document.close(),e.print(),setTimeout(()=>{e.close()},.1)};return(c,e)=>{const p=k("Dialog");return d(),N(p,{class:"dialogo",style:S([{"padding-bottom":"7rem","border-radius":"1rem",overflow:"hidden","background-color":"rgb(255, 255, 255)",color:"black"},{width:"40rem"}]),visible:o(m),"onUpdate:visible":e[4]||(e[4]=a=>$(m)?m.value=a:null),modals:"",header:"name",breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:T(()=>[t("button",{class:"btn_cerrar",onClick:e[0]||(e[0]=a=>m.value=!o(m)),style:{"z-index":"99","background-color":"var(--primary-color)",padding:"0.5rem 1rem",border:"none","border-radius":"0.5rem",color:"white",position:"absolute",right:"2rem"}},[t("i",{style:{color:"white","font-weight":"bold","border-radius":"1rem"},class:j(o(D).TIMES)},null,2)]),I(St,{class:"factura",id:"factura"}),t("div",$t,[o(r).order_status.status=="generada"&&o(r).order_status.status!="enviada"?(d(),u("button",{key:0,onClick:e[1]||(e[1]=a=>o(M)(o(r))),style:{border:"none","box-shadow":"0 0 1rem rgba(0, 0, 0, 0.5)",padding:"0rem 2rem","border-radius":"0.5rem","background-color":"rgb(0, 255, 106)"}},Dt)):h("",!0),o(r).order_status.status=="en preparacion"&&o(r).order_status.status!="enviada"?(d(),u("button",{key:1,onClick:e[2]||(e[2]=a=>o(F)(o(r))),style:{border:"none","box-shadow":"0 0 1rem rgba(0, 0, 0, 0.5)",padding:"0rem 2rem","border-radius":"0.5rem","background-color":"rgb(0, 255, 0)"}},Ft)):h("",!0),o(r).order_status.status!="enviada"?(d(),u("button",{key:2,onClick:e[3]||(e[3]=a=>o(L)(o(r))),style:{border:"none","box-shadow":"0 0 1rem rgba(0, 0, 0, 0.5)",padding:"1rem 2rem","border-radius":"0.5rem","background-color":"rgb(255, 120, 120)"}},Bt)):h("",!0),t("button",{onClick:n,style:{border:"none","box-shadow":"0 0 1rem rgba(0, 0, 0, 0.5)",padding:"1rem 2rem","border-radius":"0.5rem","background-color":"rgb(255, 246, 120)"}},qt)])]),_:1},8,["visible"])}}},Ht=v(zt,[["__scopeId","data-v-53090edc"]]);export{Ht as D};
