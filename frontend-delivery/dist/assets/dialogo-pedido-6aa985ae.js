import{_ as w,k,o as C,U as E,l as r,a as d,c as u,d as e,F as b,e as g,t as c,m as T,u as s,f as h,q as x,v,r as O,w as A,x as R,y as P,h as m,z as D,n as N,P as S,b as $,A as M,B as j,C as F}from"./index-3de8328b.js";function _(o){return new Intl.NumberFormat("es-CO",{style:"currency",currency:"COP",minimumFractionDigits:0,maximumFractionDigits:0}).format(o)}const L=1e6,B=_(L);console.log(B);function U(o){let n=0;for(let l=0;l<o.length;l++)n+=o[l].price;return n}function q(o){const n={};return o.forEach(t=>{const a=t.id;n[a]?n[a].quantity++:n[a]={product:t,quantity:1}}),Object.values(n).map(t=>t)}function I(o){if(o.price){const n=U(o.adiciones);return o.price+n}else return o.price||0}function f(o){let n=0;for(const l of o.order_products)n+=I(l);return n}const p=o=>(x("data-v-5ca8f811"),o=o(),v(),o),z={class:"col-12 p-0 m-0 xl:col-12 p-0 md:p-3 texto-negro",style:{width:"100%"}},V=p(()=>e("p",{class:"text-xl col-12 text-center",style:{"font-weight":"bold"}},"SALCHIMONSTER",-1)),H=p(()=>e("p",{class:"text-xl",style:{"font-weight":"bold"}},"RESUMEN PEDIDO",-1)),G={class:"productos"},J={class:"producto",style:{display:"flex","justify-content":"space-between","align-items":"center","flex-direction":"column"}},K={class:"col-12 p-0",style:{display:"flex","justify-content":"space-between","align-items":"center"}},Q={class:"",style:{"font-weight":"bold","text-transform":"uppercase","min-width":"max-content",margin:"0",padding:"0.5rem 0"}},W={style:{"font-weight":"bold",height:""}},X={key:0,class:"col-12 p-0 pl-2 mb-0",style:{"font-weight":"bold"}},Y={class:"col-12 p-0 pl-1",style:{display:"flex","justify-content":"space-between","align-items":"center"}},Z={class:"pl-2",style:{"text-transform":"uppercase","min-width":"",margin:"0",padding:"0.1rem 0",width:"100%"}},ee={key:1,class:"col-12 p-0 pl-2 mb-0",style:{"font-weight":"bold"}},te={class:"col-12 p-0 pl-1",style:{display:"flex","justify-content":"space-between","align-items":"center"}},se={class:"pl-2",style:{"text-transform":"uppercase","min-width":"",margin:"0",padding:"0.1rem 0",width:"100%"}},oe={style:{"font-weight":"",height:""}},ne=p(()=>e("div",{style:{width:"100%","border-bottom":"0.1px solid","margin-top":"0rem"}},null,-1)),ae=p(()=>e("br",null,null,-1)),re={class:"text-l",style:{width:"100%",display:"flex","justify-content":"space-between",margin:"1rem 0"}},ie=p(()=>e("span",{style:{"font-weight":"bold"}}," SUBTOTAL ",-1)),le={style:{"font-weight":"bold"}},de={class:"text-l",style:{width:"100%",display:"flex","justify-content":"space-between",margin:"1rem 0"}},ce=p(()=>e("span",{style:{"font-weight":"bold"}}," DOMICILIO ",-1)),ue={style:{"font-weight":"bold"}},pe={class:"text-xl",style:{width:"100%",display:"flex","justify-content":"space-between",margin:"1rem 0"}},_e=p(()=>e("span",{style:{"font-weight":"bold"}}," TOTAL ",-1)),me={style:{"font-weight":"bold"}},he=p(()=>e("p",{class:"text-xl mt-4",style:{"font-weight":"bold"}},"NOTAS DEl PEDIDO",-1)),ye=["value"],be=p(()=>e("div",{class:"text-l",style:{width:"100%",display:"flex","justify-content":"space-between",margin:"1rem 0"}},[e("span",{style:{"font-weight":"bold"}}," DATOS DE USUARIO ")],-1)),ge={class:"text-l",style:{width:"100%",display:"flex","justify-content":"space-between",margin:"1rem 0"}},fe=p(()=>e("span",{style:{"font-weight":"bold"}}," NOMBRE ",-1)),we={style:{"text-transform":"uppercase"}},xe={class:"text-l",style:{width:"100%",display:"flex","justify-content":"space-between",margin:"1rem 0"}},ve=p(()=>e("span",{style:{"font-weight":"bold"}}," TELEFONO ",-1)),Ie={style:{"text-transform":"uppercase"}},ke={class:"text-l",style:{width:"100%",display:"flex","justify-content":"space-between",margin:"1rem 0"}},Ce=p(()=>e("span",{style:{"font-weight":"bold"}}," DIRECCIÃ“N ",-1)),Ee={style:{"text-transform":"uppercase"}},Te={__name:"factura",setup(o){const n=k({});return C(async()=>{const l=`${E}/user/${r.value.user_id}`;try{const t=await fetch(l);if(!t.ok)throw new Error(`Error en la solicitud: ${t.status}`);const a=await t.json();n.value=a}catch(t){console.error("Error en la solicitud:",t)}}),(l,t)=>(d(),u("div",z,[V,H,e("div",G,[(d(!0),u(b,null,g(s(q)(s(r).order_products),a=>(d(),u("div",J,[e("div",K,[e("p",Q,[e("span",null,c(a.quantity),1),T(),e("span",null,c(a.product.name),1)]),e("p",W,c(s(_)(a.quantity*s(I)(a.product))),1)]),a.product.salsas.length>0?(d(),u("p",X,"SALSAS")):h("",!0),(d(!0),u(b,null,g(a.product.salsas,i=>(d(),u("div",Y,[e("p",Z,[e("span",null,c(i),1)])]))),256)),a.product.adiciones.length>0?(d(),u("p",ee,"ADICIONES")):h("",!0),(d(!0),u(b,null,g(a.product.adiciones,i=>(d(),u("div",te,[e("p",se,[e("span",null,c(i.name),1)]),e("p",oe,c(s(_)(i.price)),1)]))),256)),ne]))),256)),ae]),e("div",re,[ie,e("span",le,c(s(_)(s(f)(s(r)))),1)]),e("div",de,[ce,e("span",ue,c(s(_)(s(r).delivery_price)),1)]),e("div",pe,[_e,e("span",me,c(s(_)(s(f)(s(r))+s(r).delivery_price)),1)]),he,e("textarea",{value:s(r).order_notes,readonly:"",style:{"min-height":"5rem","margin-bottom":"2rem"},class:"col-12",type:"text",name:"",id:"dynamicTextarea"},null,8,ye),be,e("div",ge,[fe,e("span",we,c(n.value.user_name),1)]),e("div",xe,[ve,e("span",Ie,c(n.value.user_phone),1)]),e("div",ke,[Ce,e("span",Ee,c(n.value.user_address),1)])]))}},Oe=w(Te,[["__scopeId","data-v-5ca8f811"]]);const y=o=>(x("data-v-f9c54a0e"),o=o(),v(),o),Ae={class:"btn_accion_dialogo",style:{position:"absolute",top:"90%",display:"flex",gap:"2rem"}},Re=y(()=>e("span",{class:"text-xl p-0",style:{border:"none","font-weight":"bold"}},"PREPARAR",-1)),Pe=[Re],De=y(()=>e("span",{class:"text-xl p-0",style:{border:"none","font-weight":"bold"}},"ENVIAR",-1)),Ne=[De],Se=y(()=>e("span",{class:"text-xl",style:{border:"none","font-weight":"bold"}},"CANCELAR",-1)),$e=[Se],Me=y(()=>e("span",{class:"text-xl",style:{border:"none","font-weight":"bold"}},"IMPRIMIR",-1)),je=[Me],Fe={__name:"dialogo-pedido",setup(o){const n=()=>{const l=document.getElementById("factura").innerHTML,t=window.open("","_blank");t.document.write("<html><head><title>Factura</title>");const a=document.getElementsByTagName("style");for(let i=0;i<a.length;i++)t.document.write(a[i].outerHTML);t.document.write("</head><body>"),t.document.write(l),t.document.write("</body>   <style>  *{font-family: sans-serif; padding: 0 !IMPORTANT; margin: 0 !IMPORTANT; font-size:0.8rem !IMPORTANT} </style>      </html> "),t.document.close(),t.print(),t.close()};return(l,t)=>{const a=O("Dialog");return d(),A(a,{class:"dialogo",style:P([{"padding-bottom":"7rem","border-radius":"1rem",overflow:"hidden","background-color":"rgb(255, 255, 255)",color:"black"},{width:"40rem"}]),visible:s(m),"onUpdate:visible":t[4]||(t[4]=i=>D(m)?m.value=i:null),modals:"",header:"name",breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:R(()=>[e("button",{class:"btn_cerrar",onClick:t[0]||(t[0]=i=>m.value=!s(m)),style:{"z-index":"99","background-color":"var(--primary-color)",padding:"0.5rem 1rem",border:"none","border-radius":"0.5rem",color:"white",position:"absolute",right:"2rem"}},[e("i",{style:{color:"white","font-weight":"bold","border-radius":"1rem"},class:N(s(S).TIMES)},null,2)]),$(Oe,{class:"factura",id:"factura"}),e("div",Ae,[s(r).order_status.status=="generada"&&s(r).order_status.status!="enviada"?(d(),u("button",{key:0,onClick:t[1]||(t[1]=i=>s(M)(s(r))),style:{border:"none","box-shadow":"0 0 1rem rgba(0, 0, 0, 0.5)",padding:"0rem 2rem","border-radius":"0.5rem","background-color":"rgb(0, 255, 106)"}},Pe)):h("",!0),s(r).order_status.status=="en preparacion"&&s(r).order_status.status!="enviada"?(d(),u("button",{key:1,onClick:t[2]||(t[2]=i=>s(j)(s(r))),style:{border:"none","box-shadow":"0 0 1rem rgba(0, 0, 0, 0.5)",padding:"0rem 2rem","border-radius":"0.5rem","background-color":"rgb(0, 255, 0)"}},Ne)):h("",!0),s(r).order_status.status!="enviada"?(d(),u("button",{key:2,onClick:t[3]||(t[3]=i=>s(F)(s(r))),style:{border:"none","box-shadow":"0 0 1rem rgba(0, 0, 0, 0.5)",padding:"1rem 2rem","border-radius":"0.5rem","background-color":"rgb(255, 120, 120)"}},$e)):h("",!0),e("button",{onClick:n,style:{border:"none","box-shadow":"0 0 1rem rgba(0, 0, 0, 0.5)",padding:"1rem 2rem","border-radius":"0.5rem","background-color":"rgb(255, 246, 120)"}},je)])]),_:1},8,["visible"])}}},Be=w(Fe,[["__scopeId","data-v-f9c54a0e"]]);export{Be as D};
