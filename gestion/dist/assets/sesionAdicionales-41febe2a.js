import{_ as X,r as d,u as Y,w as F,o as I,b,d as u,e as m,f as o,t as i,h as r,l as _,g as l,j as v,F as V,k as T,m as B,U as x,p as Z,n as ee,P as ae,v as oe,x as se}from"./index-351d7858.js";import{f as D}from"./formatoPesos-2a38d2e7.js";const J=j=>(oe("data-v-95efd144"),j=j(),se(),j),te={class:"col-12"},ne={class:"card"},le={class:"text-2xl titulo mb-6",style:{"text-transform":"capitalize"}},ie={class:"grid"},re={class:"col-8 grid"},ce={class:"col-12 lg:col-6"},de=["onClick"],pe={style:{"text-transform":"capitalize"},class:"text-xl mb-4"},ue={style:{"text-transform":"capitalize"},class:"grid"},me={class:"col-6 text-left"},_e={class:"col-6 text-right"},ve={class:"col-1 p-0 m-0"},ge={class:"card col-3 p-4",style:{"box-shadow":"0 0 20px rgba(0, 0, 0, 0.172)",border:"none"}},he={style:{"text-transform":"capitalize"},class:"text-xl mb-4"},fe={class:""},be={style:{"text-transform":"lowercase"},class:"grid"},xe={style:{},class:"col-6 text-left"},ye={class:"col-6 text-right"},we=J(()=>o("h5",null,"Nombre del grupo",-1)),Ce={style:{display:"flex"}},Ae={class:"grid col-12 p-0 pl-2"},$e={class:"col-6"},ke={class:"col-6 text-right"},Ve={class:"flex align-items-center justify-content-center"},je=J(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),Se={__name:"sesionAdicionales",setup(j){const z=d(),P=d(),G=d([]),n=Y(),y=d(!1),w=d(!1),N=d(),C=d(!1),g=d({price:0}),S=d({lista:{}}),p=d({grupo:[]});F(()=>S.value.lista,t=>{for(const e in t){const a=parseInt(e);if(t[e])p.value.grupo.includes(a)||p.value.grupo.push(a);else{const c=p.value.grupo.indexOf(a);c!==-1&&p.value.grupo.splice(c,1)}}},{deep:!0});const M=t=>{N.value=t,C.value=!0},R=()=>{C.value=!1},q=async()=>{const t=`${x}/${n.params.adicionales}`;fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g.value)}).then(e=>e.json()).then(e=>{y.value=!1,A()}).catch(e=>console.error("Error:",e))},L=async()=>{const t=`${x}/grupo-${n.params.adicionales}`,e={};e.name=p.value.name,e[K[n.params.adicionales]]=p.value.grupo,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(a=>a.json()).then(a=>{console.log(a),w.value=!1,A(),$().then(c=>c.map(f=>E(f[h[n.params.adicionales]])))}).catch(a=>console.error("Error:",a))},H=async t=>{const e=`${x}/grupo-${n.params.adicionales}/${t}`;fetch(e,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(a=>{if(a.ok)return C.value=!1,a.json();throw new Error("Something went wrong")}).then(a=>{A(),$().then(c=>c.map(f=>E(f[h[n.params.adicionales]])))}).catch(a=>console.error("Error:",a))},h={salsas:"grupo_salsa_id",toppings:"grupo_topping_id",cambios:"grupo_cambio_id",acompanantes:"grupo_acompanante_id",adicionales:"grupo_id"},O={salsas:"salsa_id",toppings:"topping_id",cambios:"cambio_id",acompanantes:"acompanante_id",adicionales:"adicional_id"},K={salsas:"salsas",toppings:"toppings",cambios:"cambios",acompanantes:"acompanantes",adicionales:"adicionales"},A=async()=>{try{const e=await(await fetch(`${x}/${n.params.adicionales}`)).json();z.value=e}catch(t){console.error("Error fetching data: ",t)}},$=async()=>{try{const e=await(await fetch(`${x}/grupo-${n.params.adicionales}`)).json();return P.value=e,e}catch(t){console.error("Error fetching data: ",t)}},E=async t=>{try{const a=await(await fetch(`${x}/grupo-${n.params.adicionales}/${t}/${n.params.adicionales}`)).json();return G.value[t]=a,a}catch(e){console.error("Error fetching data: ",e)}};return F(()=>n.params.adicionales,(t,e)=>{t!==e&&(A(),$().then(a=>a.map(c=>E(c[h[n.params.adicionales]]))))}),I(A),I($),I(async()=>{$().then(t=>t.map(e=>E(e[h[n.params.adicionales]])))}),(t,e)=>{const a=b("Button"),c=b("Divider"),f=b("inputText"),Q=b("inputNumber"),U=b("Dialog"),W=b("Checkbox");return u(),m(V,null,[o("div",te,[o("div",ne,[o("h5",le,"grupos de "+i(r(n).params.adicionales),1),_(),l(a,{class:"mb-6",style:{"text-transform":"capitalize"},onClick:e[0]||(e[0]=s=>w.value=!w.value)},{default:v(()=>[_("Nuevo grupo")]),_:1}),o("div",ie,[o("div",re,[(u(!0),m(V,null,T(P.value,s=>(u(),m("div",ce,[o("div",{class:"card",style:B([`background-color:${r(Z)[r(n).params.adicionales]}`,{position:"relative","box-shadow":"0 0 20px rgba(0, 0, 0, 0.144)",border:"none"}])},[o("button",{onClick:k=>M(s),class:"add-cart-btn text-xl",style:{cursor:"pointer",position:"absolute",top:"-1rem",right:"-1rem","background-color":"var(--red-400)",width:"2.5rem",height:"2.5rem","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",border:"none"}},[o("i",{style:{color:"white"},class:ee(["icono text-2xl p-0 m-0",r(ae).TIMES])},null,2)],8,de),o("p",pe,[o("b",null,i(s.name),1)]),(u(!0),m(V,null,T(G.value[s[h[r(n).params.adicionales]]],k=>(u(),m("div",ue,[o("span",me,i(k.name),1),o("span",_e,i(r(D)(k.price)),1)]))),256))],4)]))),256))]),o("div",ve,[l(c,{layout:"vertical"})]),o("div",ge,[o("p",he,[o("b",null,"Todas las "+i(r(n).params.adicionales),1)]),o("div",fe,[(u(!0),m(V,null,T(z.value,s=>(u(),m("div",be,[o("span",xe,i(s.name),1),o("span",ye,i(r(D)(s.price)),1)]))),256)),l(a,{style:{"text-transform":"capitalize"},onClick:e[1]||(e[1]=s=>y.value=!y.value)},{default:v(()=>[_("Agregar")]),_:1})])])])])]),l(U,{visible:y.value,"onUpdate:visible":e[4]||(e[4]=s=>y.value=s),modal:"true",style:B([{width:"500px",height:"max-content"},{"background-color":"white","border-radius":"1rem"}]),header:"Agregar",class:"p-fluid p-2 m-3"},{default:v(()=>[l(f,{class:"mb-4",modelValue:g.value.name,"onUpdate:modelValue":e[2]||(e[2]=s=>g.value.name=s)},null,8,["modelValue"]),l(Q,{class:"mb-4",modelValue:g.value.price,"onUpdate:modelValue":e[3]||(e[3]=s=>g.value.price=s)},null,8,["modelValue"]),_(" "+i(g.value)+" ",1),l(a,{style:{"text-transform":"capitalize"},onClick:q},{default:v(()=>[_("Agregar")]),_:1})]),_:1},8,["visible"]),l(U,{visible:w.value,"onUpdate:visible":e[6]||(e[6]=s=>w.value=s),modal:"true",style:B([{width:"500px",height:"max-content"},{"background-color":"white","border-radius":"1rem"}]),header:"Agregar",class:"p-fluid p-2 m-3"},{default:v(()=>[we,l(f,{class:"mb-4",modelValue:p.value.name,"onUpdate:modelValue":e[5]||(e[5]=s=>p.value.name=s)},null,8,["modelValue"]),(u(!0),m(V,null,T(z.value,s=>(u(),m("div",Ce,[l(W,{modelValue:S.value.lista[s[O[r(n).params.adicionales]]],"onUpdate:modelValue":k=>S.value.lista[s[O[r(n).params.adicionales]]]=k,binary:"",value:!1},null,8,["modelValue","onUpdate:modelValue"]),o("div",Ae,[o("div",$e,i(s.name),1),o("div",ke,i(r(D)(s.price)),1)])]))),256)),l(a,{style:{"text-transform":"capitalize"},onClick:L},{default:v(()=>[_("Crear Grupo")]),_:1}),_(" "+i(S.value)+" "+i(p.value),1)]),_:1},8,["visible"]),l(U,{header:"Confirmation",visible:C.value,"onUpdate:visible":e[8]||(e[8]=s=>C.value=s),style:{width:"350px"},modal:!0},{footer:v(()=>[l(a,{label:"No",icon:"pi pi-times",onClick:R,class:"p-button-text"}),l(a,{label:"Si",icon:"pi pi-check",onClick:e[7]||(e[7]=s=>H(N.value[[h[r(n).params.adicionales]]])),class:"p-button-text",autofocus:""})]),default:v(()=>[o("div",Ve,[je,o("span",null,[_("Seguro que desea eliminar "),o("b",null,i(N.value.name),1)])])]),_:1},8,["visible"])],64)}}},ze=X(Se,[["__scopeId","data-v-95efd144"]]);export{ze as default};
