import{r as P,_ as z}from"./empty-cart-6df16ad4.js";import{d as h,g as w,J,N as k,B as S,q as p,o as c,c as m,u as o,s as a,a as t,n as i,S as N,T as v,V as b,y,z as I,W as g,X as l,F as V,U as B,Y as L,Z as s,$ as n,a0 as F,x as O,t as H,P as _,r as q,a1 as G}from"./index-a533c9d4.js";import{T as Z}from"./TarjetaMenu-3b08a58e.js";/* empty css                                                                    *//* empty css                                                                *//* empty css                                                                    */const W={key:0,class:"col-12 grid container lg:col-10 xl:col-8 m-auto mb-8 md:p-4",style:{"background-color":"rgb(255, 255, 255)","border-radius":"2rem"}},X={class:"col-12 xl:col-7 xl:p-5 p-0",style:{height:"100%"}},Y={class:"col-12 p-2",style:{position:"relative","border-radius":"1rem",height:"max-content",padding:"0 1rem"}},K=t("div",{style:{"font-weight":"bold"},class:"col-12 pl-0 text-center text-xl"}," DATOS DE USUARIO ",-1),Q=t("label",{for:"year"},"NOMBRE",-1),ee=t("label",{for:"year"},"BARRIO (click para modificar)",-1),oe=t("label",{for:"year"},"DIRECCION",-1),te=t("label",{for:"year"},"TELEFONO",-1),re=t("label",{for:"year"},"METODO DE PAGO",-1),le={class:"col-12 p-6 d-flex justify-content-center"},ae=t("span",{class:"text-xl",style:{"min-width":"max-content","font-weight":"bold","margin-top":"5rem"}},"FINALIZAR COMPRA",-1),se=[ae],ne={key:1,class:"col-12 m-auto d-flex w-100",style:{display:"flex","flex-direction":"column","justify-content":"center","text-align":"center",height:"80vh","align-items":"center"}},ie=t("img",{style:{width:"100%","max-width":"640px"},src:z,alt:""},null,-1),de=[ie],ue={class:"text-xl",style:{color:"black"}},ce={style:{"text-transform":"capitalize"}},me=t("span",{style:{"border-radius":"10rem",color:"black",position:"absolute",top:"1rem","background-color":"rgb(255, 255, 255)","font-weight":"bold"},class:"text-center text-3xl px-6 py-2"}," Mata el antojo",-1),pe={class:"p-5",style:{display:"flex","align-items":"center",gap:"2rem","overflow-x":"auto",color:"black",height:"100%"}},be={style:{"border-radius":"10rem",color:"black",position:"absolute",bottom:"-2rem","background-color":"var(--primary-color)","font-weight":"bold"},class:"text-center text-2xl px-4 py-1"},we={__name:"pay",setup(ge){const T=()=>{g.value=!1,location.reload()},C=h(JSON.parse(localStorage.getItem("currentNeigborhood"))),x=h([]),E=JSON.parse(localStorage.getItem("currentNeigborhood")).currenNeigborhood.name;w(()=>{J.value=JSON.parse(localStorage.getItem("currentNeigborhood")).currenNeigborhood});const M=async u=>{try{let e=await fetch(`${B}/products/category/name/${u}/site/${C.value.currenSiteId}`);if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);let d=await e.json();x.value=d}catch(e){console.error("Error fetching data: ",e)}},R=()=>{const u=localStorage.getItem("estado");if(u&&u=="cerrado"){L.value=!0;return}const e=s.value;if(!e.user_name||!e.user_name.trim()){alert("El nombre es obligatorio."),n.value.user_name=!0,l.value=!1;return}if(!e.user_phone||!e.user_phone.trim()){alert("El teléfono es obligatorio."),n.value.user_phone=!0,l.value=!1;return}if(!e.user_address||!e.user_address.trim()){n.value.user_address=!0,alert("La dirección es obligatoria."),l.value=!1;return}if(!b.value){n.value.payMethod=!0,alert("Por favor seleccione un metodo de pago"),l.value=!1;return}l.value=!0},j=h();w(()=>{k.value=S(JSON.parse(localStorage.getItem("cart")).products),j.value=JSON.parse(localStorage.getItem("cart")).total,M("malteadas")});const D=S(JSON.parse(localStorage.getItem("cart")).products);return console.log(D),(u,e)=>{const d=p("InputText"),U=p("Dropdown"),f=p("Dialog"),$=p("RouterLink");return c(),m(V,null,[o(k).length>0?(c(),m("div",W,[a(P),t("div",X,[t("div",Y,[K,Q,a(d,{type:"text",class:i(["col-12 p-1 mb-4",o(n).user_name?"p-invalid":""]),modelValue:o(s).user_name,"onUpdate:modelValue":e[0]||(e[0]=r=>o(s).user_name=r)},null,8,["modelValue","class"]),ee,a(d,{onClick:e[1]||(e[1]=r=>N.value=!o(N)),value:o(E),type:"text",readonly:"",class:"col-12 p-1 mb-4",modelValue:o(s).barrio,"onUpdate:modelValue":e[2]||(e[2]=r=>o(s).barrio=r)},null,8,["value","modelValue"]),oe,a(d,{type:"text",class:i(["col-12 p-1 mb-4",o(n).user_address?"p-invalid":""]),modelValue:o(s).user_address,"onUpdate:modelValue":e[3]||(e[3]=r=>o(s).user_address=r)},null,8,["modelValue","class"]),te,a(d,{max:"10",type:"Number",class:i(["col-12 p-1 mb-4",o(n).user_phone?"p-invalid":""]),modelValue:o(s).user_phone,"onUpdate:modelValue":e[4]||(e[4]=r=>o(s).user_phone=r)},null,8,["modelValue","class"]),re,a(U,{class:i(["col-12 p-0",{"p-invalid":o(n).payMethod}]),modelValue:o(b),"onUpdate:modelValue":e[5]||(e[5]=r=>v(b)?b.value=r:null),modelModifiers:{trim:!0},options:o(F),placeholder:"",required:"true"},null,8,["modelValue","options","class"])]),t("div",le,[t("button",{onClick:e[6]||(e[6]=r=>R()),class:"col",style:{width:"100%",border:"none","background-color":"var(--primary-color)",color:"white","border-radius":"0.6rem",padding:"0.5rem"}},se)])])])):(c(),m("div",ne,de)),a(f,{class:"pt-8",style:I([{"background-color":"white","border-radius":"1rem"},{width:"30rem"}]),visible:o(g),"onUpdate:visible":e[7]||(e[7]=r=>v(g)?g.value=r:null),modal:"",header:"Header",breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:y(()=>[t("div",null,[t("p",ue,[O(" Muchas gracias "),t("span",ce,H(o(s).user_name),1),O(", hemos recibido tu pedido y en breve será despachado")])]),t("button",{onClick:T,style:{width:"3rem",height:"3rem",border:"none",position:"absolute",right:"2rem",top:"1rem","background-color":"var(--primary-color)","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center","z-index":"9"}},[t("i",{class:i([o(_).TIMES,"text-2xl"]),style:{color:"white","font-weight":"bold"}},null,2)])]),_:1},8,["visible"]),a(f,{class:"dialogo pt-6",style:I([{"border-radius":"1rem",overflow:"","background-color":"rgb(255, 255, 255)",color:"rgba(0, 0, 0, 0.663)"},{width:"max-content"}]),visible:o(l),"onUpdate:visible":e[11]||(e[11]=r=>v(l)?l.value=r:null),modal:"",header:"name",breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:y(()=>[me,t("div",pe,[(c(!0),m(V,null,q(x.value,r=>(c(),m("div",null,[a(Z,{product:r,style:{height:"100%",width:"100%","min-width":"15rem","max-width":"15rem","box-shadow":"0 0 20px rgba(0, 0, 0, 0.227)"}},null,8,["product"]),t("button",{style:{position:"absolute",top:"-1rem",right:"-1rem","background-color":"red",width:"3rem",height:"3rem","border-radius":"50%",display:"flex","align-items":"center",border:"none","justify-content":"center",color:"white","z-index":"99"},onClick:e[8]||(e[8]=A=>l.value=!o(l)),class:"add-cart-btn text-xl"},[t("i",{style:{"font-weight":"bold"},class:i(["icono text-2xl p-0 m-0",o(_).TIMES])},null,2)]),a($,{to:"/cart"},{default:y(()=>[t("button",{style:{position:"absolute",top:"-1rem",right:"3rem","background-color":"var(--primary-color)",width:"3rem",height:"3rem","border-radius":"50%",display:"flex","align-items":"center",border:"none","justify-content":"center",color:"white","z-index":"99"},onClick:e[9]||(e[9]=A=>l.value=!o(l)),class:"add-cart-btn text-xl"},[t("i",{style:{"font-weight":"bold"},class:i(["icono text-2xl p-0 m-0",o(_).SHOPPING_CART])},null,2)])]),_:1})]))),256))]),t("p",be,[t("button",{onClick:e[10]||(e[10]=r=>o(G)()),style:{"font-weight":"bold","background-color":"transparent",color:"white",border:"none"}}," Finalizar compra")])]),_:1},8,["visible"])],64)}}};export{we as default};
