import{_ as w,L as i,r as f,g as r,h as g,i as y,p as n,j as l,M as x,U as u,b as c,D as v,E as k,N as b}from"./index-941d21c3.js";const I="/images/logo.png";const V=i(),S=e=>{const t=i();return b.get(`${u}/validate-token`,{headers:{Authorization:`Bearer ${e}`}}).then(o=>(o.data.access_token&&t.setUserData(o.data),o.data)).catch(o=>{throw console.error("Error durante la validación del token:",o),o})},U=()=>{const e=i();setInterval(async()=>{const t=e.userData.access_token;if(!t){c.push("/auth/login");return}try{await S(t)}catch(o){console.error("La sesión ha expirado o el token es inválido:",o),e.userData={},c.push("/auth/login")}},6e4)},B={setup(){const e=f({username:"",password:""});return{credentials:e,login:async()=>{const o=new URLSearchParams;o.append("username",e.value.username),o.append("password",e.value.password);try{const s=await fetch(`${u}/token-employer`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:o});if(!s.ok)throw new Error("Network response was not ok");const p=await s.json();V.setUserData(p),U(),c.push("/")}catch(s){console.error(s)}}}}},d=e=>(v("data-v-65192cf2"),e=e(),k(),e),D={style:{display:"flex",position:"relative","background-size":"cover",height:"100vh",width:"100vw",overflow:"hidden"},class:"p-0 fondo"},T=d(()=>n("img",{src:I,alt:"",style:{width:"48px"},class:"m-3"},null,-1)),L=d(()=>n("p",{class:"text-2xl",style:{"font-weight":"bold"}},"Iniciar sesión",-1)),E=d(()=>n("p",{class:"text-2xl",style:{"font-weight":"bold"}},"call center",-1));function N(e,t,o,s,p,P){const m=r("InputText"),h=r("Password"),_=r("Button");return g(),y("div",D,[n("form",{class:"col-12 m-auto",onSubmit:t[2]||(t[2]=x((...a)=>s.login&&s.login(...a),["prevent"])),style:{"max-width":"min-content",display:"flex","border-radius":"0.5rem","box-shadow":"0 0 10px rgba(0, 0, 0, 0.389)","flex-direction":"column","background-color":"rgb(255, 255, 255)","align-items":"center"}},[T,L,E,l(m,{class:"my-3 m-0",modelValue:s.credentials.username,"onUpdate:modelValue":t[0]||(t[0]=a=>s.credentials.username=a),type:"text",placeholder:"identificación",style:{width:"100%"}},null,8,["modelValue"]),l(h,{class:"",toggleMask:"",modelValue:s.credentials.password,"onUpdate:modelValue":t[1]||(t[1]=a=>s.credentials.password=a),placeholder:"Clave"},null,8,["modelValue"]),l(_,{size:"samll",style:{width:"100%","background-color":"rgb(255, 98, 0)",border:"none",color:"#fff"},label:"Iniciar sesion",class:"my-3",type:"submit"})],32)])}const C=w(B,[["render",N],["__scopeId","data-v-65192cf2"]]);export{C as default};
