import{u as P,r as m,w as C,o as j,c as u,s as p,a as w,b as r,d as x,e as V,f as a,g as n,h as l,i as N,j as i,F as D,k as E,U as y,n as T,P as v,l as b,t as f,m as J,p as F,q as I}from"./index-351d7858.js";import"./dropDownAux-31247fcf.js";/* empty css                                                             */import"./TarjetaMenu.vue_vue_type_style_index_0_scoped_44c4dfd0_lang-f57765c6.js";import"./formatoPesos-2a38d2e7.js";const M={style:{display:"flex","align-items":"center"},class:"col p-2 col-12"},q={class:"grid col-12 m-0 p-0"},z={class:"col p-2"},H={class:"col p-2"},G={style:{width:"100%"},sclass:"text-center"},K=a("h5",null,"Nombre de la nueva categoria",-1),Q={class:"p-input-icon-left",style:{width:"100%"}},W=a("i",{class:"pi pi-pencil"},null,-1),X=a("span",{class:"text-center col-12 p-0"},"Agregar Categoria",-1),se={__name:"MenuTienda",setup(Y){P();const c=m(!1),g=m([]),_=m();m();const R=async()=>{try{return await(await fetch(`${y}/categories`)).json()}catch(e){console.error("Error fetching data: ",e)}};C(u,(e,t)=>{e!==t&&(console.log(t,e),localStorage.setItem("categoryValue",JSON.stringify(e)),e.category_name!="Nueva categoria"?I.push({path:`/tienda-menu/productos/${e.category_name}`,query:{category:e.category_id}}):c.value=!0)}),C(p,(e,t)=>{e!==t&&(console.log(t,e),localStorage.setItem("siteDropValue",JSON.stringify(e)))});const k=async()=>{const e=`${y}/categories`,t={category_name:_.value};try{const s=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!s.ok)throw c.value=!1,new Error(`HTTP error! status: ${s.status}`);const d=await s.json();console.log("Success:",d),c.value=!1,h(),I.push({path:"/tienda-menu/"})}catch(s){console.error("Error:",s)}},L=[{name:"Adiciones",to:"adicionales"},{name:"Salsas",to:"salsas"},{name:"Topping",to:"toppings"},{name:"Cambios",to:"cambios"},{name:"Acompanantes",to:"acompanantes"}],$=async()=>{try{return(await fetch(`${y}/sites`)).json()}catch(e){console.log(e)}},h=()=>{R().then(e=>{g.value=e,g.value.push({category_name:"Nueva categoria"})})};return j(async()=>{const e=localStorage.getItem("categoryValue");e&&(u.value=JSON.parse(e));const t=localStorage.getItem("siteDropValue");t&&(p.value=JSON.parse(t)),$().then(s=>w.value=s),h()}),(e,t)=>{const s=r("Dropdown"),d=r("Button"),O=r("RouterLink"),U=r("RouterView"),A=r("InputText"),B=r("Dialog");return x(),V(D,null,[a("div",M,[n(s,{class:"col-12 md:col-6 p-0",modelValue:l(p),"onUpdate:modelValue":t[0]||(t[0]=o=>N(p)?p.value=o:null),options:l(w),optionLabel:"site_name",placeholder:"sede"},null,8,["modelValue","options"])]),a("div",q,[a("div",z,[n(s,{style:{outline:"none"},class:"p-1 col-12",primary:"",modelValue:l(u),"onUpdate:modelValue":t[1]||(t[1]=o=>N(u)?u.value=o:null),options:g.value,placeholder:"Productos"},{value:i(o=>{var S;return[a("div",null,[a("i",{class:T([l(v).STAR_FILL,"mr-2"])},null,2),b(f((S=o.value)!=null&&S.category_name?o.value.category_name:{}),1)])]}),option:i(o=>[a("div",null,[a("span",null,[a("i",{class:T([o.option.category_name=="Nueva categoria"?l(v).PLUS_CIRCLE:l(v).TRASH,"mr-3"])},null,2)]),b(f(o.option.category_name),1)])]),_:1},8,["modelValue","options"])]),(x(),V(D,null,E(L,o=>a("div",H,[n(O,{to:`/tienda-menu/${o.to}`},{default:i(()=>[n(d,{style:J(`background-color:${l(F)[o.to]}`),class:"outlined col-12 p-3 text-center",outlined:"",Secondary:""},{default:i(()=>[a("span",G,f(o.name),1)]),_:2},1032,["style"])]),_:2},1032,["to"])])),64))]),n(U),n(B,{header:"Confirmation",visible:c.value,"onUpdate:visible":t[4]||(t[4]=o=>c.value=o),style:{width:"350px"},modal:!0},{default:i(()=>[K,a("span",Q,[W,n(A,{modelValue:_.value,"onUpdate:modelValue":t[2]||(t[2]=o=>_.value=o),class:"w-100",style:{width:"100%"},type:"text"},null,8,["modelValue"])]),n(d,{onClick:t[3]||(t[3]=o=>k()),style:{margin:"auto"},class:"m-auto my-4 text-center"},{default:i(()=>[X]),_:1})]),_:1},8,["visible"])],64)}}};export{se as default};
