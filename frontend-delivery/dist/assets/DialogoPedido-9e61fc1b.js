import{_ as M,u as P,f as E,i as k,r as f,o as i,c,a as u,w,b as e,q as N,d as t,j as x,s as O,k as C,t as n,F as D,g as S,p as R,m as F}from"./index-c23725d5.js";import{f as p}from"./formatoPesos-2a38d2e7.js";const s=g=>(R("data-v-9586ddca"),g=g(),F(),g),j=s(()=>e("h3",null,"Cancelar Orden",-1)),L=["onSubmit"],U=s(()=>e("span",{for:"responsible"},"Responsable",-1)),$=s(()=>e("span",{for:"reason"},"Razón",-1)),q={id:"factura"},H={class:"",style:{width:"100%",padding:""}},A={class:"",style:{"font-weight":"bold",width:"max-content",color:"black","font-size":"1.7rem",margin:"0rem auto"}},G={style:{padding:"0",margin:"0 auto","margin-bottom":"1rem",width:"max-content"}},J=s(()=>e("div",{class:"",style:{"font-weight":"bold",color:"white",margin:"0","background-color":"black","align-items":"center",display:"grid","grid-template-columns":"50% 8.33%  16.6% 25%"}},[e("div",{style:{width:"100%"}},[e("b",null," productos")]),e("div",null,[e("b",null," x ")]),e("div",null,[e("p",{style:{"text-align":"end"}}," val ")]),e("div",null,[e("p",{style:{"text-align":"end","font-weight":"bold"}},[e("b",null," total ")])])],-1)),K={style:{display:"grid","grid-template-columns":"50% 8.33%  16.6% 25%"}},Q={style:{"text-align":"end",color:"black"}},W={style:{"text-align":"end",color:"black"}},X=s(()=>e("div",{style:{"background-color":"rgba(0, 0, 0, 0.286)",height:"1px"}},null,-1)),Y={style:{"background-color":"black","font-weight":"bold",color:"white",width:"100%",margin:"0"}},Z={style:{display:"grid","grid-template-columns":"50% 8.33%  16.6% 25%"}},ee={style:{"text-align":"end",color:"black"}},te={style:{"text-align":"end",color:"black"}},le=s(()=>e("div",{style:{"background-color":"rgba(0, 0, 0, 0.286)",height:"1px"}},null,-1)),oe={class:"",style:{display:"grid",color:"","margin-top":"0.5rem","grid-template-columns":"auto auto"}},ne=s(()=>e("div",{class:""},[e("span",{style:{"font-weight":"bold"}},[e("b",null,"Subtotal")])],-1)),se={class:""},re={style:{"text-align":"end","font-weight":"bold",color:"black"}},ie=s(()=>e("div",{class:""},[e("span",{style:{"font-weight":"bold"}},[e("b",null,"Domicilio")])],-1)),ae={class:""},de={style:{"text-align":"end","font-weight":"bold",color:"black"}},ce=s(()=>e("div",{class:""},[e("span",{style:{"font-weight":"bold",color:"black"}},[e("b",null,"Total")])],-1)),ue={class:""},pe={style:{"text-align":"end",color:"black","font-weight":"bold"}},_e=s(()=>e("div",{class:""},null,-1)),me=s(()=>e("p",{style:{"font-weight":"bold","background-color":"black",color:"white",padding:"0",margin:"0","margin-top":"0.5rem"}},[e("b",null,"Notas")],-1)),be={class:"notas",style:{border:"1px solid",margin:"0",padding:"0.5rem"}},ge=s(()=>e("p",{style:{"background-color":"black","font-weight":"bold","margin-top":"1rem",color:"white"}},[e("b",null,"cliente")],-1)),ve={style:{display:"grid","grid-template-columns":"auto auto"}},he=s(()=>e("div",{class:"",style:{}},[e("span",null,[e("b",null,"NOMBRE")])],-1)),ye={class:""},fe={style:{"text-align":"end",color:"black"}},we=s(()=>e("div",{style:{}},[e("span",null,[e("b",null,"telefono")])],-1)),ke={style:{"text-align":"end",color:"black"}},xe=s(()=>e("div",{style:{}},[e("span",null,[e("b",null,"direccion ")])],-1)),Oe={style:{"text-align":"end",color:"black"}},Ce=s(()=>e("div",null,[e("span",null,[e("b",null,"metodo de pago")])],-1)),De={style:{"text-align":"end",color:"black"}},Se={class:"col-12 mb-0 pb-0 px-0 m-0",style:{display:"flex","justify-content":"space-between",gap:"1rem"}},Ve={__name:"DialogoPedido",setup(g){const o=P(),I=()=>{const _=document.getElementById("factura").innerHTML,l=window.open("","_blank");l.document.write("<html><head><title>Factura</title>");const h=document.getElementsByTagName("style");for(let b=0;b<h.length;b++)l.document.write(h[b].outerHTML);l.document.write("<style>  @media print {  html{height: min-content;}  *{text-transform:uppercase;align-items:center; font-family: sans-serif;padding:0;margin:0; font-size:0.9rem !IMPORTANT} body { padding:0.5rem; -webkit-print-color-adjust: exact; /* Chrome, Safari */ color-adjust: exact; /* Firefox */ } }  </style>"),l.document.write("</head><body>"),l.document.write(_),l.document.write("</body></html>"),l.document.close(),l.print(),setTimeout(()=>{l.close()},.01)};E(async()=>{o.currentOrder.value=o.currentOrder});const v=k(!1),a=k({responsible:null,reason:"Sin razon"}),T=k([{name:"Restaurante",value:"restaurant"},{name:"Cliente",value:"client"}]),B=()=>{a.value.responsible&&O.cancelOrder(o.currentOrder.order_id,a.value.reason,a.value.responsible.name).then(_=>{_&&(v.value=!1,console.log("Order canceled successfully"))}).catch(_=>{console.error("Failed to cancel order:",_)})};return(_,l)=>{const h=f("Dropdown"),b=f("Textarea"),m=f("Button"),V=f("Dialog");return i(),c("div",null,[u(V,{visible:v.value,"onUpdate:visible":l[2]||(l[2]=r=>v.value=r),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:w(()=>[j]),default:w(()=>[e("form",{onSubmit:N(B,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column"}},[U,u(h,{id:"responsible",modelValue:a.value.responsible,"onUpdate:modelValue":l[0]||(l[0]=r=>a.value.responsible=r),options:T.value,optionLabel:"name",placeholder:"Selecciona un responsable"},null,8,["modelValue","options"]),$,u(b,{style:{resize:"none","text-transform":"lowercase"},id:"reason",modelValue:a.value.reason,"onUpdate:modelValue":l[1]||(l[1]=r=>a.value.reason=r),rows:"5",placeholder:"Escribe la razón de la cancelación"},null,8,["modelValue"]),u(m,{label:"Cancelar Orden",type:"submit",class:"p-button-danger"})],40,L)]),_:1},8,["visible"]),u(V,{closeOnEscape:"",closable:!1,visible:t(o).visibles.currentOrder,"onUpdate:visible":l[7]||(l[7]=r=>t(o).visibles.currentOrder=r),modal:"",style:{width:"30rem","max-height":"80vh",position:"relative"}},{footer:w(()=>[e("div",Se,[t(o).currentOrder.current_status=="generada"?(i(),x(m,{key:0,size:"small",onClick:l[3]||(l[3]=r=>t(O).prepareOrder(t(o).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"Preparar"})):C("",!0),t(o).currentOrder.current_status!="enviada"&&t(o).currentOrder.current_status!="cancelada"?(i(),x(m,{key:1,size:"small",onClick:l[4]||(l[4]=r=>v.value=!0),style:{"border-radius":"0.3rem",width:"100%"},severity:"danger",label:"cancelar"})):C("",!0),t(o).currentOrder.current_status=="en preparacion"?(i(),x(m,{key:2,size:"small",onClick:l[5]||(l[5]=r=>t(O).sendOrder(t(o).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"enviar"})):C("",!0),u(m,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:I,severity:"warning",label:"imprimir"})])]),default:w(()=>{var r;return[e("div",q,[e("div",H,[e("p",A," #"+n(t(o).currentOrder.order_id),1),e("p",G,[e("b",null," fecha: "+n((r=t(o).currentOrder.latest_status_timestamp)==null?void 0:r.split("T")[0]),1)]),J,(i(!0),c(D,null,S(t(o).currentOrder.products,d=>(i(),c("div",null,[e("div",K,[e("div",null,[e("span",null,n(d.name),1)]),e("div",null,[e("span",null,n(d.quantity),1)]),e("div",null,[e("p",Q,n(t(p)(d.price)),1)]),e("div",null,[e("p",W,n(t(p)(d.total_price)),1)])]),X]))),256)),(i(!0),c(D,null,S(t(o).currentOrder.additional_items,(d,z)=>(i(),c("div",{s:"",key:z,style:{position:"relative","margin-top":"0.5rem"}},[e("p",Y,[e("b",null,n(z),1)]),(i(!0),c(D,null,S(d,y=>(i(),c("div",null,[e("div",Z,[e("div",null,[e("p",null,n(y.aditional_name),1)]),e("div",null,[e("span",null,n(y.aditional_quantity),1)]),e("div",null,[e("p",ee,n(t(p)(y.aditional_price)),1)]),e("div",null,[e("p",te,n(t(p)(y.total_aditional_price)),1)])]),le]))),256))]))),128)),e("div",oe,[ne,e("div",se,[e("p",re,[e("b",null,n(t(p)(t(o).currentOrder.total_order_price)),1)])]),ie,e("div",ae,[e("p",de,[e("b",null,n(t(p)(t(o).currentOrder.delivery_price)),1)])]),ce,e("div",ue,[e("p",pe,[e("b",null,n(t(p)(t(o).currentOrder.delivery_price+t(o).currentOrder.total_order_price)),1)])]),_e]),me,e("p",be,n(t(o).currentOrder.order_notes),1),ge,e("div",ve,[he,e("div",ye,[e("p",fe,n(t(o).currentOrder.user_name),1)]),we,e("div",null,[e("p",ke,n(t(o).currentOrder.user_phone),1)]),xe,e("div",null,[e("p",Oe,n(t(o).currentOrder.user_address),1)]),Ce,e("div",null,[e("p",De,n(t(o).currentOrder.payment_method),1)])])])]),u(m,{class:"shadow-4",onClick:l[6]||(l[6]=d=>t(o).setVisible("currentOrder",!1)),icon:"pi pi-times",rounded:"",severity:"danger",style:{position:"absolute",top:"-1rem","border-radius":"50%",right:"-1rem"}})]}),_:1},8,["visible"])])}}},Te=M(Ve,[["__scopeId","data-v-9586ddca"]]);export{Te as D};
