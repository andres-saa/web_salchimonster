import{r as E}from"./resumen-1bfcab6a.js";import{f,A as F,w as I,J as j,g as z,h as g,o as r,x as P,z as B,a as e,i as d,c as p,F as b,r as A,t as y,u as _,I as S,y as $,E as D,_ as G,d as L,p as N,b as U}from"./index-1e89a5bc.js";const H={style:{color:"black"},class:"grid"},J={class:"mb-2"},M={class:"mb-2 text-center"},O={class:"mt-2"},K={key:0,class:"p-0",style:{display:"flex",width:"100%",gap:"1rem"}},Q={style:{display:"flex",width:"100%",gap:"1rem","justify-content":"space-between"}},R={class:"text-sm adicion",style:{"text-transform":"capitalize"}},W={key:0,style:{display:"flex","align-items":"center"}},X={key:0,class:"pl-2 py-1 text-sm"},Y={key:1,class:"pl-2 py-1 text-sm"},Z=e("hr",null,null,-1),ee={class:"col-12 p-0",style:{display:"flex","justify-content":"center","font-weight":"bold"}},te={__name:"dialogAddAditions",setup(x){const t=f({}),m=F(),k=(i,l)=>{if(i.checked){const n={id:i.aditional_item_instance_id,name:i.aditional_item_name,price:i.aditional_item_price,group:l};t.value[n.id]={...n,quantity:i.quantity||1}}else delete t.value[i.aditional_item_instance_id]},V=i=>{if(i.checked){const l={id:i.aditional_item_instance_id,name:i.aditional_item_name,price:i.aditional_item_price};t.value[l.id].quantity++}},T=i=>{t.value[i.aditional_item_instance_id].quantity>1&&t.value[i.aditional_item_instance_id]&&t.value[i.aditional_item_instance_id].quantity--};I(()=>m.visibles.addAdditionToCart,async i=>{if(!i)t.value={},v.value=[];else{const l=m.cart.products.map(n=>n.product.id);l.length>0&&(v.value=await j.getAditionalGroup(l))}},{deep:!0});const q=()=>{Object.values(t.value).forEach(l=>{m.addAdditionToCart(l),console.log(l)}),t.value={},m.setVisible("addAdditionToCart",!1)},v=f([]);return f(!0),z(async()=>{const i=m.cart.products.map(l=>l.product.id);i.length>0&&(v.value=await j.getAditionalGroup(i))}),(i,l)=>{const n=g("Checkbox"),a=g("Button"),c=g("InputText"),h=g("Dialog");return r(),P(h,{class:"mx-3",closable:!0,style:D([{"background-color":"white"},{width:"30rem","border-radius":"0.5rem"}]),visible:_(m).visibles.addAdditionToCart,"onUpdate:visible":l[1]||(l[1]=s=>_(m).visibles.addAdditionToCart=s),modal:"",header:"Header"},{footer:B(()=>[e("div",ee,[d(a,{onClick:q,style:{width:"auto"},severity:"danger",label:"Agregar al carrito"})])]),default:B(()=>[e("div",H,[(r(!0),p(b,null,A(v.value,s=>(r(),p("div",{class:"col-12",style:{},key:s.category},[e("div",J,[e("span",M,[e("b",null,y(s.category),1)]),e("div",O,[(r(!0),p(b,null,A(s.items,o=>{var u,C;return r(),p("div",{key:o.aditional_item_instance_id,style:{display:"flex",gap:"1rem"}},[_(m).cart.products.some(w=>w.product.category_name==o.product_category_name)?(r(),p("div",K,[d(n,{class:"my-1",binary:!0,modelValue:o.checked,"onUpdate:modelValue":w=>o.checked=w,onChange:()=>k(o,s.category)},null,8,["modelValue","onUpdate:modelValue","onChange"]),e("div",Q,[e("span",R,y(o.aditional_item_name),1),o.checked&&s.category!="SALSAS"?(r(),p("span",W,[o.aditional_item_price>0?(r(),p("span",X,[e("b",null,y(_(S)(o.aditional_item_price*((u=t.value[o.aditional_item_instance_id])==null?void 0:u.quantity))),1)])):$("",!0),d(a,{onClick:w=>T(o),class:"ml-2",severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none"},icon:"pi pi-minus"},null,8,["onClick"]),d(c,{modelValue:(C=t.value[o.aditional_item_instance_id])==null?void 0:C.quantity,readonly:"",style:{width:"2rem",border:"none",height:"1.5rem"},class:"p-0 text-center"},null,8,["modelValue"]),d(a,{onClick:w=>V(o),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none"},icon:"pi pi-plus"},null,8,["onClick"])])):o.aditional_item_price>0?(r(),p("span",Y,[e("b",null,y(_(S)(o.aditional_item_price)),1)])):$("",!0)])])):$("",!0)])}),128)),Z])])]))),128))]),d(a,{onClick:l[0]||(l[0]=s=>_(m).setVisible("addAdditionToCart",!1)),icon:"pi pi-times",style:{position:"absolute",right:"-1rem",top:"-1rem"},rounded:"",severity:"danger"})]),_:1},8,["visible"])}}};const ie=x=>(N("data-v-fc3fe92a"),x=x(),U(),x),ne={class:"col-12 my-4 md:my-8 p-0"},oe={class:"grid mx-auto",style:{"max-width":"800px"}},se={class:"col-12 text-sm md:col-6 p-2 md:px-4",style:{display:"flex","flex-direction":"column",gap:"1rem","justify-content":"center"}},ae={class:"col-12 py-3 p-shadow",style:{display:"flex","align-items":"end",position:"relative",gap:"1rem","border-radius":"0.3rem"}},le=["src"],de={style:{display:"flex","flex-direction":"column",gap:"0.4rem",width:"100%"}},re={style:{display:"flex","flex-direction":"column",gap:"0.3rem",width:"100%"}},ce={style:{display:"flex","justify-content":"space-between","align-items":"center",width:"100%",gap:"1rem"}},pe={class:"p-0 m-0"},ue={style:{"text-transform":"uppercase","font-weight":"bold"}},_e={style:{display:"flex"}},me=ie(()=>e("div",null,null,-1)),ye={class:"p-0",style:{"box-shadow":"0 0 0.5rem rgba(0, 0, 0, 0.2)","background-color":"#ff620000","border-radius":"5rem",display:"flex"}},he={class:"p-0 m-0"},ve={class:"col-12 p-0 mt-1"},ge={class:"mb-2"},be={class:"mb-2 text-center"},fe={class:"mt-2"},xe={style:{display:"flex",width:"100%",gap:"1rem","justify-content":"space-between"}},ke={class:"text adicion",style:{"text-transform":"capitalize"}},Ce={style:{display:"flex","align-items":"center"}},we={key:0,class:"pl-2 py-1 text-sm"},Ae={key:1,style:{"box-shadow":"0 0 5px rgba(0, 0, 0, 0.411)",display:"flex","border-radius":"0.3rem"},class:"ml-2"},$e={__name:"cart",setup(x){const t=F();L();const m=f({}),k=f({}),V=()=>{k.value=t.cart.additions.reduce((n,a)=>{let c=a.group;return n[c]||(n[c]=[]),n[c].push(a),n},{})};I(()=>t.cart.additions,()=>{V()},{deep:!0});const T=n=>{const a={...n};a.quantity=1,t.addAdditionToCart(a)},q=n=>{n.quantity>1&&t.removeAdditionFromCart(n.id)},v=n=>{t.removeAdditionCompletelyFromCart(n.id),V()},i=n=>{n.forEach(a=>{v(a)})};I(()=>t.visibles.addAdditionToCart,n=>{n&&(m.value={})},{deep:!0});const l=f([]);return z(async()=>{l.value=await j.getAditional(53),k.value=t.cart.additions.reduce((a,c)=>{let h=c.group;return a[h]||(a[h]=[]),a[h].push(c),a},{})}),(n,a)=>{const c=g("Button"),h=g("InputText");return r(),p(b,null,[e("div",ne,[e("div",oe,[e("div",se,[(r(!0),p(b,null,A(_(t).cart.products,s=>(r(),p("div",ae,[e("img",{style:{width:"5rem","object-fit":"cover",height:"5rem"},src:`https://backend.salchimonster.com/read-product-image/96/${s.product.product_name}`,alt:""},null,8,le),d(c,{class:"ml-2",onClick:o=>_(t).removeProductFromCart(s.product.id),icon:"pi pi-trash",severity:"danger",rounded:"",style:{border:"none",right:"-.5rem",top:"-.5rem",position:"absolute",outline:"none",width:"2rem",height:"2rem"}},null,8,["onClick"]),e("div",de,[e("div",re,[e("div",ce,[e("span",pe,y(s.product.product_name),1)]),e("span",ue,y(s.product.category_name),1),e("div",_e,[me,e("div",ye,[d(c,{onClick:o=>_(t).removeProductInstance(s.product.id),icon:"pi pi-minus",severity:"danger",style:{border:"none",outline:"none",width:"2rem",height:"1.5rem","border-radius":"0.4rem 0 0 0.4rem"}},null,8,["onClick"]),d(h,{class:"text-center",style:{"background-color":"transparent","font-weight":"bold",width:"3rem",height:"1.5rem",color:"black",border:"none"},modelValue:s.quantity,readonly:""},null,8,["modelValue"]),d(c,{onClick:o=>_(t).addProductToCart(s.product),icon:"pi pi-plus ",severity:"danger",style:{"font-weight":"bold",border:"none",outline:"none",width:"2rem",height:"1.5rem","border-radius":"0 0.4rem   0.4rem 0"}},null,8,["onClick"])])])])]),e("h5",he,[e("b",null,y(_(S)(s.total_cost)),1)])]))),256)),e("div",ve,[(r(!0),p(b,null,A(k.value,(s,o)=>(r(),p("div",{class:"p-shadow p-3 mb-4",key:o,style:{position:"relative","border-radius":"0.3rem"}},[d(c,{class:"ml-2",onClick:u=>i(s),icon:"pi pi-trash",severity:"danger",rounded:"",style:{border:"none",right:"-.5rem",top:"-.5rem",position:"absolute",outline:"none",width:"2rem",height:"2rem"}},null,8,["onClick"]),e("div",ge,[e("span",be,[e("b",null,y(o),1)]),e("div",fe,[(r(!0),p(b,null,A(s,u=>(r(),p("div",{key:u.aditional_item_instance_id,style:{display:"flex",gap:"1rem","align-items":"center"}},[d(c,{text:"",rounded:"",onClick:C=>v(u),class:"p-0 m-0",severity:"danger",style:{width:"2rem",height:"2rem",border:"none"},icon:"pi pi-trash m-0"},null,8,["onClick"]),e("div",xe,[e("span",ke,y(u.name),1),e("span",Ce,[u.price>0?(r(),p("span",we,[e("b",null,y(_(S)(u.price*u.quantity)),1)])):$("",!0),o!="SALSAS"?(r(),p("div",Ae,[d(c,{onClick:C=>q(u),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none","border-radius":"0.3rem 0 0 0.3rem"},icon:"pi pi-minus"},null,8,["onClick"]),d(h,{modelValue:u.quantity,readonly:"",style:{width:"2rem",border:"none",height:"1.5rem"},class:"p-0 text-center"},null,8,["modelValue"]),d(c,{onClick:C=>T(u),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none","border-radius":"0 0.3rem 0.3rem 0"},icon:"pi pi-plus"},null,8,["onClick"])])):$("",!0)])])]))),128))])])]))),128)),e("div",{onClick:a[0]||(a[0]=s=>_(t).setVisible("addAdditionToCart",!0)),class:"col-12 p-0 m-0",style:{display:"flex","justify-content":"end"}},[d(c,{rounded:"",severity:"danger",icon:"pi pi-plus"})])])]),d(E,{class:"md:col-6"})])]),d(te)],64)}}},Te=G($e,[["__scopeId","data-v-fc3fe92a"]]);export{Te as default};
