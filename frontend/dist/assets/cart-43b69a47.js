import{r as U}from"./resumen-ce6836b6.js";import{f as x,d as E,y as F,w as I,I as B,g as N,h as f,o as n,c as a,i as r,H as D,a as e,F as A,r as $,C as y,u,D as V,j as S,J as z,_ as G,E as L,p as O,b as R}from"./index-d32edcdc.js";import"./resumen.vue_vue_type_style_index_0_scoped_f62ca269_lang-e96cebdc.js";const H="/images/empty-cart.jpg",M={style:{color:"black"},class:"grid"},J={class:"mb-2"},K={class:"mb-2 text-center"},Q={class:"mt-2"},W={key:0,class:"p-0",style:{display:"flex",width:"100%",gap:"1rem"}},X={style:{display:"flex",width:"100%",gap:"1rem","justify-content":"space-between"}},Y={class:"text-sm adicion",style:{"text-transform":"capitalize"}},Z={key:0,style:{display:"flex","align-items":"center"}},ee={key:0,class:"pl-2 py-1 text-sm"},te={key:1,class:"pl-2 py-1 text-sm"},ie=e("hr",null,null,-1),se={class:"col-12 p-0",style:{display:"flex","justify-content":"center","font-weight":"bold"}},oe={__name:"dialogAddAditions",setup(C){const s=x({}),k=E(),h=F(),w=(o,d)=>{if(o.checked){const m={id:o.aditional_item_instance_id,name:o.aditional_item_name,price:o.aditional_item_price,group:d};s.value[m.id]={...m,quantity:o.quantity||1}}else delete s.value[o.aditional_item_instance_id]},q=o=>{if(o.checked){const d={id:o.aditional_item_instance_id,name:o.aditional_item_name,price:o.aditional_item_price};s.value[d.id].quantity++}},T=o=>{s.value[o.aditional_item_instance_id].quantity>1&&s.value[o.aditional_item_instance_id]&&s.value[o.aditional_item_instance_id].quantity--};I(()=>h.visibles.addAdditionToCart,async o=>{var d,m;if(!o)s.value={},b.value=[];else{const i=h.cart.products.map(c=>c.product.id);i.length>0&&(b.value=await B.getAditionalGroup(i,(m=(d=k.location)==null?void 0:d.site)==null?void 0:m.site_id))}},{deep:!0});const j=()=>{Object.values(s.value).forEach(d=>{h.addAdditionToCart(d),console.log(d)}),s.value={},h.setVisible("addAdditionToCart",!1)},b=x([]);return x(!0),N(async()=>{var d,m;const o=h.cart.products.map(i=>i.product.id);o.length>0&&(b.value=await B.getAditionalGroup(o,(m=(d=k.location)==null?void 0:d.site)==null?void 0:m.site_id))}),(o,d)=>{const m=f("Checkbox"),i=f("Button"),c=f("InputText"),l=f("Dialog");return n(),a("div",null,[r(l,{class:"mx-3",closable:!0,style:z([{"background-color":"white"},{width:"30rem","border-radius":"0.5rem"}]),visible:u(h).visibles.addAdditionToCart,"onUpdate:visible":d[1]||(d[1]=p=>u(h).visibles.addAdditionToCart=p),modal:"",header:"Header"},{footer:D(()=>[e("div",se,[r(i,{onClick:j,style:{width:"auto"},severity:"danger",label:"Agregar al carrito"})])]),default:D(()=>[e("div",M,[(n(!0),a(A,null,$(b.value,p=>(n(),a("div",{class:"col-12",style:{},key:p.category},[e("div",J,[e("span",K,[e("b",null,y(p.category),1)]),e("div",Q,[(n(!0),a(A,null,$(p.items,t=>{var v,_;return n(),a("div",{key:t.aditional_item_instance_id,style:{display:"flex",gap:"1rem"}},[u(h).cart.products.some(g=>g.product.category_name==t.product_category_name)?(n(),a("div",W,[r(m,{class:"my-1",binary:!0,modelValue:t.checked,"onUpdate:modelValue":g=>t.checked=g,onChange:()=>w(t,p.category)},null,8,["modelValue","onUpdate:modelValue","onChange"]),e("div",X,[e("span",Y,y(t.aditional_item_name),1),t.checked&&p.category!="SALSAS"?(n(),a("span",Z,[t.aditional_item_price>0?(n(),a("span",ee,[e("b",null,y(u(V)(t.aditional_item_price*((v=s.value[t.aditional_item_instance_id])==null?void 0:v.quantity))),1)])):S("",!0),r(i,{onClick:g=>T(t),class:"ml-2",severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none"},icon:"pi pi-minus"},null,8,["onClick"]),r(c,{modelValue:(_=s.value[t.aditional_item_instance_id])==null?void 0:_.quantity,readonly:"",style:{width:"2rem",border:"none",height:"1.5rem"},class:"p-0 text-center"},null,8,["modelValue"]),r(i,{onClick:g=>q(t),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none"},icon:"pi pi-plus"},null,8,["onClick"])])):t.aditional_item_price>0?(n(),a("span",te,[e("b",null,y(u(V)(t.aditional_item_price)),1)])):S("",!0)])])):S("",!0)])}),128)),ie])])]))),128))]),r(i,{onClick:d[0]||(d[0]=p=>u(h).setVisible("addAdditionToCart",!1)),icon:"pi pi-times",style:{position:"absolute",right:"-1rem",top:"-1rem"},rounded:"",severity:"danger"})]),_:1},8,["visible"])])}}};const P=C=>(O("data-v-4d57bd6d"),C=C(),R(),C),ne={key:0,class:"col-12 my-8 md:my-8 p-0"},ae=P(()=>e("p",{class:"text-center text-2xl my-8"},[e("b",null,"CARRITO DE COMPRAS")],-1)),de={class:"grid mx-auto",style:{"max-width":"800px"}},le={class:"col-12 text-sm md:col-6 p-3 md:px-4",style:{display:"flex","flex-direction":"column",gap:"1rem","justify-content":"center"}},re={class:"col-12 py-3 p-shadow",style:{display:"flex","align-items":"end",position:"relative",gap:"1rem","border-radius":"0.3rem"}},ce=["src"],pe={style:{display:"flex","flex-direction":"column",gap:"0.4rem",width:"100%"}},ue={style:{display:"flex","flex-direction":"column",gap:"0.3rem",width:"100%"}},_e={style:{display:"flex","justify-content":"space-between","align-items":"center",width:"100%",gap:"1rem"}},me={class:"p-0 m-0"},he={style:{"text-transform":"uppercase","font-weight":"bold"}},ye={style:{display:"flex"}},ve=P(()=>e("div",null,null,-1)),ge={class:"p-0",style:{"box-shadow":"0 0 0.5rem rgba(0, 0, 0, 0.2)","background-color":"#ff620000","border-radius":"5rem",display:"flex"}},be={class:"p-0 m-0"},fe={class:"col-12 p-0 mt-1"},xe={class:"mb-2"},Ce={class:"mb-2 text-center"},ke={class:"mt-2"},we={style:{display:"flex",width:"100%",gap:"1rem","justify-content":"space-between"}},Ae={class:"text adicion",style:{"text-transform":"capitalize"}},$e={style:{display:"flex","align-items":"center"}},Se={key:0,class:"pl-2 py-1 text-sm"},Te={key:1,style:{"box-shadow":"0 0 5px rgba(0, 0, 0, 0.411)",display:"flex","border-radius":"0.3rem"},class:"ml-2"},Ve={key:1,class:"col-12",style:{display:"flex","justify-content":"center",height:"90vh","align-items":"center"}},qe=P(()=>e("img",{style:{"border-radius":"0",width:"100%","max-width":"500px"},src:H,alt:""},null,-1)),je=[qe],Ie={__name:"cart",setup(C){const s=F(),k=E(),h=x({}),w=x({}),q=L(),T=()=>{w.value=s.cart.additions.reduce((i,c)=>{let l=c.group;return i[l]||(i[l]=[]),i[l].push(c),i},{})};I(()=>s.cart.additions,()=>{T()},{deep:!0});const j=i=>{const c={...i};c.quantity=1,s.addAdditionToCart(c)},b=i=>{i.quantity>1&&s.removeAdditionFromCart(i.id)},o=i=>{s.removeAdditionCompletelyFromCart(i.id),T()},d=i=>{i.forEach(c=>{o(c)})};I(()=>s.visibles.addAdditionToCart,i=>{i&&(h.value={})},{deep:!0});const m=x([]);return N(async()=>{var c;((c=q.user.payment_method_option)==null?void 0:c.id)!=7?k.setNeighborhoodPrice():k.setNeighborhoodPriceCero();const i=53;m.value=await B.getAditional(i),w.value=s.cart.additions.reduce((l,p)=>{let t=p.group;return l[t]||(l[t]=[]),l[t].push(p),l},{})}),(i,c)=>{const l=f("Button"),p=f("InputText");return n(),a("div",null,[u(s).cart.products.length>0?(n(),a("div",ne,[ae,e("div",de,[e("div",le,[(n(!0),a(A,null,$(u(s).cart.products,t=>(n(),a("div",re,[e("img",{style:{width:"5rem","object-fit":"cover",height:"5rem"},src:`https://backend.salchimonster.com/read-photo-product/${t.product.img_identifier}/600`,alt:""},null,8,ce),r(l,{class:"ml-2",onClick:v=>u(s).removeProductFromCart(t.product.id),icon:"pi pi-trash",severity:"danger",rounded:"",style:{border:"none",right:"-.5rem",top:"-.5rem",position:"absolute",outline:"none",width:"2rem",height:"2rem"}},null,8,["onClick"]),e("div",pe,[e("div",ue,[e("div",_e,[e("span",me,y(t.product.product_name),1)]),e("span",he,y(t.product.category_name),1),e("div",ye,[ve,e("div",ge,[r(l,{onClick:v=>u(s).removeProductInstance(t.product.id),icon:"pi pi-minus",severity:"danger",style:{border:"none",outline:"none",width:"2rem",height:"1.5rem","border-radius":"0.4rem 0 0 0.4rem"}},null,8,["onClick"]),r(p,{class:"text-center",style:{"background-color":"transparent","font-weight":"bold",width:"3rem",height:"1.5rem",color:"black",border:"none"},modelValue:t.quantity,readonly:""},null,8,["modelValue"]),r(l,{onClick:v=>u(s).addProductToCart(t.product),icon:"pi pi-plus ",severity:"danger",style:{"font-weight":"bold",border:"none",outline:"none",width:"2rem",height:"1.5rem","border-radius":"0 0.4rem   0.4rem 0"}},null,8,["onClick"])])])])]),e("h5",be,[e("b",null,y(u(V)(t.total_cost)),1)])]))),256)),e("div",fe,[(n(!0),a(A,null,$(w.value,(t,v)=>(n(),a("div",{class:"p-shadow p-3 mb-4",key:v,style:{position:"relative","border-radius":"0.3rem"}},[r(l,{class:"ml-2",onClick:_=>d(t),icon:"pi pi-trash",severity:"danger",rounded:"",style:{border:"none",right:"-.5rem",top:"-.5rem",position:"absolute",outline:"none",width:"2rem",height:"2rem"}},null,8,["onClick"]),e("div",xe,[e("span",Ce,[e("b",null,y(v),1)]),e("div",ke,[(n(!0),a(A,null,$(t,_=>(n(),a("div",{key:_.aditional_item_instance_id,style:{display:"flex",gap:"1rem","align-items":"center"}},[r(l,{text:"",rounded:"",onClick:g=>o(_),class:"p-0 m-0",severity:"danger",style:{width:"2rem",height:"2rem",border:"none"},icon:"pi pi-trash m-0"},null,8,["onClick"]),e("div",we,[e("span",Ae,y(_.name),1),e("span",$e,[_.price>0?(n(),a("span",Se,[e("b",null,y(u(V)(_.price*_.quantity)),1)])):S("",!0),v!="SALSAS"?(n(),a("div",Te,[r(l,{onClick:g=>b(_),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none","border-radius":"0.3rem 0 0 0.3rem"},icon:"pi pi-minus"},null,8,["onClick"]),r(p,{modelValue:_.quantity,readonly:"",style:{width:"2rem",border:"none",height:"1.5rem"},class:"p-0 text-center"},null,8,["modelValue"]),r(l,{onClick:g=>j(_),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none","border-radius":"0 0.3rem 0.3rem 0"},icon:"pi pi-plus"},null,8,["onClick"])])):S("",!0)])])]))),128))])])]))),128)),e("div",{onClick:c[0]||(c[0]=t=>u(s).setVisible("addAdditionToCart",!0)),class:"col-12 p-0 m-0",style:{display:"flex","justify-content":"end"}},[r(l,{style:{width:"2rem",left:".3rem",height:"2rem"},rounded:"",severity:"danger",icon:"pi pi-plus"})])])]),r(U,{class:"md:col-6"})])])):(n(),a("div",Ve,je)),r(oe)])}}},Ee=G(Ie,[["__scopeId","data-v-4d57bd6d"]]);export{Ee as default};
