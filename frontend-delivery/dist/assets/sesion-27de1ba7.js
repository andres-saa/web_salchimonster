import{d as n,_ as z,N as A,K as N,L as f,o as V,r as v,a as b,c as x,e as o,t as c,u as i,b as d,F as k,f as j,w as E,H as D,z as U,U as w,q as C,P,k as B,C as R,D as H}from"./index-c1268a0a.js";import{f as L}from"./formatoPesos-2a38d2e7.js";import{b as p,d as F,s as M,e as q}from"./valoresReactivosCompartidos-c8bb745c.js";n({products:[],total:0});n([]);const S=m=>(R("data-v-05e0b8cd"),m=m(),H(),m),J={style:{"text-transform":"capitalize","max-width":""},class:"text-2xl ml-2 py-2"},K=S(()=>o("div",{class:"grid"},null,-1)),O={class:"grid p-2 col-12 m-auto",style:{"max-width":"1024px"}},G={class:"cont p-2",style:{"background-color":"white",height:"100%",position:"relative"}},Q={class:"imagen-cont",style:{position:""}},W=["src"],X={style:{display:""}},Y={class:"nombre-producto mt-4",style:{"font-weight":"bold"}},Z={class:"descripcion-producto mt-2 text-sm mb-4"},ee={class:"info"},te={class:"text-l",style:{"font-weight":"bold","border-radius":"100px"}},oe={class:"flex align-items-center justify-content-center"},se=S(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),ae={style:{color:"black"}},ie={__name:"sesion",setup(m){const I=A(),g=n([]);n(!1),n(!0);const $=e=>{const t={...e};t.state=e.isActive?"active":"inactive",fetch(`${w}/products/${e.product_id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(s=>{if(!s.ok)throw new Error("Network response was not ok");return I.add({severity:`${g.value?"success":"error"}`,summary:`${g.value?"Activado":"Desactivado"}`,detail:e.name,life:3e3}),g.value=e.state=="active",s.json()}).then(s=>{}).catch(s=>{console.error("Error al actualizar el producto:",s)})},u=n([]),l=N(),_=async e=>{console.log(localStorage);const t=localStorage.getItem("siteId");try{let s=await fetch(`${w}/products/category/name/${e}/site/${t}`);if(!s.ok)throw u.value=[],new Error(`HTTP error! status: ${s.status}`);let y=await s.json();u.value=y.map(h=>({...h,isActive:h.state=="active"}))}catch(s){u.value=[],console.error("Error fetching data: ",s)}};return f(M,(e,t)=>{e!==t&&_(l.params.sesion)}),f(q,(e,t)=>{e!==t&&_(l.params.sesion)}),V(async()=>{_(l.params.sesion)}),f(()=>l.params.sesion,e=>{_(e)}),(e,t)=>{const s=v("Toast"),y=v("InputSwitch"),h=v("Button"),T=v("Dialog");return b(),x(k,null,[o("p",J,c(i(l).params.sesion),1),d(s,{style:{"box-shadow":"none"}}),K,o("div",O,[(b(!0),x(k,null,j(u.value,a=>(b(),x("div",{key:a.id,class:"xl:col-3 lg:col-4 md:p-3 col-12 m-0"},[o("div",G,[o("button",{style:{position:"absolute",top:"-1rem",right:"-1rem","background-color":"var(--primary-color)",width:"2.5rem",height:"2.5rem","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",color:"white","z-index":"99"},onClick:t[0]||(t[0]=(...r)=>e.prepararParaEditar&&e.prepararParaEditar(...r)),class:"add-cart-btn text-xl"},[o("i",{class:C(["icono text-2xl p-0 m-0",i(P).PENCIL])},null,2)]),o("button",{style:{position:"absolute",top:"-1rem",right:"2rem","background-color":"var(--red-500)",width:"2.5rem",height:"2.5rem","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",color:"white","z-index":"99"},onClick:t[1]||(t[1]=(...r)=>e.pregpararParaEliminar&&e.pregpararParaEliminar(...r)),class:"add-cart-btn text-xl"},[o("i",{class:C(["icono text-2xl p-0 m-0",i(P).TRASH])},null,2)]),o("div",Q,[o("img",{class:"imagen",onError:t[2]||(t[2]=(...r)=>e.imagenError&&e.imagenError(...r)),style:{height:"50"},src:`${i(w)}/read-product-image/300/${a.name}`,alt:""},null,40,W)]),o("div",X,[o("p",Y,c(a.name),1),o("p",Z,c(a.description),1)]),d(s,{style:{"box-shadow":"none"}}),o("div",ee,[o("div",te,c(i(L)(a.price)),1),d(y,{modelValue:a.isActive,"onUpdate:modelValue":r=>a.isActive=r,onChange:()=>$(a)},null,8,["modelValue","onUpdate:modelValue","onChange"])])])]))),128))]),d(T,{header:"Confirmation",visible:i(p),"onUpdate:visible":t[4]||(t[4]=a=>D(p)?p.value=a:null),style:U([{width:"350px"},{"background-color":"white",color:"black"}]),modal:!0},{footer:E(()=>[d(h,{label:"Salir",icon:"pi pi-times",onClick:t[3]||(t[3]=a=>p.value=!i(p)),class:"p-button-text"})]),default:E(()=>[o("div",oe,[se,o("span",ae,[B("No esta autorizado para eliminar "),o("b",null,c(i(F).name),1)])])]),_:1},8,["visible"])],64)}}},ce=z(ie,[["__scopeId","data-v-05e0b8cd"]]);export{ce as default};
