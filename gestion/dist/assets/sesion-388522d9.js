import{_ as de,r as s,y as fe,u as Ve,z as Ce,w as ae,a as oe,o as pe,b as _,d as c,e as w,g as l,j as K,f as o,A as C,h as r,B as j,i as x,C as N,D as P,G as T,E as D,H as A,t as L,F as te,k as be,I as H,m as Se,J as le,U as v,v as we,x as $e,K as b,L as se,n as xe,P as Ee,M as z,N as ee,s as ke,l as Ue}from"./index-351d7858.js";import{s as je}from"./TarjetaMenu.vue_vue_type_style_index_0_scoped_44c4dfd0_lang-f57765c6.js";import{f as Pe}from"./formatoPesos-2a38d2e7.js";const E=g=>(we("data-v-e34aa2b3"),g=g(),$e(),g),Te={key:0},De=["src"],Ae=E(()=>o("h5",null,"Nombre",-1)),Ie={class:"p-input-icon-left mb-4"},Le=E(()=>o("i",{class:"pi pi-pencil"},null,-1)),Ge=E(()=>o("h5",null,"Description",-1)),ze=E(()=>o("h5",null,"Precio",-1)),Ne={class:"p-input-icon-left"},Oe=E(()=>o("i",{class:"pi pi-pencil"},null,-1)),Be={style:{display:"flex","align-items":"center"}},Re=E(()=>o("span",{class:"ml-5"},"Conjunto de salsas",-1)),Fe={key:1,class:"p-input-icon-left"},qe={style:{display:"flex","align-items":"center"}},Je=E(()=>o("span",{class:"ml-5"},"Conjunto de adiciones",-1)),Me={class:"p-input-icon-left"},He={style:{display:"flex","align-items":"center"}},Ke=E(()=>o("span",{class:"ml-5"},"Conjunto de acompanantes",-1)),Qe={class:"p-input-icon-left"},We={style:{display:"flex","align-items":"center"}},Xe=E(()=>o("span",{class:"ml-5"},"Conjunto de toppings",-1)),Ye={class:"p-input-icon-left"},Ze={style:{display:"flex","align-items":"center"}},eo=E(()=>o("span",{class:"ml-5"},"Conjunto de cambios",-1)),oo={class:"p-input-icon-left"},to=E(()=>o("h5",{style:{display:"flex","align-items":"center"}},[o("span",{class:""},"Estado")],-1)),ao={class:"p-input-icon-left"},so={style:{display:"flex","align-items":"center"}},lo={class:"ml-0 mt-6",style:{"text-transform":"capitalize"}},no={class:"mt-6"},ro={style:{display:"flex","align-items":"center"}},io=E(()=>o("span",{class:"ml-5"},"Todas",-1)),uo={style:{display:"flex","align-items":"center"}},co={class:"ml-5"},po=E(()=>o("span",{class:"text-center col-12 p-0"},"Agregar",-1)),mo={__name:"dialogoAgregarProducto",setup(g){const V=s(null),d=s(null),S=a=>{const e=a.target.files[0];e&&(V.value=URL.createObjectURL(e),d.value=e)},I=fe(),p=Ve(),i=Ce(()=>p.query.category),m=s([]),f=s(!1);ae(f,a=>{oe.value.forEach(e=>{m.value[e.site_id]=a})}),console.log(i.value);const u=s("producto sin nombre"),O=s("producto sin descripcion"),B=s(0),G=s("inactive"),me=s(["active","inactive"]),Q=s([]),W=s([]),X=s([]),Y=s([]),Z=s([]),R=s(),F=s(),q=s(),J=s(),M=s(),_e=async()=>{const a=`${v}/products`;ve(u.value);for(const[e,h]of Object.entries(m.value))if(h){const U={name:u.value,price:B.value,description:O.value,category_id:i.value,porcion:"1",state:G.value,grupo_salsa_id:j.value?j.value.grupo_salsa_id:null,grupo_topping_id:D.value?D.value.grupo_topping_id:null,grupo_acompanante_id:T.value?T.value.grupo_acompanante_id:null,grupo_cambio_id:A.value?A.value.grupo_cambio_id:null,grupo_adicional_id:P.value?P.value.grupo_adicional_id:null,site_id:e};try{const y=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)});if(!y.ok)throw new Error(`Error: ${y.status}`);I.add({severity:"success",summary:`agregado a la sede ${e}`,detail:"espaerando las otras sedes",life:3e3}),le.value=le.value+1}catch(y){console.error("Error al enviar producto:",y)}}H.value=!1},ve=async a=>{const e=new FormData;e.append("file",d.value);try{if(!(await fetch(`${v}/upload-product-image/${a}`,{method:"POST",body:e})).ok)throw new Error("Error al subir la imagen")}catch(h){console.error("Error al subir la imagen:",h)}},ne=async()=>{try{return await(await fetch(`${v}/grupo-salsas`)).json()}catch(a){console.error("Error fetching data: ",a)}},re=async()=>{try{return await(await fetch(`${v}/grupo-cambios`)).json()}catch(a){console.error("Error fetching data: ",a)}},ie=async()=>{try{return await(await fetch(`${v}/grupo-adicionales`)).json()}catch(a){console.error("Error fetching data: ",a)}},ue=async()=>{try{return await(await fetch(`${v}/grupo-toppings`)).json()}catch(a){console.error("Error fetching data: ",a)}},ce=async()=>{try{return await(await fetch(`${v}/grupo-acompanantes`)).json()}catch(a){console.error("Error fetching data: ",a)}};return pe(async()=>{ne().then(a=>{Q.value=a}),ie().then(a=>{W.value=a}),re().then(a=>{X.value=a}),ce().then(a=>{Y.value=a}),ue().then(a=>{Z.value=a}),oe.value.forEach(a=>{m.value[a.site_id]=!1})}),(a,e)=>{const h=_("Input"),U=_("InputText"),y=_("Textarea"),n=_("InputSwitch"),$=_("Dropdown"),ge=_("Button"),he=_("Dialog");return c(),w(te,null,[l(he,{visible:r(H),"onUpdate:visible":e[15]||(e[15]=t=>x(H)?H.value=t:null),style:Se([{width:"500px",height:"max-content"},{"background-color":"white","border-radius":"1rem",overflow:"hidden"}]),header:"Agregar producto",modal:!0,class:"p-fluid p-2 m-3"},{default:K(()=>[V.value?(c(),w("div",Te,[o("img",{src:V.value,alt:"Previsualización del Producto",style:{"max-width":"100%",height:"auto"}},null,8,De)])):C("",!0),l(h,{type:"file",onChange:S,accept:"image/*"}),Ae,o("span",Ie,[Le,l(U,{modelValue:u.value,"onUpdate:modelValue":e[0]||(e[0]=t=>u.value=t),type:"text"},null,8,["modelValue"])]),Ge,l(y,{modelValue:O.value,"onUpdate:modelValue":e[1]||(e[1]=t=>O.value=t),autoResize:!0,rows:"3",cols:"30"},null,8,["modelValue"]),ze,o("span",Ne,[Oe,l(U,{modelValue:B.value,"onUpdate:modelValue":e[2]||(e[2]=t=>B.value=t),type:"number",placeholder:"Precio"},null,8,["modelValue"])]),o("h5",Be,[l(n,{class:"p-0 m-0",modelValue:R.value,"onUpdate:modelValue":e[3]||(e[3]=t=>R.value=t)},null,8,["modelValue"]),Re]),R.value?(c(),w("span",Fe,[l($,{style:{outline:"none"},class:"p-0",primary:"",modelValue:r(j),"onUpdate:modelValue":e[4]||(e[4]=t=>x(j)?j.value=t:null),options:Q.value,optionLabel:"name"},null,8,["modelValue","options"])])):C("",!0),o("h5",qe,[l(n,{class:"p-0 m-0",modelValue:F.value,"onUpdate:modelValue":e[5]||(e[5]=t=>F.value=t)},null,8,["modelValue"]),Je]),o("span",Me,[F.value?(c(),N($,{key:0,style:{outline:"none"},class:"p-0",primary:"",modelValue:r(P),"onUpdate:modelValue":e[6]||(e[6]=t=>x(P)?P.value=t:null),options:W.value,optionLabel:"name"},null,8,["modelValue","options"])):C("",!0)]),o("h5",He,[l(n,{class:"p-0 m-0",modelValue:M.value,"onUpdate:modelValue":e[7]||(e[7]=t=>M.value=t)},null,8,["modelValue"]),Ke]),o("span",Qe,[M.value?(c(),N($,{key:0,style:{outline:"none"},class:"p-0",primary:"",modelValue:r(T),"onUpdate:modelValue":e[8]||(e[8]=t=>x(T)?T.value=t:null),options:Y.value,optionLabel:"name"},null,8,["modelValue","options"])):C("",!0)]),o("h5",We,[l(n,{class:"p-0 m-0",modelValue:q.value,"onUpdate:modelValue":e[9]||(e[9]=t=>q.value=t)},null,8,["modelValue"]),Xe]),o("span",Ye,[q.value?(c(),N($,{key:0,style:{outline:"none"},class:"p-0",primary:"",modelValue:r(D),"onUpdate:modelValue":e[10]||(e[10]=t=>x(D)?D.value=t:null),options:Z.value,optionLabel:"name"},null,8,["modelValue","options"])):C("",!0)]),o("h5",Ze,[l(n,{class:"p-0 m-0",modelValue:J.value,"onUpdate:modelValue":e[11]||(e[11]=t=>J.value=t)},null,8,["modelValue"]),eo]),o("span",oo,[J.value?(c(),N($,{key:0,style:{outline:"none"},class:"p-0",primary:"",modelValue:r(A),"onUpdate:modelValue":e[12]||(e[12]=t=>x(A)?A.value=t:null),options:X.value,optionLabel:"name"},null,8,["modelValue","options"])):C("",!0)]),to,o("span",ao,[l($,{style:{outline:"none"},class:"p-0",primary:"",modelValue:G.value,"onUpdate:modelValue":e[13]||(e[13]=t=>G.value=t),options:me.value},null,8,["modelValue","options"])]),o("h5",so,[o("span",lo,"Sedes en las que estara disponible el producto "+L(u.value),1)]),o("div",no,[o("h5",ro,[l(n,{class:"p-0 m-0",modelValue:f.value,"onUpdate:modelValue":e[14]||(e[14]=t=>f.value=t)},null,8,["modelValue"]),io]),(c(!0),w(te,null,be(r(oe),t=>(c(),w("div",null,[o("h5",uo,[l(n,{class:"p-0 m-0",modelValue:m.value[t.site_id],"onUpdate:modelValue":ye=>m.value[t.site_id]=ye},null,8,["modelValue","onUpdate:modelValue"]),o("span",co,L(t.site_name),1)])]))),256))]),l(ge,{onClick:_e,class:"m-auto my-4 text-center"},{default:K(()=>[po]),_:1})]),_:1},8,["visible"]),l(r(I))],64)}}},_o=de(mo,[["__scopeId","data-v-e34aa2b3"]]),k=g=>(we("data-v-d3224d81"),g=g(),$e(),g),vo={key:0},go=["src"],ho=k(()=>o("h5",null,"Nombre",-1)),yo={class:"p-input-icon-left mb-4"},fo=k(()=>o("i",{class:"pi pi-pencil"},null,-1)),Vo=k(()=>o("h5",null,"Description",-1)),bo=k(()=>o("h5",null,"Precio",-1)),wo={class:"p-input-icon-left"},$o=k(()=>o("i",{class:"pi pi-pencil"},null,-1)),xo={style:{display:"flex","align-items":"center"}},Eo=k(()=>o("span",{class:"ml-5"},"Conjunto de salsas",-1)),ko={key:1,class:"p-input-icon-left"},Uo={style:{display:"flex","align-items":"center"}},Co=k(()=>o("span",{class:"ml-5"},"Conjunto de adiciones",-1)),So={class:"p-input-icon-left"},jo={style:{display:"flex","align-items":"center"}},Po=k(()=>o("span",{class:"ml-5"},"Conjunto de acompanantes",-1)),To={class:"p-input-icon-left"},Do={style:{display:"flex","align-items":"center"}},Ao=k(()=>o("span",{class:"ml-5"},"Conjunto de toppings",-1)),Io={class:"p-input-icon-left"},Lo={style:{display:"flex","align-items":"center"}},Go=k(()=>o("span",{class:"ml-5"},"Conjunto de cambios",-1)),zo={class:"p-input-icon-left"},No=k(()=>o("h5",{style:{display:"flex","align-items":"center"}},[o("span",{class:""},"Estado")],-1)),Oo={class:"p-input-icon-left"},Bo={style:{display:"flex","align-items":"center"}},Ro={class:"ml-0 mt-6",style:{"text-transform":"capitalize"}},Fo={class:"mt-6"},qo={style:{display:"flex","align-items":"center"}},Jo=k(()=>o("span",{class:"ml-5"},"Todas",-1)),Mo={style:{display:"flex","align-items":"center"}},Ho={class:"ml-5"},Ko=k(()=>o("span",{class:"text-center col-12 p-0"},"Agregar",-1)),Qo={__name:"dialogoEditarProducto",setup(g){const V=s(null),d=s(null),S=a=>{const e=a.target.files[0];e&&(V.value=URL.createObjectURL(e),d.value=e)},I=fe(),p=Ve(),i=Ce(()=>p.query.category),m=s([]),f=s(!1);ae(f,a=>{oe.value.forEach(e=>{m.value[e.site_id]=a})}),console.log(i.value);const u=s("producto sin nombre"),O=s("producto sin descripcion"),B=s(0),G=s("inactive"),me=s(["active","inactive"]),Q=s([]),W=s([]),X=s([]),Y=s([]),Z=s([]),R=s(),F=s(),q=s(),J=s(),M=s(),_e=async()=>{const a=`${v}/products`;ve(u.value);for(const[e,h]of Object.entries(m.value))if(h){const U={name:u.value,price:B.value,description:O.value,category_id:i.value,porcion:"1",state:G.value,grupo_salsa_id:j.value?j.value.grupo_salsa_id:null,grupo_topping_id:D.value?D.value.grupo_topping_id:null,grupo_acompanante_id:T.value?T.value.grupo_acompanante_id:null,grupo_cambio_id:A.value?A.value.grupo_cambio_id:null,grupo_adicional_id:P.value?P.value.grupo_adicional_id:null,site_id:e};try{const y=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(U)});if(!y.ok)throw new Error(`Error: ${y.status}`);I.add({severity:"success",summary:`agregado a la sede ${e}`,detail:"espaerando las otras sedes",life:3e3}),le.value=le.value+1}catch(y){console.error("Error al enviar producto:",y)}}H.value=!1},ve=async a=>{const e=new FormData;e.append("file",d.value);try{if(!(await fetch(`${v}/upload-product-image/${a}`,{method:"POST",body:e})).ok)throw new Error("Error al subir la imagen")}catch(h){console.error("Error al subir la imagen:",h)}},ne=async()=>{try{return await(await fetch(`${v}/grupo-salsas`)).json()}catch(a){console.error("Error fetching data: ",a)}},re=async()=>{try{return await(await fetch(`${v}/grupo-cambios`)).json()}catch(a){console.error("Error fetching data: ",a)}},ie=async()=>{try{return await(await fetch(`${v}/grupo-adicionales`)).json()}catch(a){console.error("Error fetching data: ",a)}},ue=async()=>{try{return await(await fetch(`${v}/grupo-toppings`)).json()}catch(a){console.error("Error fetching data: ",a)}},ce=async()=>{try{return await(await fetch(`${v}/grupo-acompanantes`)).json()}catch(a){console.error("Error fetching data: ",a)}};return pe(async()=>{ne().then(n=>{Q.value=n}),ie().then(n=>{W.value=n}),re().then(n=>{X.value=n}),ce().then(n=>{Y.value=n}),ue().then(n=>{Z.value=n}),oe.value.forEach(n=>{m.value[n.site_id]=!1});const a=await ne();Q.value=a;const e=await re();X.value=e;const h=await ie();W.value=h;const U=await ue();Z.value=U;const y=await ce();Y.value=y,j.value=a.find(n=>n.id===b.grupo_salsa_id),A.value=e.find(n=>n.id===b.grupo_cambio_id),P.value=h.find(n=>n.id===b.grupo_adicional_id),D.value=U.find(n=>n.id===b.grupo_topping_id),T.value=y.find(n=>n.id===b.grupo_acompanante_id)}),(a,e)=>{const h=_("Input"),U=_("InputText"),y=_("Textarea"),n=_("InputSwitch"),$=_("Dropdown"),ge=_("Button"),he=_("Dialog");return c(),w(te,null,[l(he,{visible:r(se),"onUpdate:visible":e[15]||(e[15]=t=>x(se)?se.value=t:null),style:Se([{width:"500px",height:"max-content"},{"background-color":"white","border-radius":"1rem",overflow:"hidden"}]),header:"Agregar producto",modal:!0,class:"p-fluid p-2 m-3"},{default:K(()=>[V.value?(c(),w("div",vo,[o("img",{src:V.value,alt:"Previsualización del Producto",style:{"max-width":"100%",height:"auto"}},null,8,go)])):C("",!0),l(h,{type:"file",onChange:S,accept:"image/*"}),ho,o("span",yo,[fo,l(U,{modelValue:r(b).name,"onUpdate:modelValue":e[0]||(e[0]=t=>r(b).name=t),type:"text"},null,8,["modelValue"])]),Vo,l(y,{modelValue:r(b).description,"onUpdate:modelValue":e[1]||(e[1]=t=>r(b).description=t),autoResize:!0,rows:"3",cols:"30"},null,8,["modelValue"]),bo,o("span",wo,[$o,l(U,{modelValue:r(b).price,"onUpdate:modelValue":e[2]||(e[2]=t=>r(b).price=t),type:"number",placeholder:"Precio"},null,8,["modelValue"])]),o("h5",xo,[l(n,{class:"p-0 m-0",modelValue:R.value,"onUpdate:modelValue":e[3]||(e[3]=t=>R.value=t)},null,8,["modelValue"]),Eo]),R.value?(c(),w("span",ko,[l($,{style:{outline:"none"},class:"p-0",primary:"",modelValue:r(j),"onUpdate:modelValue":e[4]||(e[4]=t=>x(j)?j.value=t:null),options:Q.value,optionLabel:"name"},null,8,["modelValue","options"])])):C("",!0),o("h5",Uo,[l(n,{class:"p-0 m-0",modelValue:F.value,"onUpdate:modelValue":e[5]||(e[5]=t=>F.value=t)},null,8,["modelValue"]),Co]),o("span",So,[F.value?(c(),N($,{key:0,style:{outline:"none"},class:"p-0",primary:"",modelValue:r(P),"onUpdate:modelValue":e[6]||(e[6]=t=>x(P)?P.value=t:null),options:W.value,optionLabel:"name"},null,8,["modelValue","options"])):C("",!0)]),o("h5",jo,[l(n,{class:"p-0 m-0",modelValue:M.value,"onUpdate:modelValue":e[7]||(e[7]=t=>M.value=t)},null,8,["modelValue"]),Po]),o("span",To,[M.value?(c(),N($,{key:0,style:{outline:"none"},class:"p-0",primary:"",modelValue:r(T),"onUpdate:modelValue":e[8]||(e[8]=t=>x(T)?T.value=t:null),options:Y.value,optionLabel:"name"},null,8,["modelValue","options"])):C("",!0)]),o("h5",Do,[l(n,{class:"p-0 m-0",modelValue:q.value,"onUpdate:modelValue":e[9]||(e[9]=t=>q.value=t)},null,8,["modelValue"]),Ao]),o("span",Io,[q.value?(c(),N($,{key:0,style:{outline:"none"},class:"p-0",primary:"",modelValue:r(D),"onUpdate:modelValue":e[10]||(e[10]=t=>x(D)?D.value=t:null),options:Z.value,optionLabel:"name"},null,8,["modelValue","options"])):C("",!0)]),o("h5",Lo,[l(n,{class:"p-0 m-0",modelValue:J.value,"onUpdate:modelValue":e[11]||(e[11]=t=>J.value=t)},null,8,["modelValue"]),Go]),o("span",zo,[J.value?(c(),N($,{key:0,style:{outline:"none"},class:"p-0",primary:"",modelValue:r(A),"onUpdate:modelValue":e[12]||(e[12]=t=>x(A)?A.value=t:null),options:X.value,optionLabel:"name"},null,8,["modelValue","options"])):C("",!0)]),No,o("span",Oo,[l($,{style:{outline:"none"},class:"p-0",primary:"",modelValue:r(b).state,"onUpdate:modelValue":e[13]||(e[13]=t=>r(b).state=t),options:me.value},null,8,["modelValue","options"])]),o("h5",Bo,[o("span",Ro,"Sedes en las que estara disponible el producto "+L(u.value),1)]),o("div",Fo,[o("h5",qo,[l(n,{class:"p-0 m-0",modelValue:f.value,"onUpdate:modelValue":e[14]||(e[14]=t=>f.value=t)},null,8,["modelValue"]),Jo]),(c(!0),w(te,null,be(r(oe),t=>(c(),w("div",null,[o("h5",Mo,[l(n,{class:"p-0 m-0",modelValue:m.value[t.site_id],"onUpdate:modelValue":ye=>m.value[t.site_id]=ye},null,8,["modelValue","onUpdate:modelValue"]),o("span",Ho,L(t.site_name),1)])]))),256))]),l(ge,{onClick:_e,class:"m-auto my-4 text-center"},{default:K(()=>[Ko]),_:1})]),_:1},8,["visible"]),l(r(I))],64)}}},Wo=de(Qo,[["__scopeId","data-v-d3224d81"]]),Xo={class:"cont p-4",style:{"background-color":"white",height:"100%",position:"relative"}},Yo=["src"],Zo={style:{display:""}},et={class:"nombre-producto mt-4",style:{"font-weight":"bold"}},ot={class:"descripcion-producto mt-2 text-sm mb-4"},tt={class:"info"},at={class:"text-l",style:{"font-weight":"bold"}},st={__name:"TarjetaMenu",props:{product:{type:Object,default:{}}},setup(g){const V=fe(),d=s(!1),S=()=>{se.value=!se.value,b.value=i.product};s(!1),s(!0),pe(async()=>{d.value=i.product.state=="active"});const I=()=>{z.value=!z.value,ee.value=i.product},p=()=>{const f={...i.product};f.state=d.value?"active":"inactive",fetch(`${v}/products/${i.product.product_id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}).then(u=>{if(!u.ok)throw new Error("Network response was not ok");return V.add({severity:`${d.value?"success":"error"}`,summary:`${d.value?"Activado":"Desactivado"}`,detail:i.product.name,life:3e3}),u.json()}).then(u=>{}).catch(u=>{console.error("Error al actualizar el producto:",u)})},i=g,m=f=>{f.target.src="https://salchimonster.com/images/logo.png"};return(f,u)=>{const O=_("Toast"),B=_("InputSwitch");return c(),w("div",Xo,[o("button",{style:{position:"absolute",top:"-1rem",right:"-1rem","background-color":"var(--primary-color)",width:"2.5rem",height:"2.5rem","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",color:"white","z-index":"99"},onClick:S,class:"add-cart-btn text-xl"},[o("i",{class:xe(["icono text-2xl p-0 m-0",r(Ee).PENCIL])},null,2)]),o("button",{style:{position:"absolute",top:"-1rem",right:"2rem","background-color":"var(--red-500)",width:"2.5rem",height:"2.5rem","border-radius":"50%",display:"flex","align-items":"center","justify-content":"center",color:"white","z-index":"99"},onClick:I,class:"add-cart-btn text-xl"},[o("i",{class:xe(["icono text-2xl p-0 m-0",r(Ee).TRASH])},null,2)]),o("div",{class:"imagen-cont",style:{position:""},onClick:u[0]||(u[0]=G=>r(je)(g.product))},[o("img",{class:"imagen",onError:m,style:{height:"50"},src:`${r(v)}/read-product-image/300/${i.product.name}`,alt:""},null,40,Yo)]),o("div",Zo,[o("p",et,L(i.product.name),1),o("p",ot,L(i.product.description),1)]),l(O,{style:{"box-shadow":"none"}}),o("div",tt,[o("div",at,L(r(Pe)(i.product.price)),1),l(B,{class:"p-0 m-0",modelValue:d.value,"onUpdate:modelValue":u[1]||(u[1]=G=>d.value=G),onChange:p,style:{}},null,8,["modelValue"])])])}}},lt=de(st,[["__scopeId","data-v-44c4dfd0"]]);const nt=g=>(we("data-v-5d2fad10"),g=g(),$e(),g),rt={style:{"text-transform":"capitalize","max-width":""},class:"text-2xl ml-2 py-2"},it={class:"grid p-2 col-12 m-auto",style:{"max-width":"1280px"}},ut={class:"flex align-items-center justify-content-center"},ct=nt(()=>o("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1)),dt={__name:"sesion",setup(g){const V=s([]),d=Ve(),S=async p=>{try{let i=await fetch(`${v}/products/category/name/${p}/site/${ke.value.site_id}`);if(!i.ok)throw V.value=[],new Error(`HTTP error! status: ${i.status}`);let m=await i.json();V.value=m}catch(i){V.value=[],console.error("Error fetching data: ",i)}};ae(ke,(p,i)=>{p!==i&&S(d.params.sesion)}),ae(le,(p,i)=>{p!==i&&S(d.params.sesion)}),pe(async()=>{S(d.params.sesion)}),ae(()=>d.params.sesion,p=>{S(p)});const I=async()=>{if(!ee.value||!ee.value.product_id){console.error("No se ha seleccionado ningún producto para eliminar");return}try{const p=await fetch(`${v}/products/${ee.value.product_id}`,{method:"DELETE"});if(!p.ok)throw new Error(`Error al eliminar el producto: ${p.status}`);await S(d.params.sesion),z.value=!1,console.log(`Producto eliminado: ${ee.value.name}`)}catch(p){console.error("Error al eliminar el producto:",p)}};return(p,i)=>{const m=_("Button"),f=_("Dialog");return c(),w(te,null,[o("p",rt,L(r(d).params.sesion),1),o("span",null,[l(m,{onClick:i[0]||(i[0]=u=>H.value=!r(H)),class:"ml-2 mb-4"},{default:K(()=>[Ue(" Agregar ")]),_:1})]),o("div",it,[(c(!0),w(te,null,be(V.value,u=>(c(),w("div",{key:u.id,class:"xl:col-3 lg:col-4 md:p-3 col-12 m-0"},[l(lt,{class:"col-12 m-0 p-0",product:u},null,8,["product"])]))),128))]),l(_o),l(Wo),l(f,{header:"Confirmation",visible:r(z),"onUpdate:visible":i[2]||(i[2]=u=>x(z)?z.value=u:null),style:{width:"350px"},modal:!0},{footer:K(()=>[l(m,{label:"No",icon:"pi pi-times",onClick:i[1]||(i[1]=u=>z.value=!r(z)),class:"p-button-text"}),l(m,{label:"Si",icon:"pi pi-check",onClick:I,class:"p-button-text",autofocus:""})]),default:K(()=>[o("div",ut,[ct,o("span",null,[Ue("Seguro que desea eliminar "),o("b",null,L(r(ee).name),1)])])]),_:1},8,["visible"])],64)}}},vt=de(dt,[["__scopeId","data-v-5d2fad10"]]);export{vt as default};
