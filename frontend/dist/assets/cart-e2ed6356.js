import{r as P}from"./resumen-33ae5070.js";import{f as b,d as z,z as D,w as j,G as I,g as E,h as v,o as l,x as L,E as F,a as t,i as r,c as d,F as g,r as w,t as y,u,D as S,y as C,H as N,_ as U,p as H,b as M}from"./index-7e517879.js";import"./user-b46535f7.js";const O="/images/empty-cart.jpg",J={style:{color:"black"},class:"grid"},K={class:"mb-2"},Q={class:"mb-2 text-center"},R={class:"mt-2"},W={key:0,class:"p-0",style:{display:"flex",width:"100%",gap:"1rem"}},X={style:{display:"flex",width:"100%",gap:"1rem","justify-content":"space-between"}},Y={class:"text-sm adicion",style:{"text-transform":"capitalize"}},Z={key:0,style:{display:"flex","align-items":"center"}},ee={key:0,class:"pl-2 py-1 text-sm"},te={key:1,class:"pl-2 py-1 text-sm"},ie=t("hr",null,null,-1),se={class:"col-12 p-0",style:{display:"flex","justify-content":"center","font-weight":"bold"}},oe={__name:"dialogAddAditions",setup(f){const o=b({}),A=z(),_=D(),$=(a,e)=>{if(a.checked){const i={id:a.aditional_item_instance_id,name:a.aditional_item_name,price:a.aditional_item_price,group:e};o.value[i.id]={...i,quantity:a.quantity||1}}else delete o.value[a.aditional_item_instance_id]},T=a=>{if(a.checked){const e={id:a.aditional_item_instance_id,name:a.aditional_item_name,price:a.aditional_item_price};o.value[e.id].quantity++}},q=a=>{o.value[a.aditional_item_instance_id].quantity>1&&o.value[a.aditional_item_instance_id]&&o.value[a.aditional_item_instance_id].quantity--};j(()=>_.visibles.addAdditionToCart,async a=>{var e,i;if(!a)o.value={},h.value=[];else{const n=_.cart.products.map(m=>m.product.id);n.length>0&&(h.value=await I.getAditionalGroup(n,(i=(e=A.location)==null?void 0:e.site)==null?void 0:i.site_id))}},{deep:!0});const V=()=>{Object.values(o.value).forEach(e=>{_.addAdditionToCart(e),console.log(e)}),o.value={},_.setVisible("addAdditionToCart",!1)},h=b([]);return b(!0),E(async()=>{var e,i;const a=_.cart.products.map(n=>n.product.id);a.length>0&&(h.value=await I.getAditionalGroup(a,(i=(e=A.location)==null?void 0:e.site)==null?void 0:i.site_id))}),(a,e)=>{const i=v("Checkbox"),n=v("Button"),m=v("InputText"),p=v("Dialog");return l(),L(p,{class:"mx-3",closable:!0,style:N([{"background-color":"white"},{width:"30rem","border-radius":"0.5rem"}]),visible:u(_).visibles.addAdditionToCart,"onUpdate:visible":e[1]||(e[1]=c=>u(_).visibles.addAdditionToCart=c),modal:"",header:"Header"},{footer:F(()=>[t("div",se,[r(n,{onClick:V,style:{width:"auto"},severity:"danger",label:"Agregar al carrito"})])]),default:F(()=>[t("div",J,[(l(!0),d(g,null,w(h.value,c=>(l(),d("div",{class:"col-12",style:{},key:c.category},[t("div",K,[t("span",Q,[t("b",null,y(c.category),1)]),t("div",R,[(l(!0),d(g,null,w(c.items,s=>{var x,B;return l(),d("div",{key:s.aditional_item_instance_id,style:{display:"flex",gap:"1rem"}},[u(_).cart.products.some(k=>k.product.category_name==s.product_category_name)?(l(),d("div",W,[r(i,{class:"my-1",binary:!0,modelValue:s.checked,"onUpdate:modelValue":k=>s.checked=k,onChange:()=>$(s,c.category)},null,8,["modelValue","onUpdate:modelValue","onChange"]),t("div",X,[t("span",Y,y(s.aditional_item_name),1),s.checked&&c.category!="SALSAS"?(l(),d("span",Z,[s.aditional_item_price>0?(l(),d("span",ee,[t("b",null,y(u(S)(s.aditional_item_price*((x=o.value[s.aditional_item_instance_id])==null?void 0:x.quantity))),1)])):C("",!0),r(n,{onClick:k=>q(s),class:"ml-2",severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none"},icon:"pi pi-minus"},null,8,["onClick"]),r(m,{modelValue:(B=o.value[s.aditional_item_instance_id])==null?void 0:B.quantity,readonly:"",style:{width:"2rem",border:"none",height:"1.5rem"},class:"p-0 text-center"},null,8,["modelValue"]),r(n,{onClick:k=>T(s),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none"},icon:"pi pi-plus"},null,8,["onClick"])])):s.aditional_item_price>0?(l(),d("span",te,[t("b",null,y(u(S)(s.aditional_item_price)),1)])):C("",!0)])])):C("",!0)])}),128)),ie])])]))),128))]),r(n,{onClick:e[0]||(e[0]=c=>u(_).setVisible("addAdditionToCart",!1)),icon:"pi pi-times",style:{position:"absolute",right:"-1rem",top:"-1rem"},rounded:"",severity:"danger"})]),_:1},8,["visible"])}}};const G=f=>(H("data-v-2e70ffb0"),f=f(),M(),f),ne={key:0,class:"col-12 my-4 md:my-8 p-0"},ae={class:"grid mx-auto",style:{"max-width":"800px"}},le={class:"col-12 text-sm md:col-6 p-2 md:px-4",style:{display:"flex","flex-direction":"column",gap:"1rem","justify-content":"center"}},de={class:"col-12 py-3 p-shadow",style:{display:"flex","align-items":"end",position:"relative",gap:"1rem","border-radius":"0.3rem"}},re=["src"],ce={style:{display:"flex","flex-direction":"column",gap:"0.4rem",width:"100%"}},pe={style:{display:"flex","flex-direction":"column",gap:"0.3rem",width:"100%"}},ue={style:{display:"flex","justify-content":"space-between","align-items":"center",width:"100%",gap:"1rem"}},_e={class:"p-0 m-0"},me={style:{"text-transform":"uppercase","font-weight":"bold"}},ye={style:{display:"flex"}},he=G(()=>t("div",null,null,-1)),ve={class:"p-0",style:{"box-shadow":"0 0 0.5rem rgba(0, 0, 0, 0.2)","background-color":"#ff620000","border-radius":"5rem",display:"flex"}},ge={class:"p-0 m-0"},be={class:"col-12 p-0 mt-1"},fe={class:"mb-2"},xe={class:"mb-2 text-center"},ke={class:"mt-2"},we={style:{display:"flex",width:"100%",gap:"1rem","justify-content":"space-between"}},Ce={class:"text adicion",style:{"text-transform":"capitalize"}},Ae={style:{display:"flex","align-items":"center"}},$e={key:0,class:"pl-2 py-1 text-sm"},Ve={key:1,style:{"box-shadow":"0 0 5px rgba(0, 0, 0, 0.411)",display:"flex","border-radius":"0.3rem"},class:"ml-2"},Se={key:1,class:"col-12",style:{display:"flex","justify-content":"center",height:"90vh","align-items":"center"}},Te=G(()=>t("img",{style:{"border-radius":"0",width:"100%","max-width":"500px"},src:O,alt:""},null,-1)),qe=[Te],je={__name:"cart",setup(f){const o=D();z();const A=b({}),_=b({}),$=()=>{_.value=o.cart.additions.reduce((e,i)=>{let n=i.group;return e[n]||(e[n]=[]),e[n].push(i),e},{})};j(()=>o.cart.additions,()=>{$()},{deep:!0});const T=e=>{const i={...e};i.quantity=1,o.addAdditionToCart(i)},q=e=>{e.quantity>1&&o.removeAdditionFromCart(e.id)},V=e=>{o.removeAdditionCompletelyFromCart(e.id),$()},h=e=>{e.forEach(i=>{V(i)})};j(()=>o.visibles.addAdditionToCart,e=>{e&&(A.value={})},{deep:!0});const a=b([]);return E(async()=>{a.value=await I.getAditional(53),_.value=o.cart.additions.reduce((i,n)=>{let m=n.group;return i[m]||(i[m]=[]),i[m].push(n),i},{})}),(e,i)=>{const n=v("Button"),m=v("InputText");return l(),d(g,null,[u(o).cart.products.length>0?(l(),d("div",ne,[t("div",ae,[t("div",le,[(l(!0),d(g,null,w(u(o).cart.products,p=>(l(),d("div",de,[t("img",{style:{width:"5rem","object-fit":"cover",height:"5rem"},src:`https://backend.salchimonster.com/read-product-image/96/${p.product.product_name}`,alt:""},null,8,re),r(n,{class:"ml-2",onClick:c=>u(o).removeProductFromCart(p.product.id),icon:"pi pi-trash",severity:"danger",rounded:"",style:{border:"none",right:"-.5rem",top:"-.5rem",position:"absolute",outline:"none",width:"2rem",height:"2rem"}},null,8,["onClick"]),t("div",ce,[t("div",pe,[t("div",ue,[t("span",_e,y(p.product.product_name),1)]),t("span",me,y(p.product.category_name),1),t("div",ye,[he,t("div",ve,[r(n,{onClick:c=>u(o).removeProductInstance(p.product.id),icon:"pi pi-minus",severity:"danger",style:{border:"none",outline:"none",width:"2rem",height:"1.5rem","border-radius":"0.4rem 0 0 0.4rem"}},null,8,["onClick"]),r(m,{class:"text-center",style:{"background-color":"transparent","font-weight":"bold",width:"3rem",height:"1.5rem",color:"black",border:"none"},modelValue:p.quantity,readonly:""},null,8,["modelValue"]),r(n,{onClick:c=>u(o).addProductToCart(p.product),icon:"pi pi-plus ",severity:"danger",style:{"font-weight":"bold",border:"none",outline:"none",width:"2rem",height:"1.5rem","border-radius":"0 0.4rem   0.4rem 0"}},null,8,["onClick"])])])])]),t("h5",ge,[t("b",null,y(u(S)(p.total_cost)),1)])]))),256)),t("div",be,[(l(!0),d(g,null,w(_.value,(p,c)=>(l(),d("div",{class:"p-shadow p-3 mb-4",key:c,style:{position:"relative","border-radius":"0.3rem"}},[r(n,{class:"ml-2",onClick:s=>h(p),icon:"pi pi-trash",severity:"danger",rounded:"",style:{border:"none",right:"-.5rem",top:"-.5rem",position:"absolute",outline:"none",width:"2rem",height:"2rem"}},null,8,["onClick"]),t("div",fe,[t("span",xe,[t("b",null,y(c),1)]),t("div",ke,[(l(!0),d(g,null,w(p,s=>(l(),d("div",{key:s.aditional_item_instance_id,style:{display:"flex",gap:"1rem","align-items":"center"}},[r(n,{text:"",rounded:"",onClick:x=>V(s),class:"p-0 m-0",severity:"danger",style:{width:"2rem",height:"2rem",border:"none"},icon:"pi pi-trash m-0"},null,8,["onClick"]),t("div",we,[t("span",Ce,y(s.name),1),t("span",Ae,[s.price>0?(l(),d("span",$e,[t("b",null,y(u(S)(s.price*s.quantity)),1)])):C("",!0),c!="SALSAS"?(l(),d("div",Ve,[r(n,{onClick:x=>q(s),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none","border-radius":"0.3rem 0 0 0.3rem"},icon:"pi pi-minus"},null,8,["onClick"]),r(m,{modelValue:s.quantity,readonly:"",style:{width:"2rem",border:"none",height:"1.5rem"},class:"p-0 text-center"},null,8,["modelValue"]),r(n,{onClick:x=>T(s),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none","border-radius":"0 0.3rem 0.3rem 0"},icon:"pi pi-plus"},null,8,["onClick"])])):C("",!0)])])]))),128))])])]))),128)),t("div",{onClick:i[0]||(i[0]=p=>u(o).setVisible("addAdditionToCart",!0)),class:"col-12 p-0 m-0",style:{display:"flex","justify-content":"end"}},[r(n,{rounded:"",severity:"danger",icon:"pi pi-plus"})])])]),r(P,{class:"md:col-6"})])])):(l(),d("div",Se,qe)),r(oe)],64)}}},ze=U(je,[["__scopeId","data-v-2e70ffb0"]]);export{ze as default};
