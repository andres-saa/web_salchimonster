import{_ as k}from"./logo-c69ae777.js";import{_ as h,e as S,k as p,H as I,I as T,r as n,o as C,c as U,a as r,b as e,F as V,s as B,v as E,U as P,J as W}from"./index-fd91749d.js";const m=l=>(B("data-v-dacfc716"),l=l(),E(),l),j={class:"flex align-items-center justify-content-center min-h-screen min-w-screen overflow-hidden"},A={class:"flex flex-column align-items-center justify-content-center"},F={style:{"border-radius":"2rem",border:"3px solid var(--primary-color)"}},L={class:"w-full surface py-6 px-2 sm:px-5"},R=m(()=>e("div",{class:"text-center mb-5"},[e("img",{src:k,alt:"Image",height:"50",class:"mb-3"}),e("div",{style:{color:"black"},class:"text-balck text-3xl font-medium mb-3"},"Bienvenido, Admin!"),e("span",{class:"text-600 text-white font-medium"},"Inicia sesion para continuar")],-1)),$=m(()=>e("label",{for:"email1",class:"block text-900 text-xl font-medium mb-2"},"Usuario",-1)),D=m(()=>e("label",{for:"password1",class:"block text-900 font-medium text-xl mb-2"},"Contrasena",-1)),M=m(()=>e("div",{class:"flex align-items-center justify-content-between mb-5 gap-5"},[e("div",{class:"flex align-items-center"})],-1)),N={__name:"Login",setup(l){const _=S(),c=p(""),i=p(""),d=I(),f=T();let a=null;const v=async()=>{try{if(!c.value||!i.value){d.add({severity:"error",summary:"Campos vacíos",detail:"Por favor, completa todos los campos",life:3e3});return}const s=new FormData;s.append("username",c.value),s.append("password",i.value);const o=await fetch(`${P}/token`,{method:"POST",body:s});if(o.ok){const t=await o.json();localStorage.setItem("accessToken",t.access_token),localStorage.setItem("siteId",t.site_id),x(t.site_id),_.setSite(t),f.push("/"),d.add({severity:"success",summary:"Bienvenido",detail:"",life:3e3})}else console.error("Error de inicio de sesión:",o.statusText),d.add({severity:"error",summary:"Usuario o contraseña incorrectos",detail:"",life:3e3})}catch(s){console.error("Error al enviar la solicitud:",s),d.add({severity:"error",summary:"Error en la solicitud",detail:"Por favor, intenta de nuevo más tarde",life:3e3})}};function x(s){a=new WebSocket(`wss://${W}/ws/${s}`),a.onopen=()=>console.log("WebSocket connected"),a.onmessage=o=>console.log("Message received:",o.data),a.onclose=()=>console.log("WebSocket disconnected"),a.onerror=o=>console.error("WebSocket error:",o)}return(s,o)=>{const t=n("Toast"),b=n("InputText"),g=n("Password"),y=n("Button"),w=n("AppConfig");return C(),U(V,null,[r(t),e("div",j,[e("div",A,[e("div",F,[e("div",L,[R,e("div",null,[$,r(b,{id:"email1",type:"text",placeholder:"Usuario",class:"w-full md:w-30rem mb-5",style:{padding:"1rem"},modelValue:c.value,"onUpdate:modelValue":o[0]||(o[0]=u=>c.value=u)},null,8,["modelValue"]),D,r(g,{id:"password1",modelValue:i.value,"onUpdate:modelValue":o[1]||(o[1]=u=>i.value=u),placeholder:"contrasena",toggleMask:!0,class:"w-full mb-3",inputClass:"w-full",inputStyle:{padding:"1rem"}},null,8,["modelValue"]),M,r(y,{label:"Iniciar Sesion",class:"w-full p-3 text-xl button-send",style:{border:"none","background-color":"var(--primary-color)"},onClick:v})])])])])]),r(w,{simple:""})],64)}}},J=h(N,[["__scopeId","data-v-dacfc716"]]);export{J as default};
