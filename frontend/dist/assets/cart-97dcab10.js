import{r as D}from"./resumen-6e42e822.js";import{f as b,d as z,A as E,w as I,J as j,g as P,h as v,o as d,x as G,z as F,a as t,i as l,c as r,F as g,r as C,t as y,u as _,I as S,y as w,E as L,_ as N,p as U,b as H}from"./index-e03f77b7.js";const J={style:{color:"black"},class:"grid"},M={class:"mb-2"},O={class:"mb-2 text-center"},K={class:"mt-2"},Q={key:0,class:"p-0",style:{display:"flex",width:"100%",gap:"1rem"}},R={style:{display:"flex",width:"100%",gap:"1rem","justify-content":"space-between"}},W={class:"text-sm adicion",style:{"text-transform":"capitalize"}},X={key:0,style:{display:"flex","align-items":"center"}},Y={key:0,class:"pl-2 py-1 text-sm"},Z={key:1,class:"pl-2 py-1 text-sm"},ee=t("hr",null,null,-1),te={class:"col-12 p-0",style:{display:"flex","justify-content":"center","font-weight":"bold"}},ie={__name:"dialogAddAditions",setup(f){const s=b({}),A=z(),u=E(),$=(a,e)=>{if(a.checked){const i={id:a.aditional_item_instance_id,name:a.aditional_item_name,price:a.aditional_item_price,group:e};s.value[i.id]={...i,quantity:a.quantity||1}}else delete s.value[a.aditional_item_instance_id]},T=a=>{if(a.checked){const e={id:a.aditional_item_instance_id,name:a.aditional_item_name,price:a.aditional_item_price};s.value[e.id].quantity++}},q=a=>{s.value[a.aditional_item_instance_id].quantity>1&&s.value[a.aditional_item_instance_id]&&s.value[a.aditional_item_instance_id].quantity--};I(()=>u.visibles.addAdditionToCart,async a=>{var e,i;if(!a)s.value={},h.value=[];else{const o=u.cart.products.map(m=>m.product.id);o.length>0&&(h.value=await j.getAditionalGroup(o,(i=(e=A.location)==null?void 0:e.site)==null?void 0:i.site_id))}},{deep:!0});const V=()=>{Object.values(s.value).forEach(e=>{u.addAdditionToCart(e),console.log(e)}),s.value={},u.setVisible("addAdditionToCart",!1)},h=b([]);return b(!0),P(async()=>{var e,i;const a=u.cart.products.map(o=>o.product.id);a.length>0&&(h.value=await j.getAditionalGroup(a,(i=(e=A.location)==null?void 0:e.site)==null?void 0:i.site_id))}),(a,e)=>{const i=v("Checkbox"),o=v("Button"),m=v("InputText"),p=v("Dialog");return d(),G(p,{class:"mx-3",closable:!0,style:L([{"background-color":"white"},{width:"30rem","border-radius":"0.5rem"}]),visible:_(u).visibles.addAdditionToCart,"onUpdate:visible":e[1]||(e[1]=c=>_(u).visibles.addAdditionToCart=c),modal:"",header:"Header"},{footer:F(()=>[t("div",te,[l(o,{onClick:V,style:{width:"auto"},severity:"danger",label:"Agregar al carrito"})])]),default:F(()=>[t("div",J,[(d(!0),r(g,null,C(h.value,c=>(d(),r("div",{class:"col-12",style:{},key:c.category},[t("div",M,[t("span",O,[t("b",null,y(c.category),1)]),t("div",K,[(d(!0),r(g,null,C(c.items,n=>{var x,B;return d(),r("div",{key:n.aditional_item_instance_id,style:{display:"flex",gap:"1rem"}},[_(u).cart.products.some(k=>k.product.category_name==n.product_category_name)?(d(),r("div",Q,[l(i,{class:"my-1",binary:!0,modelValue:n.checked,"onUpdate:modelValue":k=>n.checked=k,onChange:()=>$(n,c.category)},null,8,["modelValue","onUpdate:modelValue","onChange"]),t("div",R,[t("span",W,y(n.aditional_item_name),1),n.checked&&c.category!="SALSAS"?(d(),r("span",X,[n.aditional_item_price>0?(d(),r("span",Y,[t("b",null,y(_(S)(n.aditional_item_price*((x=s.value[n.aditional_item_instance_id])==null?void 0:x.quantity))),1)])):w("",!0),l(o,{onClick:k=>q(n),class:"ml-2",severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none"},icon:"pi pi-minus"},null,8,["onClick"]),l(m,{modelValue:(B=s.value[n.aditional_item_instance_id])==null?void 0:B.quantity,readonly:"",style:{width:"2rem",border:"none",height:"1.5rem"},class:"p-0 text-center"},null,8,["modelValue"]),l(o,{onClick:k=>T(n),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none"},icon:"pi pi-plus"},null,8,["onClick"])])):n.aditional_item_price>0?(d(),r("span",Z,[t("b",null,y(_(S)(n.aditional_item_price)),1)])):w("",!0)])])):w("",!0)])}),128)),ee])])]))),128))]),l(o,{onClick:e[0]||(e[0]=c=>_(u).setVisible("addAdditionToCart",!1)),icon:"pi pi-times",style:{position:"absolute",right:"-1rem",top:"-1rem"},rounded:"",severity:"danger"})]),_:1},8,["visible"])}}};const ne=f=>(U("data-v-fc3fe92a"),f=f(),H(),f),oe={class:"col-12 my-4 md:my-8 p-0"},se={class:"grid mx-auto",style:{"max-width":"800px"}},ae={class:"col-12 text-sm md:col-6 p-2 md:px-4",style:{display:"flex","flex-direction":"column",gap:"1rem","justify-content":"center"}},le={class:"col-12 py-3 p-shadow",style:{display:"flex","align-items":"end",position:"relative",gap:"1rem","border-radius":"0.3rem"}},de=["src"],re={style:{display:"flex","flex-direction":"column",gap:"0.4rem",width:"100%"}},ce={style:{display:"flex","flex-direction":"column",gap:"0.3rem",width:"100%"}},pe={style:{display:"flex","justify-content":"space-between","align-items":"center",width:"100%",gap:"1rem"}},ue={class:"p-0 m-0"},_e={style:{"text-transform":"uppercase","font-weight":"bold"}},me={style:{display:"flex"}},ye=ne(()=>t("div",null,null,-1)),he={class:"p-0",style:{"box-shadow":"0 0 0.5rem rgba(0, 0, 0, 0.2)","background-color":"#ff620000","border-radius":"5rem",display:"flex"}},ve={class:"p-0 m-0"},ge={class:"col-12 p-0 mt-1"},be={class:"mb-2"},fe={class:"mb-2 text-center"},xe={class:"mt-2"},ke={style:{display:"flex",width:"100%",gap:"1rem","justify-content":"space-between"}},Ce={class:"text adicion",style:{"text-transform":"capitalize"}},we={style:{display:"flex","align-items":"center"}},Ae={key:0,class:"pl-2 py-1 text-sm"},$e={key:1,style:{"box-shadow":"0 0 5px rgba(0, 0, 0, 0.411)",display:"flex","border-radius":"0.3rem"},class:"ml-2"},Ve={__name:"cart",setup(f){const s=E();z();const A=b({}),u=b({}),$=()=>{u.value=s.cart.additions.reduce((e,i)=>{let o=i.group;return e[o]||(e[o]=[]),e[o].push(i),e},{})};I(()=>s.cart.additions,()=>{$()},{deep:!0});const T=e=>{const i={...e};i.quantity=1,s.addAdditionToCart(i)},q=e=>{e.quantity>1&&s.removeAdditionFromCart(e.id)},V=e=>{s.removeAdditionCompletelyFromCart(e.id),$()},h=e=>{e.forEach(i=>{V(i)})};I(()=>s.visibles.addAdditionToCart,e=>{e&&(A.value={})},{deep:!0});const a=b([]);return P(async()=>{a.value=await j.getAditional(53),u.value=s.cart.additions.reduce((i,o)=>{let m=o.group;return i[m]||(i[m]=[]),i[m].push(o),i},{})}),(e,i)=>{const o=v("Button"),m=v("InputText");return d(),r(g,null,[t("div",oe,[t("div",se,[t("div",ae,[(d(!0),r(g,null,C(_(s).cart.products,p=>(d(),r("div",le,[t("img",{style:{width:"5rem","object-fit":"cover",height:"5rem"},src:`https://backend.salchimonster.com/read-product-image/96/${p.product.product_name}`,alt:""},null,8,de),l(o,{class:"ml-2",onClick:c=>_(s).removeProductFromCart(p.product.id),icon:"pi pi-trash",severity:"danger",rounded:"",style:{border:"none",right:"-.5rem",top:"-.5rem",position:"absolute",outline:"none",width:"2rem",height:"2rem"}},null,8,["onClick"]),t("div",re,[t("div",ce,[t("div",pe,[t("span",ue,y(p.product.product_name),1)]),t("span",_e,y(p.product.category_name),1),t("div",me,[ye,t("div",he,[l(o,{onClick:c=>_(s).removeProductInstance(p.product.id),icon:"pi pi-minus",severity:"danger",style:{border:"none",outline:"none",width:"2rem",height:"1.5rem","border-radius":"0.4rem 0 0 0.4rem"}},null,8,["onClick"]),l(m,{class:"text-center",style:{"background-color":"transparent","font-weight":"bold",width:"3rem",height:"1.5rem",color:"black",border:"none"},modelValue:p.quantity,readonly:""},null,8,["modelValue"]),l(o,{onClick:c=>_(s).addProductToCart(p.product),icon:"pi pi-plus ",severity:"danger",style:{"font-weight":"bold",border:"none",outline:"none",width:"2rem",height:"1.5rem","border-radius":"0 0.4rem   0.4rem 0"}},null,8,["onClick"])])])])]),t("h5",ve,[t("b",null,y(_(S)(p.total_cost)),1)])]))),256)),t("div",ge,[(d(!0),r(g,null,C(u.value,(p,c)=>(d(),r("div",{class:"p-shadow p-3 mb-4",key:c,style:{position:"relative","border-radius":"0.3rem"}},[l(o,{class:"ml-2",onClick:n=>h(p),icon:"pi pi-trash",severity:"danger",rounded:"",style:{border:"none",right:"-.5rem",top:"-.5rem",position:"absolute",outline:"none",width:"2rem",height:"2rem"}},null,8,["onClick"]),t("div",be,[t("span",fe,[t("b",null,y(c),1)]),t("div",xe,[(d(!0),r(g,null,C(p,n=>(d(),r("div",{key:n.aditional_item_instance_id,style:{display:"flex",gap:"1rem","align-items":"center"}},[l(o,{text:"",rounded:"",onClick:x=>V(n),class:"p-0 m-0",severity:"danger",style:{width:"2rem",height:"2rem",border:"none"},icon:"pi pi-trash m-0"},null,8,["onClick"]),t("div",ke,[t("span",Ce,y(n.name),1),t("span",we,[n.price>0?(d(),r("span",Ae,[t("b",null,y(_(S)(n.price*n.quantity)),1)])):w("",!0),c!="SALSAS"?(d(),r("div",$e,[l(o,{onClick:x=>q(n),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none","border-radius":"0.3rem 0 0 0.3rem"},icon:"pi pi-minus"},null,8,["onClick"]),l(m,{modelValue:n.quantity,readonly:"",style:{width:"2rem",border:"none",height:"1.5rem"},class:"p-0 text-center"},null,8,["modelValue"]),l(o,{onClick:x=>T(n),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none","border-radius":"0 0.3rem 0.3rem 0"},icon:"pi pi-plus"},null,8,["onClick"])])):w("",!0)])])]))),128))])])]))),128)),t("div",{onClick:i[0]||(i[0]=p=>_(s).setVisible("addAdditionToCart",!0)),class:"col-12 p-0 m-0",style:{display:"flex","justify-content":"end"}},[l(o,{rounded:"",severity:"danger",icon:"pi pi-plus"})])])]),l(D,{class:"md:col-6"})])]),l(ie)],64)}}},qe=N(Ve,[["__scopeId","data-v-fc3fe92a"]]);export{qe as default};
