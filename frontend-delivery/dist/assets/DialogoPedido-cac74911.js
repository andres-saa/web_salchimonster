import{_ as V,u as R,f as z,i as w,r as f,o as a,c as d,a as u,w as x,b as e,q as B,d as s,j as k,s as T,k as C,t as o,F as O,g as I,l as E,p as F,m as j}from"./index-6009ddd3.js";import{f as p}from"./formatoPesos-2a38d2e7.js";const n=b=>(F("data-v-69e0eb7a"),b=b(),j(),b),A=n(()=>e("h3",null,"Cancelar Orden",-1)),L=["onSubmit"],U=n(()=>e("span",{for:"responsible"},"Responsable",-1)),$=n(()=>e("span",{for:"reason"},"Razón",-1)),q={id:"factura"},H={class:"p-0 col-12",style:{width:"100%"}},G={style:{position:"sticky",top:"5rem","border-radius":"0.5rem","z-index":"1000"},class:"col-12 p-3 m-0 p-0"},J={class:"text-center text-xl",style:{"font-weight":"bold",color:"black"}},K={class:"grid my-3"},Q={class:"p-0 m-0 col-12"},W={class:"p-0 m-0"},X=n(()=>e("div",{class:"grid my-2 pb-0 py-0 px-1",style:{"font-weight":"bold",color:"white","background-color":"black","align-items":"center","justify-content":"center"}},[e("div",{class:"col-6 p-0 my-0"},[e("b",null," productos")]),e("div",{class:"col-1 my-0 p-0 text-center"},[e("b",null," x ")]),e("div",{class:"col-2 my-0 p-0"},[e("b",null," val ")]),e("div",{class:"col-3 my-0 p-0 text-right"},[e("b",null," total ")])],-1)),Y={class:"grid my-0 py-0"},Z={class:"col-6 p-0 my-0"},ee={class:"col-1 my-0 p-0 text-center"},se={class:"col-2 my-0 p-0"},te={class:"col-3 my-0 p-0 text-right"},le=n(()=>e("div",{class:"col-12 p-0 m-0",style:{"background-color":"rgba(0, 0, 0, 0.286)",height:"1px"}},null,-1)),oe={class:"my-2 col-12 py-0 px-1",style:{"background-color":"black",color:"white"}},ne={class:"col-12 m-0 p-0"},re={class:"grid m-0 p-0"},ae={class:"col-6 p-0 my-0"},ie={class:"col-1 m-0 p-0 text-center"},ce={class:"col-2 m-0 p-0"},de={class:"col-3 m-0 p-0 text-right"},ue=n(()=>e("div",{class:"col-12 p-0 m-0",style:{"background-color":"rgba(0, 0, 0, 0.286)",height:"1px"}},null,-1)),pe={class:"grid mt-1"},_e=n(()=>e("div",{class:"col-6 my-0 p-0 py-0"},[e("span",null,[e("b",null,"Subtotal")])],-1)),me={class:"col-6 my-0 p-0 text-right py-0"},ye=n(()=>e("div",{class:"col-6 my-0 p-0 py-0"},[e("span",null,[e("b",null,"Domicilio")])],-1)),be={class:"col-6 my-0 p-0 text-right py-0"},ve={style:{}},he=n(()=>e("div",{class:"col-6 my-0 p-0 py-0"},[e("span",null,[e("b",null,"Total")])],-1)),ge={class:"col-6 my-0 p-0 text-right py-0"},fe={class:"col-12 p-1 mt-1 mb-2 border-1"},xe=n(()=>e("span",null,[e("b",null,"Notas:")],-1)),Oe=n(()=>e("br",null,null,-1)),we={class:"notas"},ke=n(()=>e("div",{class:"col-12 tex my-0 p-0 py-0 px-1",style:{"background-color":"black",color:"white"}},[e("p",null,[e("b",null,"cliente")])],-1)),Te=n(()=>e("div",{class:"col-3 my-0 p-0 py-0",style:{}},[e("span",null,[e("b",null,"NOMBRE")])],-1)),Ce={class:"col-9 my-0 p-0 text-right py-0"},Ie=n(()=>e("div",{class:"col-4 my-0 p-0 py-0",style:{}},[e("span",null,[e("b",null,"telefono")])],-1)),De={class:"col-8 my-0 p-0 text-right py-0"},Me=n(()=>e("div",{class:"col-4 my-0 p-0 py-0",style:{}},[e("span",null,[e("b",null,"direccion ")])],-1)),Ne={class:"col-8 my-0 p-0 text-right py-0"},Pe=n(()=>e("div",{class:"col-6 my-0 p-0 py-0",style:{}},[e("span",null,[e("b",null,"metodo de pago")])],-1)),Se={class:"col-6 my-0 p-0 text-right py-0"},Ve={class:"col-12 mb-0 pb-0 px-0 m-0",style:{display:"flex","justify-content":"space-between",gap:"1rem"}},Re={__name:"DialogoPedido",setup(b){const l=R(),N=()=>{const _=document.getElementById("factura").innerHTML,t=window.open("","_blank");t.document.write("<html><head><title>Factura</title>");const h=document.getElementsByTagName("style");for(let y=0;y<h.length;y++)t.document.write(h[y].outerHTML);t.document.write("<style> @media print { html{height: min-content;} .negrilla{background-color:black !IMPORTANT; color:white !IMPORTANT;} *{ font-family: sans-serif; padding: 0 !IMPORTANT; margin: 0rem !IMPORTANT; font-size:0.8rem !IMPORTANT} body { -webkit-print-color-adjust: exact; /* Chrome, Safari */ color-adjust: exact; /* Firefox */ } } </style>"),t.document.write("</head><body>"),t.document.write(_),t.document.write("</body></html>"),t.document.close(),t.print(),setTimeout(()=>{t.close()},.01)};z(async()=>{l.currentOrder.value=l.currentOrder});const v=w(!1),i=w({responsible:null,reason:"Sin razon"}),P=w([{name:"Restaurante",value:"restaurant"},{name:"Cliente",value:"client"}]),S=()=>{i.value.responsible&&T.cancelOrder(l.currentOrder.order_id,i.value.reason,i.value.responsible.name).then(_=>{_&&(v.value=!1,console.log("Order canceled successfully"))}).catch(_=>{console.error("Failed to cancel order:",_)})};return(_,t)=>{const h=f("Dropdown"),y=f("Textarea"),m=f("Button"),D=f("Dialog");return a(),d(O,null,[u(D,{visible:v.value,"onUpdate:visible":t[2]||(t[2]=r=>v.value=r),closeOnEscape:"",closable:!0,modal:"",style:{width:"30rem"}},{header:x(()=>[A]),default:x(()=>[e("form",{onSubmit:B(S,["prevent"]),style:{display:"flex",gap:"1rem","flex-direction":"column"}},[U,u(h,{id:"responsible",modelValue:i.value.responsible,"onUpdate:modelValue":t[0]||(t[0]=r=>i.value.responsible=r),options:P.value,optionLabel:"name",placeholder:"Selecciona un responsable"},null,8,["modelValue","options"]),$,u(y,{style:{resize:"none","text-transform":"lowercase"},id:"reason",modelValue:i.value.reason,"onUpdate:modelValue":t[1]||(t[1]=r=>i.value.reason=r),rows:"5",placeholder:"Escribe la razón de la cancelación"},null,8,["modelValue"]),u(m,{label:"Cancelar Orden",type:"submit",class:"p-button-danger"})],40,L)]),_:1},8,["visible"]),u(D,{closeOnEscape:"",closable:!1,visible:s(l).visibles.currentOrder,"onUpdate:visible":t[7]||(t[7]=r=>s(l).visibles.currentOrder=r),modal:"",style:{width:"30rem","max-height":"80vh",position:"relative"}},{footer:x(()=>[e("div",Ve,[s(l).currentOrder.current_status=="generada"?(a(),k(m,{key:0,size:"small",onClick:t[3]||(t[3]=r=>s(T).prepareOrder(s(l).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"Preparar"})):C("",!0),s(l).currentOrder.current_status!="enviada"&&s(l).currentOrder.current_status!="cancelada"?(a(),k(m,{key:1,size:"small",onClick:t[4]||(t[4]=r=>v.value=!0),style:{"border-radius":"0.3rem",width:"100%"},severity:"danger",label:"cancelar"})):C("",!0),s(l).currentOrder.current_status=="en preparacion"?(a(),k(m,{key:2,size:"small",onClick:t[5]||(t[5]=r=>s(T).sendOrder(s(l).currentOrder.order_id)),style:{"border-radius":"0.3rem",width:"100%"},severity:"success",label:"enviar"})):C("",!0),u(m,{size:"small",style:{"border-radius":"0.3rem",width:"100%"},onClick:N,severity:"warning",label:"imprimir"})])]),default:x(()=>{var r;return[e("div",q,[e("div",H,[e("div",G,[e("p",J," #"+o(s(l).currentOrder.order_id),1),e("div",K,[e("div",Q,[e("span",W," fecha: "+o((r=s(l).currentOrder.latest_status_timestamp)==null?void 0:r.split("T")[0]),1)])]),X,(a(!0),d(O,null,I(s(l).currentOrder.products,c=>(a(),d("div",Y,[e("div",Z,[e("span",null,o(c.name),1)]),e("div",ee,[e("span",null,o(c.quantity),1)]),e("div",se,[e("span",null,o(s(p)(c.price)),1)]),e("div",te,[e("span",null,o(s(p)(c.total_price)),1)]),le]))),256)),(a(!0),d(O,null,I(s(l).currentOrder.additional_items,(c,M)=>(a(),d("div",{class:"grid my-1 p-0",key:M,style:{position:"relative"}},[e("span",oe,[e("b",null,o(M),1)]),(a(!0),d(O,null,I(c,g=>(a(),d("div",ne,[e("div",re,[e("div",ae,[e("span",null,o(g.aditional_name),1)]),e("div",ie,[e("span",null,o(g.aditional_quantity),1)]),e("div",ce,[e("span",null,o(s(p)(g.aditional_price)),1)]),e("div",de,[e("span",null,o(s(p)(g.total_aditional_price)),1)])]),ue]))),256))]))),128)),e("div",pe,[_e,e("div",me,[e("span",null,[e("b",null,o(s(p)(s(l).currentOrder.total_order_price)),1)])]),ye,e("div",be,[e("span",ve,[e("b",null,o(s(p)(s(l).currentOrder.delivery_price)),1)])]),he,e("div",ge,[e("span",null,[e("b",null,o(s(p)(s(l).currentOrder.delivery_price+s(l).currentOrder.total_order_price)),1)])]),e("div",fe,[xe,E(),Oe,e("span",we,o(s(l).currentOrder.order_notes),1)]),ke,Te,e("div",Ce,[e("span",null,o(s(l).currentOrder.user_name),1)]),Ie,e("div",De,[e("span",null,o(s(l).currentOrder.user_phone),1)]),Me,e("div",Ne,[e("span",null,o(s(l).currentOrder.user_address),1)]),Pe,e("div",Se,[e("span",null,o(s(l).currentOrder.payment_method),1)])])])])]),u(m,{class:"shadow-4",onClick:t[6]||(t[6]=c=>s(l).setVisible("currentOrder",!1)),icon:"pi pi-times",rounded:"",severity:"danger",style:{position:"absolute",top:"-1rem","border-radius":"50%",right:"-1rem"}})]}),_:1},8,["visible"])],64)}}},Ee=V(Re,[["__scopeId","data-v-69e0eb7a"]]);export{Ee as D};
