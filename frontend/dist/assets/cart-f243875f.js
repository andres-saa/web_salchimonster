import{r as N}from"./resumen-6c734419.js";import{f,A as E,w as I,J as j,g as F,h as g,o as r,x as P,z as B,a as e,i as d,c as p,F as b,r as A,t as y,u as _,I as T,y as $,E as D,_ as G,d as H,p as L,b as U}from"./index-9aebc26f.js";const M={style:{color:"black"},class:"grid"},O={class:"mb-2"},J={class:"mb-2 text-center"},R={class:"mt-2"},K={key:0,class:"p-0",style:{display:"flex",width:"100%",gap:"1rem"}},Q={style:{display:"flex",width:"100%",gap:"1rem","justify-content":"space-between"}},W={class:"text-sm adicion",style:{"text-transform":"capitalize"}},X={key:0,style:{display:"flex","align-items":"center"}},Y={key:0,class:"pl-2 py-1 text-sm"},Z={key:1,class:"pl-2 py-1 text-sm"},ee=e("hr",null,null,-1),te={class:"col-12 p-0",style:{display:"flex","justify-content":"center","font-weight":"bold"}},ie={__name:"dialogAddAditions",setup(x){const t=f({}),m=E(),k=(i,l)=>{if(i.checked){const n={id:i.aditional_item_instance_id,name:i.aditional_item_name,price:i.aditional_item_price,group:l};t.value[n.id]={...n,quantity:i.quantity||1}}else delete t.value[i.aditional_item_instance_id]},S=i=>{if(i.checked){const l={id:i.aditional_item_instance_id,name:i.aditional_item_name,price:i.aditional_item_price};t.value[l.id].quantity++}},V=i=>{t.value[i.aditional_item_instance_id].quantity>1&&t.value[i.aditional_item_instance_id]&&t.value[i.aditional_item_instance_id].quantity--};I(()=>m.visibles.addAdditionToCart,async i=>{if(!i)t.value={},v.value=[];else{const l=m.cart.products.map(n=>n.product.id);l.length>0&&(v.value=await j.getAditionalGroup(l))}},{deep:!0});const q=()=>{Object.values(t.value).forEach(l=>{m.addAdditionToCart(l),console.log(l)}),t.value={},m.setVisible("addAdditionToCart",!1)},v=f([]);return f(!0),F(async()=>{const i=m.cart.products.map(l=>l.product.id);i.length>0&&(v.value=await j.getAditionalGroup(i))}),(i,l)=>{const n=g("Checkbox"),s=g("Button"),c=g("InputText"),h=g("Dialog");return r(),P(h,{class:"mx-3",closable:!0,style:D([{"background-color":"white"},{width:"30rem","border-radius":"0.5rem"}]),visible:_(m).visibles.addAdditionToCart,"onUpdate:visible":l[1]||(l[1]=a=>_(m).visibles.addAdditionToCart=a),modal:"",header:"Header"},{footer:B(()=>[e("div",te,[d(s,{onClick:q,style:{width:"auto"},severity:"danger",label:"Agregar al carrito"})])]),default:B(()=>[e("div",M,[(r(!0),p(b,null,A(v.value,a=>(r(),p("div",{class:"col-12",style:{},key:a.category},[e("div",O,[e("span",J,[e("b",null,y(a.category),1)]),e("div",R,[(r(!0),p(b,null,A(a.items,o=>{var u,C;return r(),p("div",{key:o.aditional_item_instance_id,style:{display:"flex",gap:"1rem"}},[_(m).cart.products.some(w=>w.product.category_name==o.product_category_name)?(r(),p("div",K,[d(n,{class:"my-1",binary:!0,modelValue:o.checked,"onUpdate:modelValue":w=>o.checked=w,onChange:()=>k(o,a.category)},null,8,["modelValue","onUpdate:modelValue","onChange"]),e("div",Q,[e("span",W,y(o.aditional_item_name),1),o.checked&&a.category!="SALSAS"?(r(),p("span",X,[o.aditional_item_price>0?(r(),p("span",Y,[e("b",null,y(_(T)(o.aditional_item_price*((u=t.value[o.aditional_item_instance_id])==null?void 0:u.quantity))),1)])):$("",!0),d(s,{onClick:w=>V(o),class:"ml-2",severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none"},icon:"pi pi-minus"},null,8,["onClick"]),d(c,{modelValue:(C=t.value[o.aditional_item_instance_id])==null?void 0:C.quantity,readonly:"",style:{width:"2rem",border:"none",height:"1.5rem"},class:"p-0 text-center"},null,8,["modelValue"]),d(s,{onClick:w=>S(o),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none"},icon:"pi pi-plus"},null,8,["onClick"])])):o.aditional_item_price>0?(r(),p("span",Z,[e("b",null,y(_(T)(o.aditional_item_price)),1)])):$("",!0)])])):$("",!0)])}),128)),ee])])]))),128))]),d(s,{onClick:l[0]||(l[0]=a=>_(m).setVisible("addAdditionToCart",!1)),icon:"pi pi-times",style:{position:"absolute",right:"-1rem",top:"-1rem"},rounded:"",severity:"danger"})]),_:1},8,["visible"])}}};const z=x=>(L("data-v-a7e0dfa5"),x=x(),U(),x),ne={class:"col-12 my-4 md:my-8 p-0"},oe={class:"grid mx-auto",style:{"max-width":"800px"}},se={class:"col-12 text-sm md:col-6 p-2 md:px-4",style:{display:"flex","flex-direction":"column",gap:"1rem","justify-content":"center"}},ae={class:"col-12 py-3 p-shadow",style:{display:"flex","align-items":"end",position:"relative",gap:"1rem","border-radius":"0.3rem"}},le=z(()=>e("img",{style:{width:"5rem","object-fit":"cover",height:"5rem"},src:"https://backend.salchimonster.com/read-product-image/600/CHICHAMONSTER",alt:""},null,-1)),de={style:{display:"flex","flex-direction":"column",gap:"0.4rem",width:"100%"}},re={style:{display:"flex","flex-direction":"column",gap:"0.3rem",width:"100%"}},ce={style:{display:"flex","justify-content":"space-between","align-items":"center",width:"100%",gap:"1rem"}},pe={class:"p-0 m-0"},ue={style:{"text-transform":"uppercase","font-weight":"bold"}},_e={style:{display:"flex"}},me=z(()=>e("div",null,null,-1)),ye={class:"p-0",style:{"box-shadow":"0 0 0.5rem rgba(0, 0, 0, 0.2)","background-color":"#ff620000","border-radius":"5rem",display:"flex"}},he={class:"p-0 m-0"},ve={class:"col-12 p-0 mt-1"},ge={class:"mb-2"},be={class:"mb-2 text-center"},fe={class:"mt-2"},xe={style:{display:"flex",width:"100%",gap:"1rem","justify-content":"space-between"}},ke={class:"text adicion",style:{"text-transform":"capitalize"}},Ce={style:{display:"flex","align-items":"center"}},we={key:0,class:"pl-2 py-1 text-sm"},Ae={key:1,style:{"box-shadow":"0 0 5px rgba(0, 0, 0, 0.411)",display:"flex","border-radius":"0.3rem"},class:"ml-2"},$e={__name:"cart",setup(x){const t=E();H();const m=f({}),k=f({}),S=()=>{k.value=t.cart.additions.reduce((n,s)=>{let c=s.group;return n[c]||(n[c]=[]),n[c].push(s),n},{})};I(()=>t.cart.additions,()=>{S()},{deep:!0});const V=n=>{const s={...n};s.quantity=1,t.addAdditionToCart(s)},q=n=>{n.quantity>1&&t.removeAdditionFromCart(n.id)},v=n=>{t.removeAdditionCompletelyFromCart(n.id),S()},i=n=>{n.forEach(s=>{v(s)})};I(()=>t.visibles.addAdditionToCart,n=>{n&&(m.value={})},{deep:!0});const l=f([]);return F(async()=>{l.value=await j.getAditional(53),k.value=t.cart.additions.reduce((s,c)=>{let h=c.group;return s[h]||(s[h]=[]),s[h].push(c),s},{})}),(n,s)=>{const c=g("Button"),h=g("InputText");return r(),p(b,null,[e("div",ne,[e("div",oe,[e("div",se,[(r(!0),p(b,null,A(_(t).cart.products,a=>(r(),p("div",ae,[le,d(c,{class:"ml-2",onClick:o=>_(t).removeProductFromCart(a.product.id),icon:"pi pi-trash",severity:"danger",rounded:"",style:{border:"none",right:"-.5rem",top:"-.5rem",position:"absolute",outline:"none",width:"2rem",height:"2rem"}},null,8,["onClick"]),e("div",de,[e("div",re,[e("div",ce,[e("span",pe,y(a.product.product_name),1)]),e("span",ue,y(a.product.category_name),1),e("div",_e,[me,e("div",ye,[d(c,{onClick:o=>_(t).removeProductInstance(a.product.id),icon:"pi pi-minus",severity:"danger",style:{border:"none",outline:"none",width:"2rem",height:"1.5rem","border-radius":"0.4rem 0 0 0.4rem"}},null,8,["onClick"]),d(h,{class:"text-center",style:{"background-color":"transparent","font-weight":"bold",width:"3rem",height:"1.5rem",color:"black",border:"none"},modelValue:a.quantity,readonly:""},null,8,["modelValue"]),d(c,{onClick:o=>_(t).addProductToCart(a.product),icon:"pi pi-plus ",severity:"danger",style:{"font-weight":"bold",border:"none",outline:"none",width:"2rem",height:"1.5rem","border-radius":"0 0.4rem   0.4rem 0"}},null,8,["onClick"])])])])]),e("h5",he,[e("b",null,y(_(T)(a.total_cost)),1)])]))),256)),e("div",ve,[(r(!0),p(b,null,A(k.value,(a,o)=>(r(),p("div",{class:"p-shadow p-3 mb-4",key:o,style:{position:"relative","border-radius":"0.3rem"}},[d(c,{class:"ml-2",onClick:u=>i(a),icon:"pi pi-trash",severity:"danger",rounded:"",style:{border:"none",right:"-.5rem",top:"-.5rem",position:"absolute",outline:"none",width:"2rem",height:"2rem"}},null,8,["onClick"]),e("div",ge,[e("span",be,[e("b",null,y(o),1)]),e("div",fe,[(r(!0),p(b,null,A(a,u=>(r(),p("div",{key:u.aditional_item_instance_id,style:{display:"flex",gap:"1rem","align-items":"center"}},[d(c,{text:"",rounded:"",onClick:C=>v(u),class:"p-0 m-0",severity:"danger",style:{width:"2rem",height:"2rem",border:"none"},icon:"pi pi-trash m-0"},null,8,["onClick"]),e("div",xe,[e("span",ke,y(u.name),1),e("span",Ce,[u.price>0?(r(),p("span",we,[e("b",null,y(_(T)(u.price*u.quantity)),1)])):$("",!0),o!="SALSAS"?(r(),p("div",Ae,[d(c,{onClick:C=>q(u),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none","border-radius":"0.3rem 0 0 0.3rem"},icon:"pi pi-minus"},null,8,["onClick"]),d(h,{modelValue:u.quantity,readonly:"",style:{width:"2rem",border:"none",height:"1.5rem"},class:"p-0 text-center"},null,8,["modelValue"]),d(c,{onClick:C=>V(u),severity:"danger",style:{width:"2rem",height:"1.5rem",border:"none","border-radius":"0 0.3rem 0.3rem 0"},icon:"pi pi-plus"},null,8,["onClick"])])):$("",!0)])])]))),128))])])]))),128)),e("div",{onClick:s[0]||(s[0]=a=>_(t).setVisible("addAdditionToCart",!0)),class:"col-12 p-0 m-0",style:{display:"flex","justify-content":"end"}},[d(c,{rounded:"",severity:"danger",icon:"pi pi-plus"})])])]),d(N,{class:"md:col-6"})])]),d(ie)],64)}}},Ve=G($e,[["__scopeId","data-v-a7e0dfa5"]]);export{Ve as default};
